(function(t){function e(e){for(var n,o,s=e[0],c=e[1],l=e[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,s=1;s<r.length;s++){var c=r[s];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},i={app:0},a=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0850":function(t,e,r){},"0c3c":function(t,e,r){},"0d46":function(t,e,r){"use strict";var n=r("386c"),i=r.n(n);i.a},1132:function(t,e,r){},"127d":function(t,e,r){},1401:function(t,e,r){},1570:function(t,e,r){"use strict";var n=r("2ced"),i=r.n(n);i.a},"166d":function(t,e,r){"use strict";var n=r("3f74"),i=r.n(n);i.a},"1d53":function(t,e,r){},"1f3b":function(t,e,r){},"22fa":function(t,e,r){},2422:function(t,e,r){},2469:function(t,e,r){},"28dc":function(t,e,r){"use strict";var n=r("1401"),i=r.n(n);i.a},"28fd":function(t,e,r){"use strict";var n=r("2d53"),i=r.n(n);i.a},2918:function(t,e,r){},"29be":function(t,e,r){"use strict";var n=r("9e76"),i=r.n(n);i.a},"2ca0":function(t,e,r){"use strict";var n=r("f920"),i=r.n(n);i.a},"2ced":function(t,e,r){},"2d53":function(t,e,r){},"2ee3":function(t,e,r){},3025:function(t,e,r){},3095:function(t,e,r){},"343a":function(t,e,r){"use strict";var n=r("8b7f"),i=r.n(n);i.a},"386c":function(t,e,r){},"3f74":function(t,e,r){},"3f8c":function(t,e,r){"use strict";var n=r("f325"),i=r.n(n);i.a},4210:function(t,e,r){"use strict";var n=r("ef8d"),i=r.n(n);i.a},4352:function(t,e,r){"use strict";var n=r("da06"),i=r.n(n);i.a},"453e":function(t,e,r){},"46aa":function(t,e,r){},"47e2":function(t,e,r){"use strict";var n=r("1f3b"),i=r.n(n);i.a},4862:function(t,e,r){"use strict";var n=r("d994"),i=r.n(n);i.a},"4cbc":function(t,e,r){"use strict";var n=r("acf8"),i=r.n(n);i.a},5245:function(t,e,r){"use strict";var n=r("6be0"),i=r.n(n);i.a},"53d7":function(t,e,r){"use strict";var n=r("7fcb"),i=r.n(n);i.a},"56d7":function(t,e,r){"use strict";r.r(e);r("7514"),r("cadf"),r("551c"),r("f751"),r("097d"),r("20d6"),r("7f7f"),r("6b54"),r("55dd"),r("ac6a"),r("96cf"),r("34ef"),r("6c7b");var n=r("53ca"),i=(r("28a5"),r("4917"),r("1da1")),a=(r("9278"),r("c5f6"),r("87f3"),r("a481"),r("f576"),r("673e"),{add:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var r=0,n=0,i=1;try{r=t.toString().split(".")[1].length}catch(a){}try{n=e.toString().split(".")[1].length}catch(a){}return i=Math.pow(10,Math.max(r,n)),(this.mul(t,i)+this.mul(e,i))/i},sub:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var r=0,n=0,i=1;try{r=t.toString().split(".")[1].length}catch(a){}try{n=e.toString().split(".")[1].length}catch(a){}return i=Math.pow(10,Math.max(r,n)),(this.mul(t,i)-this.mul(e,i))/i},mul:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var r=0,n=t.toString(),i=e.toString();try{r+=n.split(".")[1].length}catch(a){}try{r+=i.split(".")[1].length}catch(a){}return Number(n.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,r)},div:function(t,e){if("undefined"==typeof t||"undefined"==typeof e||null==t||null==e)return NaN;var r=1,n=1,i=0,a=0;try{i=t.toString().split(".")[1].length}catch(o){}try{a=e.toString().split(".")[1].length}catch(o){}return r=Number(t.toString().replace(".","")),n=Number(e.toString().replace(".","")),this.mul(r/n,Math.pow(10,a-i))}}),o=!1;function s(t){for(var e=[],r={},n=0;n<t.length;n++){var i=t[n];r[i]||(r[i]=1,e.push(i))}return e}var c=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},l=function(t){return"string"===typeof t&&0!==t.length},u=function(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)},d=function(t){var e,r,n,i;if("number"===typeof t&&!isNaN(t)&&isFinite(t)){n=t%256;var o=a.div(a.sub(t,n),256);r=o%256,o=a.div(a.sub(o,r),256),e=o%256,o=a.div(a.sub(o,e),256),i=o%256}else e=r=n=i=255;var s=a.div(i,255);return s=a.div(Math.round(a.mul(s,100)),100),{r:e,g:r,b:n,a:i,opacity:s,value:"rgba(".concat(e,", ").concat(r,", ").concat(n,", ").concat(s,")"),type:"rgba"}},h=function(t){if("string"!==typeof t||9!==t.length||"#"!==t[0])return t;var e=parseInt(t.substr(1,2),16),r=parseInt(t.substr(3,2),16),n=parseInt(t.substr(5,2),16),i=parseInt(t.substr(7,2),16);return f(e,r,n,i)},f=function(t,e,r,n){var i=a.mul(n,16777216);return i=a.add(i,a.mul(t,65536)),i=a.add(i,a.mul(e,256)),i=a.add(i,r),i},p=function(t){if(u(t))return{value:"#".concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")),a:t.a,opacity:null!=t.opacity?t.opacity:a.div(t.a,255),type:"hex"}},m=function(t){if(u(t))return{value:"#".concat(t.a.toString(16).padStart(2,"0")).concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")),type:"ahex"}},v=function(t){if(u(t))return{value:"#".concat(t.r.toString(16).padStart(2,"0")).concat(t.g.toString(16).padStart(2,"0")).concat(t.b.toString(16).padStart(2,"0")).concat(t.a.toString(16).padStart(2,"0")),type:"hexa"}},b=function(t){var e=t.r,r=t.g,n=t.b;e/=255,r/=255,n/=255;var i,o,s=Math.max(e,r,n),c=Math.min(e,r,n),l=(s+c)/2;if(s==c)i=o=0;else{var u=s-c;switch(o=l>.5?u/(2-s-c):u/(s+c),s){case e:i=(r-n)/u+(r<n?6:0);break;case r:i=(n-e)/u+2;break;case n:i=(e-r)/u+4;break}i/=6}i=Math.round(a.mul(i,360)),o=Math.round(a.mul(o,100)),l=Math.round(a.mul(l,100));var d=null!=t.opacity?t.opacity:a.div(t.a,255);return d=a.div(Math.round(a.mul(d,100)),100),{h:i,s:a.div(o,100),l:a.div(l,100),a:t.a,opacity:d,value:"hsla(".concat(i,", ").concat(o,"%, ").concat(l,"%, ").concat(d,")"),type:"hsla"}},g=(r("456d"),{ALL:0,XD:1,SKETCH:2,PHOTOSHOP:4}),w={PASSTHROUGH:"pass-through",NORMAL:"Normal",DARKEN:"Darken",MULTIPLY:"Multiply",COLOR_BURN:"ColorBurn",LIGHTEN:"Lighten",SCREEN:"Screen",COLOR_DODGE:"ColorDodge",OVERLAY:"Overlay",SOFT_LIGHT:"SoftLight",HARD_LIGHT:"HardLight",DIFFERENCE:"Difference",EXCLUSION:"Exclusion",HUE:"Hue",SATURATION:"Saturation",COLOR:"Color",LUMINOSITY:"Luminosity"},y=E(w),x={Thin:100,ExtraLight:200,Light:300,Normal:400,Medium:500,SemiBold:600,Bold:700,ExtraBold:800,Black:900},_=(E(x),{100:"Thin",200:"ExtraLight",300:"Light",400:"Normal",500:"Medium",600:"Semibold",700:"Bold",800:"ExtraBold",900:"Black"}),k=_,C={Layer:0,Group:1,Page:2,Artboard:3,Shape:4,Image:5,ShapePath:6,Text:7,SymbolMaster:8,SymbolInstance:9,HotSpot:10,Slice:11,StyledLayer:12},S={Rectangle:0,Oval:1,Triangle:2,Polygon:3,Star:4,Custom:5},A={left:0,right:1,center:2,justify:3};function E(t){var e={};return Object.keys(t).forEach((function(r){e[t[r]]=r})),e}var N=E(A),P={top:0,center:1,bottom:2},T=E(P),M={Color:0,Gradient:1,Pattern:4},I=(E(M),{Linear:0,Radial:1,Angular:2}),O={None:0,FillColor:1,LinearGradientFill:2,ImageFill:3,RadialGradientFill:4,AngularGradientFill:5},L={Transparent:0,White:1,Black:2},D={Gaussian:0,Motion:1,Zoom:2,Background:3},R=r("d4ec"),F=r("bee2"),B=r("ade3"),z="function"===typeof createImageBitmap,W="function"===typeof Image,$=function(){function t(){Object(R["a"])(this,t),Object(B["a"])(this,"queue",[]),Object(B["a"])(this,"runningCount",0),Object(B["a"])(this,"runningMax",10),Object(B["a"])(this,"_paused",!1)}return Object(F["a"])(t,[{key:"canNext",get:function(){return!this.paused&&(this.runningCount<this.runningMax&&this.queue.length>0)}},{key:"paused",get:function(){return this._paused},set:function(t){if(this._paused=!!t,!this._paused)for(var e=0;e<this.runningMax-this.runningCount;e++)this.run()}},{key:"run",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,n,i,a,o,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.canNext){t.next=2;break}return t.abrupt("return");case 2:if(e=this.queue.splice(0,1)[0],e){t.next=5;break}return t.abrupt("return");case 5:if(0!==e.list.length){t.next=8;break}return this.run(),t.abrupt("return");case 8:if(this.runningCount++,r=function(t){s.runningCount--;var r=e.list;r&&0!==r.length&&(r.forEach((function(e){try{e.callback(t,e.state)}catch(r){}})),s.run())},t.prev=10,!W){t.next=18;break}n=new Image,n.onerror=function(){r(null)},n.onload=function(t){r(t.target)},n.src=e.src,t.next=33;break;case 18:if(!z){t.next=32;break}return t.next=21,fetch(e.src);case 21:return i=t.sent,t.next=24,i.blob();case 24:return a=t.sent,t.next=27,createImageBitmap(a);case 27:o=t.sent,a=null,r(o),t.next=33;break;case 32:r(null);case 33:t.next=38;break;case 35:t.prev=35,t.t0=t["catch"](10),r(null);case 38:case"end":return t.stop()}}),t,this,[[10,35]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"add",value:function(t,e,r){if(!t)return e(null,r);var n=this._get(t);if(!n)return n={src:t,list:[{callback:e,state:r}]},this.queue.push(n),void this.run();var i=n.list.findIndex((function(t){return e===t.callback&&t.state===r}));-1===i&&(n.list.push({callback:e,state:r}),this.run())}},{key:"remove",value:function(t,e,r){if(t){var n=this._get(t);if(n){var i=n.list.findIndex((function(t){return e===t.callback&&t.state===r}));-1!==i&&n.list.splice(i,1)}}}},{key:"_get",value:function(t){return this.queue.find((function(e){return e.src===t}))}},{key:"clean",value:function(){this.runningCount=0,this.queue.splice(0)}}]),t}(),U=(r("b16b"),function(){function t(e,r){Object(R["a"])(this,t),Object(B["a"])(this,"start",0),Object(B["a"])(this,"end",0),null!=e&&null!=r&&(this.start=Math.min(e,r),this.end=Math.max(e,r))}return Object(F["a"])(t,[{key:"length",get:function(){return this.end-this.start}}]),t}()),j=function(t,e){return t.start<=e.start&&t.end>=e.end},V=function(t,e){var r,n;return t.start<=e.start?(r=t,n=e):(r=e,n=t),n.start>=r.start&&n.start<=r.end},G=function(t,e){var r=e.x,n=r+e.width,i=t.x,a=i+t.width,o=e.y,s=o+e.height,c=t.y,l=c+t.height;return!(n<i||n>a)&&(!(r<i||r>a)&&(!(s<c||s>l)&&!(o<c||o>l)))},H=function(){function t(){Object(R["a"])(this,t),Object(B["a"])(this,"width",0),Object(B["a"])(this,"height",0);var e=0,r=0;Object.defineProperty(this,"x",{get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"y",{get:function(){return r},set:function(t){r=t}})}return Object(F["a"])(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}},{key:"set",value:function(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this}},{key:"isSame",value:function(t){return null!=t&&(t.x===this.x&&(t.y===this.y&&(t.width===this.width&&t.height===this.height)))}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}]),t}();function Y(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}var X=function(t,e){var r,n,i=5;return r=Y(t.x,i),n=Y(e.x,i),r===n&&(r=Y(t.y,i),n=Y(e.y,i),r===n&&(r=Y(t.width,i),n=Y(e.width,i),r===n&&(r=Y(t.height,i),n=Y(e.height,i),r===n)))},K=function(t,e){var r=new H;return r.x=Math.min(t.x,e.x),r.y=Math.min(t.y,e.y),r.width=Math.max(t.right,e.right)-r.x,r.height=Math.max(t.bottom,e.bottom)-r.y,r},Z=function(t,e){for(var r=t.length,n=[],i=0;i<r;i++)for(var a=t[i],o=i+1;o<r;o++){var s=t[o];a!==s&&function(){var t=new U(a,s),r=e.find((function(e){return j(t,e)}));r||n.push(t)}()}return n},q=0,J=function(t,e,r,n,i,a){var o,s,c,l,u,d;return r?(o="x",s="right",c="width",l="y",u="bottom",d="height"):(o="y",s="bottom",c="height",l="x",u="right",d="width"),e.forEach((function(e){var h,f,p,m,v={start:n[l],end:n[u],length:n[d]},b={start:i[l],end:i[u],length:i[d]};if(V(v,b))h=Math.max(v.start,b.start),f=Math.min(v.end,b.end);else{var g={start:n[o],end:n[s],length:n[c]};V(e,g)?(h=b.start,f=b.end,m=n):(h=v.start,f=v.end,m=i)}var w=h+(f-h)/2,y=new H,x=a(Math.round(100*e.length)/100);if(r?(y.height=1,y.width=e.length,y.x=e.start,y.y=w):(y.height=e.length,y.width=1,y.x=w,y.y=e.start),t.push({rect:y,text:x,isHorizintal:r,id:++q}),null!=m){if(p=new H,r){p.width=1;var _,k=Math.min(Math.abs(y.y-m.y),Math.abs(y.y-m.bottom)),C={};[m.x,m.right,y.x,y.right].forEach((function(t){C[t]&&(_=t),C[t]=1})),p.x=_,p.y=y.y>m.y?y.y-k:y.y,p.height=k}else{p.height=1;var S,A=Math.min(Math.abs(y.x-m.x),Math.abs(y.x-m.right)),E={};[m.y,m.bottom,y.y,y.bottom].forEach((function(t){E[t]&&(S=t),E[t]=1})),p.y=S,p.x=y.x>m.x?y.x-A:y.x,p.width=A}t.push({rect:p,isHorizintal:!r,isDashed:!0,id:++q})}})),t},Q=function(t,e,r,n){t.right>r.width&&(t.width=r.width-t.x),t.bottom>r.height&&(t.height=r.height-t.y),e.right>r.width&&(e.width=r.width-e.x),e.bottom>r.height&&(e.height=r.height-e.y),t.width=Math.max(t.width,.001),t.height=Math.max(t.height,.001),e.width=Math.max(e.width,.001),e.height=Math.max(e.height,.001);var i=K(t,e),a=s([i.x,i.right,t.x,t.right,e.x,e.right]),o=s([i.y,i.bottom,t.y,t.bottom,e.y,e.bottom]),c=[new U(t.x,t.right),new U(e.x,e.right)],l=[new U(t.y,t.bottom),new U(e.y,e.bottom)],u=Z(a,c),d=Z(o,l),h=[];return J(h,u,!0,t,e,n),J(h,d,!1,t,e,n),h},tt=function(t,e){var r=e.x,n=e.x+e.width,i=e.y,a=e.y+e.height,o=t.x,s=t.x+t.width,c=t.y,l=t.y+t.height,u=n<o||r>s||a<c||i>l;return!u},et=function(t,e){if(tt(t,e)){var r=new H,n=Math.max(t.x,e.x),i=Math.max(t.y,e.y),a=Math.min(t.x+t.width,e.x+e.width),o=Math.min(t.y+t.height,e.y+e.height),s=a-n,c=o-i;if(!(s<0||c<0))return r.set(n,i,s,c),r}};function rt(t,e,r){return null==t||1===e?t:(t*=e,t=Math.round(100*t)/100,r?Math.ceil(t):t)}var nt=o?"https://local.user.marklion.net/":"https://user.marklion.net/",it=o?"http://192.168.1.148:8090":"",at=window.JSZip,ot={Success:0,NotLogin:1,Err:2,ArgumentErr:3,VCode:4,NotEmailChecked:5},st=function(t){return new Promise((function(e){setTimeout((function(){e()}),t||0)}))},ct={documentName:"",documentGuid:"",config:null,inCloudMode:!1,cloudFolderId:0,initTitle:"",fileType:g.XD,cloudVersion:"",docsMinScale:{}},lt=new $;o&&(window.listImageLoader=lt,window.globalData=ct);var ut=function(t){var e=Ut("unittemplate.".concat(t),!0);return u(e)||(e={enable:!1,template:"rem(%num%)"}),e.fromInited=!0,e.guid=t,e},dt=function(t,e){var r=Ut("platform.".concat(t),!0);return u(r)||(r={},r.type=e),r.fromInited=!0,r.guid=t,r},ht=function(){var t=navigator.platform;return"Mac68K"==t||"MacPPC"==t||"Macintosh"==t||"MacIntel"==t||"MacAmd"==t||"iPhone"==t||"iPad"==t}(),ft=function(t,e){return t.localeCompare(e,["zh"],{numeric:!0})},pt=function(t){return 1==t?"":"@".concat(t,"x")};window.JSZip=null;try{delete window.JSZip}catch(Vc){}var mt=function(t){if(null==t)return 0;try{return t.replace(/[^\u0020-\u00ff]/g,"aa").length}catch(e){return 0}},vt=function(t){var e=mt(t);return!!(e>=5&&e<=20&&/^[a-zA-Z\u4e00-\u9fa5][\w\u4e00-\u9fa5-]{1,19}$/.test(t))};function bt(t){var e=t[t.length-1];if(e){var r=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;t.forEach((function(t){var e=t.artboard.boundsInParent||t.artboard.frame;r=Math.min(e.x,r),n=Math.min(e.y,n),i=Math.max(e.x+e.width,i),a=Math.max(e.y+e.height,a)}));var o=new H;return o.x=r,o.y=n,o.width=i-r,o.height=a-n,o}}function gt(t,e){var r=t.x,n=t.y,i=e.x,a=e.y;if(r===i)return n>=a?270:90;if(n===a)return r>=i?0:180;var o=180*Math.atan2(a-n,i-r)/Math.PI;return o=Math.round(100*(180-o))/100,360===o&&(o=0),o}function wt(t,e,r){if(!t)return e+r;var n=t.mlConfig.linked;if(!u(n))return e+r;var i=n[r.toLowerCase()];return i?ct.inCloudMode?(o&&(i=it+i),i):e+i:e+r}var yt={NONE:0,PNG:1,SVG:2,WEBP:4},xt=function(t){if(!u(t))return!1;var e,r=t.mlConfig;return e=u(r)&&null!=r.resType?r.resType:yt.PNG,(e&yt.PNG)===yt.PNG},_t=function(t){if(!u(t))return!1;var e=t.mlConfig;return!!u(e)&&(e.resType&yt.WEBP)===yt.WEBP},kt=function(t){if(!u(t))return!1;var e=t.mlConfig;return!!u(e)&&(e.resType&yt.SVG)===yt.SVG},Ct={WEB:0,ANDROID:1,IOS:2,CUSTOM:3},St={PX:0,DP:1,PT:2},At="file:"===location.protocol;function Et(t,e){var r,n;"string"===typeof e?r=e:(r=URL.createObjectURL(e),n=!0);var i=document.createElement("a");i.href=r,i.style.cssText+="width:0!important;height:0!important;overflow:hidden!important;position: absolute!important;opacity:0!important;top:0!important;left:0!important;",i.download=t,i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i),i=null,n&&URL.revokeObjectURL(r),r=null}function Nt(t,e,r){return Pt.apply(this,arguments)}function Pt(){return Pt=Object(i["a"])(regeneratorRuntime.mark((function t(e,r,n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Mt(r,n);case 2:return i=t.sent,"string"===typeof i&&(i="data:application/octet-stream;base64,"+i),Et(e,i),t.abrupt("return","success");case 6:case"end":return t.stop()}}),t)}))),Pt.apply(this,arguments)}function Tt(t){if(At&&!t.mlConfig.supportFileProtocol)throw"画板(".concat(t.name,")导出时[选择导出包支持范围]选择了[精简版];需要部署到HTTP服务上才支持下载切图,请自行前往res目录拷贝切图");return!0}function Mt(t,e){return It.apply(this,arguments)}function It(){return It=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!At){t.next=4;break}return t.next=3,Dt(r);case 3:return t.abrupt("return",t.sent);case 4:return n={},ct.inCloudMode&&(n.cache="reload"),t.next=8,fetch(e,n);case 8:return i=t.sent,t.next=11,i.blob();case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)}))),It.apply(this,arguments)}var Ot={},Lt=1;function Dt(t){return new Promise((function(e,r){var n=document.createElement("script"),i=function(t){t&&null!=t.parentNode&&setTimeout((function(){t&&null!=t.parentNode&&(t.parentNode.removeChild(t),t=null)}),200)};n._marklionBack=function(t,a){n._marklionBack=null,n._marklionCallId=null,t?e(a):r(a),i(n),n=null},n.addEventListener("error",(function(e){var r=e.target._marklionBack;r&&r(!1,"资源加载失败[".concat(t,"]"))})),n.addEventListener("load",(function(t){i(t.target)}));var a="marklion_".concat(Date.now(),"_").concat(Lt++);n._marklionCallId=a,n.src=t+"?marklion_res_id="+a,Ot[a]=n._marklionBack,document.body.appendChild(n)}))}window.marklion_res=function(t,e){if(null!=t){var r=t._marklionBack,n=t._marklionCallId;r&&n&&(t._marklionBack=null,t._marklionCallId=null,Ot[n]=null,r(!0,e))}},window.addEventListener("error",(function(t){var e=t.filename;if(e){var r=e.match(/marklion_res_id=(\w+)/);if(r&&(r=r[1],r)){e=e.replace(/\\/g,"/");var n=e.indexOf("/res/");-1!==n&&(e=e.substr(n+1)),n=e.indexOf("?"),-1!==n&&(e=e.substr(0,n)),e=decodeURIComponent(e);var i=Ot[r];i&&i(!1,"资源加载失败[".concat(e,"]"))}}}),!0);var Rt=function(t){if(!t)return null;var e=t.mlCustomName;return e||(e=t.name),e},Ft=function(t,e,r){var n=r?".webp":".png";return 1===t||"1"===t?e+n:"".concat(e,"@").concat(t,"x").concat(n)},Bt=/[\s\\/$:*?"'<>|\0]/g,zt=function(t){if(l(t)){t=t.replace(Bt,(function(t){return" "===t?t:""})).trim();var e=50;return t.length>e&&(t=t.substr(0,e)),t}return null},Wt=function(t){var e="/viewer/".concat(t,"/");o?console.log(e):window.location.href=e},$t=function(t,e,r){if(u(e)&&e.markedForExport){var n=e.guid;if(n){var i="".concat(ct.documentGuid,"_").concat(n);if(r=zt(r),e.mlCustomName!==r){if(l(r)&&r!==e.name)return t.$set(e,"mlCustomName",r),void jt(i,r);t.$set(e,"mlCustomName",null),Vt(i)}}}},Ut=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r=localStorage.getItem("marklion."+t);if(!l(r))return r;if(!e)return r;try{r=JSON.parse(r)}catch(n){}return r}catch(i){return null}},jt=function(t,e){try{"string"!==typeof e&&(e=JSON.stringify(e)),localStorage.setItem("marklion."+t,e)}catch(Vc){}},Vt=function(t){try{return localStorage.removeItem("marklion."+t)}catch(Vc){}},Gt=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r=sessionStorage.getItem("marklion."+t);if(!l(r))return r;if(!e)return r;try{r=JSON.parse(r)}catch(n){}return r}catch(i){return null}},Ht=function(t,e){try{"string"!==typeof e&&(e=JSON.stringify(e)),sessionStorage.setItem("marklion."+t,e)}catch(Vc){}},Yt={NORMAL:"normal",PASSTHROUGH:"pass-through",MULTIPLY:"multiply",DARKEN:"darken",COLOR_BURN:"color-burn",LIGHTEN:"lighten",SCREEN:"screen",COLOR_DODGE:"color-dodge",OVERLAY:"overlay",SOFT_LIGHT:"soft-light",HARD_LIGHT:"hard-light",DIFFERENCE:"difference",EXCLUSION:"exclusion",HUE:"hue",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"};function Xt(t){try{if(document.execCommand){var e=document.createElement("textarea");e.style.cssText="position:absolute;left-1000px;top:-1000px;width:50px;height:10px;background:none;border:none;opacity:0.5;",e.value=t,document.body.appendChild(e),e.select();var r=document.execCommand("copy");return e.parentNode.removeChild(e),r}if(window.clipboardData)return window.clipboardData.setData("Text",t),!0}catch(Vc){return!1}return!1}function Kt(t){try{if(document.execCommand)return document.execCommand("copy");if(window.clipboardData)return window.clipboardData.setData("Text",t),!0}catch(Vc){return!1}return!1}var Zt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=10*e;return Math.round(t*r)/r},qt=function(t,e){return"number"===typeof t?t:e},Jt=function(t){var e;while(t){var r=t.types;if(1===r.Group)if(t.fillEnabled)if(t.fill){var n=t.fill.value;null!=n&&(e=n),t=t.parentNode}else t=t.parentNode;else t=t.parentNode;else t=t.parentNode}if(e)return d(e)},Qt=function(t,e){if(null==t)return e;if(null==e)return e;var r=d(e),n=Math.round(r.a*t.a/255);return f(t.r,t.g,t.b,n)},te={NOT_APP:-1,NOT_LOGIN:0,LOGINED:1},ee=function(){return new Promise((function(t){var e,r=!1,n=function(){clearTimeout(e),r||(r=!0,t(te.NOT_APP))};fetch("http://127.0.0.1:23456/appstate.marklion",{method:"get"}).then((function(r){r.text().then((function(r){switch(clearTimeout(e),r){case"1":return t(te.LOGINED);case"0":return t(te.NOT_LOGIN);default:return t(te.NOT_APP)}})).catch(n)})).catch(n),e=setTimeout((function(){t(te.NOT_APP)}),500)}))};o&&(window.getMarkLionUserState=ee);var re=function(t){if(void 0!=t){if(null===t)return null;var e=Object(n["a"])(t);switch(e){case"string":var r;try{r=JSON.parse(t)}catch(i){r=t}return r;default:return t}}};function ne(t){for(var e=atob(t),r=e.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=e.charCodeAt(i);return n}var ie=function(){return window.devicePixelRatio||1};function ae(t,e,r,n){var i,a=e.overrides.find((function(t){if(t.style){var e=t.style[r];return null!=e?t:void 0}}));return a&&(i=a.style[r],null!=i)||t&&(i=t[r],null!=i)?i:n}function oe(t){if(t&&t.type!==C.Artboard){var e=t.layers;if(!e)return t.type===C.ShapePath;var r=0,n=[];if(e.forEach((function(t,e){if(t)switch(t.type){case C.ShapePath:return void(t.markedForExport||r++);case C.Group:return void(oe(t)&&(r++,n.push(e)))}})),r===e.length){r>=7&&(t.layers=[]);for(var i=n.length-1;i>=0;i--){var a=n[i];e.splice(a,1)}return!0}return t.type===C.ShapePath}}var se=["topLeft","topRight","bottomRight","bottomLeft"];function ce(t){if(t){var e;switch(t.fillType){case M.Color:var r=t.color;r&&(e={value:h(t.color)});break;case M.Gradient:var n=t.gradient;if(n)switch(n.gradientType){case I.Linear:var i=n.from,a=n.to,o=n.stops;if(i&&a&&o){var s=[];e={endPoints:[i.x,i.y,a.x,a.y],colorStops:s},o.forEach((function(t){s.push({stop:t.position,color:{value:h(t.color)}})}))}break;case I.Radial:0===n.aspectRatio&&(n.aspectRatio=1);var c=n.from,l=n.to,u=n.stops;if(c&&l&&u){var d=[];e={endPoints:[c.x,c.y,l.x,l.y],colorStops:d},u.forEach((function(t){d.push({stop:t.position,color:{value:h(t.color)}})}))}break;case I.Angular:var f=n.from,p=n.to,m=n.stops;if(f&&p&&m){var v=[];e={endPoints:[f.x,f.y,p.x,p.y],colorStops:v},m.forEach((function(t){v.push({stop:t.position,color:{value:h(t.color)}})}))}break}break;case M.Pattern:e={assetId:"sketch"};break}return e}}function le(t,e){var r=e.background;if(r&&r.enabled&&r.color&&r.includedInInstance)return!1;var n=e.frame,i=t.frame;if(n.width!==i.width)return!1;if(n.height!==i.height)return!1;var a=e.style;if(!a)return!0;var o=a.opacity;return null==o||o>=1}function ue(t,e){var r=e.nodeSharedStyles={overrides:[],share:null},n=t.sharedStyles;if(n){var i=e.overrideSharedStyleIds;if(i&&i.forEach((function(t){var e=n[t];e&&r.overrides.push(e)})),e.sharedStyleId){var a=n[e.sharedStyleId];a&&(r.share=a)}}}function de(t){var e=t.boxTransform={rotation:0,flippedHorizontally:!1,flippedVertically:!1},r=t.transform;if(u(r)&&(null!=r.rotation&&(e.rotation=r.rotation),r.flippedHorizontally&&(e.flippedHorizontally=!0),r.flippedVertically&&(e.flippedVertically=!0)),90===e.rotation||-90===e.rotation||270===e.rotation){var n=t.frame,i=n.x,a=n.y,o=n.width,s=n.height;if(o===s)return;t._sketchRealStyle={rotation:e.rotation,x:i,y:a,width:o,height:s},t.markedForExport&&(e.rotation=0);var c=(o-s)/2,l=-c;t.frame={x:i+c,y:a+l,width:s,height:o}}}function he(t,e,r){if(!e.markedForExport){var n=t.frame;n={x:0,y:0,width:n.width,height:n.height};var i=e.frame,a=r.globalBounds.x-t.globalBounds.x,o=r.globalBounds.y-t.globalBounds.y,s={x:a+i.x,y:o+i.y,width:i.width,height:i.height};n=et(n,s),n||(n={x:0,y:0,width:0,height:0});var c={width:n.width,height:n.height,x:n.x-a,y:n.y-o};if(!X(c,i)){e.frame=c;var l=e.frame.x-i.x,u=e.frame.y-i.y;e._sketchFixedFrame=1,0===l&&0===u||e.layers&&e.layers.forEach((function(t){t.frame.x-=l,t.frame.y-=u}))}}}function fe(t,e,r){if(r){if(he(t,e,r),r._sketchFixedFrame&&!e.markedForExport){var n={x:0,y:0,width:r.frame.width,height:r.frame.height};pe(n,e)}if(e.hasClippingMask){var i=r.layers;if(i)for(var a=!1,o=e.frame,s=0,c=i.length;s<c;s++){var l=i[s];if(l!==e){if(a&&!l.markedForExport){if(l.hasClippingMask)break;if(l.shouldBreakMaskChain)break;pe(o,l)}}else a=!0}}}}function pe(t,e){var r=e.frame,n=r.x,i=r.y,a=et(t,e.frame);if(a||(a={x:0,y:0,width:0,height:0}),!X(a,e.frame)){var o=a.x-n,s=a.y-i;e.frame=a,e._sketchFixedFrame=1,0===o&&0===s||e.layers&&e.layers.forEach((function(t){var e=t.frame;e.x-=o,e.y-=s}))}}var me=[100,100,100,200,300,400,500,500,600,700,800,900,900,900,900,900];function ve(t,e,r){e.boundsInParent=e.frame,e.guid=e.id,e.visible=!e.hidden,e.children=e.layers,de(e),ue(t,e);var n=e.nodeSharedStyles,i=e.style;e.opacity=ae(i,n,"opacity",1);var a=Yt[y[ae(i,n,"blendingMode",w.NORMAL)]];a&&(e.blendMode=a);var o=ae(i,n,"blur",null);if(null!=o)switch(o.blurType){case D.Gaussian:e.blur={isBackgroundEffect:!1,visible:!0,blurAmount:o.radius};break}var s=ae(i,n,"borders",null);s&&s.length>0&&(e.strokeArr=[],s.forEach((function(t){var r=ce(t);if(r){var a={strokeEnabled:!0,stroke:r,strokeWidth:t.thickness,strokePosition:t.position},o=ae(i,n,"borderOptions",null);if(o&&(a.strokeDashArray=o.dashPattern),0===e.strokeArr.length)for(var s in a)e[s]=a[s];e.strokeArr.push(a)}})));var l=ae(i,n,"shadows",null);l&&l.length>0&&(e.shadowArr=[],l.forEach((function(t){if(t){var r={visible:!0,x:t.x,y:t.y,blur:t.blur,spread:t.spread,color:{value:h(t.color)}};0===e.shadowArr.length&&(e.shadow=r),e.shadowArr.push(r)}})));var u=ae(i,n,"innerShadows",null);if(u&&u.length>0&&(e.innerShadowArr=[],u.forEach((function(t){if(t){var r={visible:!0,x:t.x,y:t.y,blur:t.blur,spread:t.spread,color:{value:h(t.color)}};0===e.innerShadowArr.length&&(e.innerShadow=r),e.innerShadowArr.push(r)}}))),e.type!==C.SymbolMaster&&e.type!==C.Artboard){var d=ae(i,n,"fills",null);c(d)&&(e.fillArr=[],d.forEach((function(t){t&&(t=ce(t),0===e.fillArr.length&&(e.fillEnabled=!0,e.fill=t),e.fillArr.push({fillEnabled:!0,fill:t}))})))}if(fe(t,e,r),t===e||null==r)e.globalBounds=e.globalDrawBounds=e.frame;else{var f=r.globalBounds,p=e.frame;e.globalBounds=e.globalDrawBounds={x:f.x+p.x,y:f.y+p.y,width:p.width,height:p.height}}if(!e.types)switch(e.types={GraphicNode:1},e.type){case C.SymbolInstance:e.types.SymbolInstance=1;break;case C.Artboard:e.types.Artboard=1;var m=e.background;m&&m.enabled&&m.color&&(e.fillEnabled=!0,e.fill={value:h(m.color)});break;case C.Group:e.types.Group=1;break;case C.Text:e.types.Text=1,e.paragraphSpacing=ae(i,n,"paragraphSpacing",0),e.lineSpacing=ae(i,n,"lineHeight",0);var v=ae(i,n,"alignment",A.left);e.textAlign=N[v],null==e.textAlign&&(e.textAlign=v);var b=ae(i,n,"verticalAlignment",P.top);b!==P.top&&(e.textVerticalAlign=T[b]);var g={fill:{},charSpacing:ae(i,n,"kerning",null),fontFamily:ae(i,n,"fontFamily",""),fontWeight:me[ae(i,n,"fontWeight",4)],fontItalic:ae(i,n,"fontStyle",""),fontSize:ae(i,n,"fontSize",""),underline:!!ae(i,n,"textUnderline",""),strikethrough:!!ae(i,n,"textStrikethrough","")};null==g.fontWeight&&(g.fontWeight=400),g.fontWeightCss=g.fontWeight.toString(),g.fontStyle=g.fontWeight.toString(),g.fontItalic?g.fontStyle+=" "+g.fontItalic:g.fontItalic="normal",e.styleRanges=[g];var x=ae(i,n,"textColor","");x&&(g.fill.value=h(x));break;case C.ShapePath:switch(e.types.Rectangle=1,e.shapeType){case S.Rectangle:var _=e.points,k=null;c(_)&&_.length>0&&(k={topLeft:0,topRight:0,bottomRight:0,bottomLeft:0},_.forEach((function(t,e){t&&(k[se[e]]=t.cornerRadius)}))),e.cornerRadii=k;break;default:break}break}}window.addEventListener("error",(function(t){var e=t.filename;if(e){var r=e.match(/marklion_artboard_id=(\w+)/);if(r&&(r=r[1],r)){e=e.replace(/\\/g,"/");var n=e.indexOf("/res/");-1!==n&&(e=e.substr(n+1)),n=e.indexOf("?"),-1!==n&&(e=e.substr(0,n)),e=decodeURIComponent(e);var i=be[r];i&&i(!1,"画板数据加载失败[".concat(e,"]"))}}}),!0),window.marklion_artboard=function(t,e){var r=null,n=null;if(arguments.length>2&&(r=arguments[0],t=arguments[1],e=arguments[2],arguments.length>3&&(n=arguments[3])),null!=t){var i=t._marklionBack,a=t._marklionCallId;if(i&&a){if(t._marklionBack=null,t._marklionCallId=null,be[a]=null,c(r)){var o=r;r={},o.forEach((function(t){if(u(t)){var e=t.name;l(e)&&(r[e.toLowerCase()]=t.value)}}))}else if(u(r)){var s=r;r={},Object.keys(s).forEach((function(t){r[t.toLowerCase()]=s[t]}))}i(!0,{artboard:e,linked:r,sizeMap:n})}}};var be={},ge=1;function we(t){return new Promise((function(e,r){var n=document.createElement("script"),i=function(t){t&&null!=t.parentNode&&setTimeout((function(){t&&null!=t.parentNode&&(t.parentNode.removeChild(t),t=null)}),200)};n._marklionBack=function(t,a){n._marklionBack=null,n._marklionCallId=null,t?e(a):r(a),i(n),n=null},n.addEventListener("error",(function(e){var r=e.target._marklionBack;r&&r(!1,"画板数据加载失败[".concat(t,"]"))})),n.addEventListener("load",(function(t){i(t.target)}));var a="marklion_".concat(Date.now(),"_").concat(ge++);n._marklionCallId=a,n.src=t+"?marklion_artboard_id="+a,be[a]=n._marklionBack,document.body.appendChild(n)}))}function ye(t,e,r,n){if(void 0===t.markedForExport&&(t.markedForExport=!1),null==t.mlOutputTime&&(t.mlOutputTime=Date.now()),ct.inCloudMode&&o&&(t.pathData=it+t.pathData,t.pathPreview=it+t.pathPreview,t.pathPreviewWebp&&(t.pathPreviewWebp=it+t.pathPreviewWebp),t.pathPreviewMini=it+t.pathPreviewMini),r){var i=r.boundsInParent||r.frame,a=t.boundsInParent||t.frame;i&&a&&(ct.inCloudMode?(a.x=i.x,a.y=i.y,a.width=i.width,a.height=i.height):(a.x=i.x,a.y=i.y)),t.pageGuid||(t.pageGuid=r.pageGuid),t.scale=r.scale,t.resNodeCount=r.resNodeCount,t.pathData=r.pathData,t.pathPreview=r.pathPreview,t.pathPreviewWebp=r.pathPreviewWebp,t.pathPreviewMini=r.pathPreviewMini,t.updaterName=r.updaterName,t.updateTimeStr=r.updateTimeStr,t.docGuid=r.docGuid,r.name&&(t.name=r.name)}ct.inCloudMode?(t.artboardPreviewPng=t.pathPreview,t.artboardPreviewWebp=t.pathPreviewWebp,t.artboardPreviewThumbPng=t.pathPreviewMini,t.artboardPreviewJS=null):t.artboardPath&&(t.artboardPath="res/".concat(t.artboardPath),t.artboardPreviewPng=t.artboardPath+"/preview.png",t.artboardPreviewWebp=null,t.artboardPreviewJS=t.artboardPath+"/preview.js",t.artboardPreviewThumbPng=t.artboardPath+"/preview.mini.png");var s=t.mlConfig;s||(s=t.mlConfig={});var l=s.scalesObj={};if(s.linked=e||{},s.sizeMap=n||{},c(s.scales)){s.scales.forEach((function(t){l[t]=1}));var u=null;[2,3,1.5,1,4].forEach((function(t){null==u&&1===l[t]&&(u=t)})),s.previewScalePath=u?1===u?"":"@".concat(u,"x"):""}}var xe=function(t){if(t){var e=t.guid;if(e)if(t.markedForExport){var r="".concat(ct.documentGuid,"_").concat(e),n=Ut(r,!1);t.mlCustomName=zt(n)}else t.mlCustomName=null}};function _e(t,e,r){r.mlUserSelectDown=!1,e.push(r);var n=r.mlConfig;if(n||(n=r.mlConfig={}),xt(t)){var i="".concat(r.exportPath).concat(t.mlConfig.previewScalePath,".png");n.pngPreview=wt(t,"".concat(t.artboardPath,"/png/"),i)}else if(_t(t)){var a="".concat(r.exportPath).concat(t.mlConfig.previewScalePath,".webp");n.pngPreview=wt(t,"".concat(t.artboardPath,"/png/"),a)}else if(kt(t)){var o="".concat(r.exportPath,".svg");n.svgPreview=wt(t,"".concat(t.artboardPath,"/svg/"),o)}}function ke(t){if(t){var e=t;while(null!=(e=e.parentNode))if(e.maskGroup)return e}}function Ce(t,e){if(e!==t&&1!==e.types.Artboard&&!e.markedForExport){var r=ke(e);if(r){var n=r.globalBounds,i=e.globalBounds;if(!G(n,i)){var a=et(n,i);a||(a=new H);var o=i.x-a.x,s=i.y-a.y,c=e.boundsInArtboard,l=e.boundsInParent;c&&(c.x-=o,c.y-=s,c.width=a.width,c.height=a.height),l&&(l.x-=o,l.y-=s,l.width=a.width,l.height=a.height),i.x=a.x,i.y=a.y,i.width=a.width,i.height=a.height}}}}function Se(t,e,r){void 0===e.markedForExport&&(e.markedForExport=!1);var n,i,a=t.mlConfig?t.mlConfig.fileType:null;switch(null==a&&(a=g.XD),a){case g.SKETCH:ve(t,e,r);break;case g.XD:var o=e.styleRanges;c(o)&&o.length>0&&o.forEach((function(t){var e=t.fontStyle;if(l(e)){var r=/(?:\s|^)(thin|hairline|extralight|ultralight|light|regular|book|roman|medium|semibold|demibold|black|heavy|extrabold|ultrabold|bold|bolder|lighter|medium|\d+)(?:\s|$)/i.exec(e);if(r)switch(t.fontWeight=r[1],t.fontWeight.toLowerCase()){case"thin":case"hairline":t.fontWeightCss="100";break;case"ultralight":case"extralight":t.fontWeightCss="200";break;case"light":t.fontWeightCss="300";break;case"regular":case"book":case"roman":case"normal":t.fontWeight="normal",t.fontWeightCss="400";break;case"medium":t.fontWeightCss="500";break;case"semibold":case"demibold":t.fontWeightCss="600";break;case"bold":t.fontWeightCss="700";break;case"extrabold":case"ultrabold":t.fontWeightCss="800";break;case"black":case"heavy":t.fontWeightCss="900";break;default:t.fontWeightCss=t.fontWeight}else t.fontWeight="Normal",t.fontWeightCss="400";r=/(?:\s|^)(italic|oblique)(?:\s|$)/i.exec(e),t.fontItalic=r?r[1].toLowerCase():"normal"}else t.fontWeight="Normal",t.fontWeightCss="400",t.fontItalic="normal"})),Ce(t,e);break}n=t.globalBounds,i=e.markedForExport?e.globalDrawBounds:e.globalBounds;var s=i.x-n.x,u=i.y-n.y,d=i.width,h=i.height;if(ct.inCloudMode){var f=t.mlConfig?t.mlConfig.artScale:1;(null==f||f<=0)&&(f=1),1!==f&&(s=rt(s,f,!1),u=rt(u,f,!1),d=rt(i.width,f,e.markedForExport),h=rt(i.height,f,e.markedForExport))}e.boundsInArtboard=(new H).set(s,u,d,h),e.bounsSameWithArtboard=t!==e&&e.boundsInArtboard.isSame(t.boundsInArtboard)}function Ae(t,e,r,n,i){var a=r.children||r.layers;a.forEach((function(a){if(a)if(a.parentNode=r,Se(t,a,r),xe(a),a.markedForExport){if(_e(t,i,a),e.push(a),n.push(a),c(a.children||a.layers)){var o=[];Ae(t,e,a,o,i),a.children&&(a.children=o),a.layers&&(a.layers=o)}}else c(a.children||a.layers)&&Ae(t,e,a,n,i),a.children=a.layers=null}))}function Ee(t,e,r,n){if(!n.markedForExport){var i=n.opacity;if(0!=i){var a=n.types;if(t){if(!tt(e.boundsInArtboard,n.boundsInArtboard))return n.mlIgnoreEvent=!0,void(n.mlIgnoreLeftSide=!0);if((n.type===C.Group||n.type===C.SymbolMaster)&&le(r,n))return void(n.mlIgnoreEvent=!0);if(1===a.Group&&1==i&&null==n.shadow&&null==n.innerShadow&&(null==n.stroke||!n.strokeEnabled)&&(null==n.fill||!n.fillEnabled||n.fill.value))return void(n.mlIgnoreEvent=!0)}(!n.bounsSameWithArtboard||1!==a.Group&&(1!==a.Path||null!=n.fill&&n.fillEnabled))&&(1!==i||1!==a.Path&&1!==a.Rectangle&&1!==a.RepeatGrid&&(1!==a.Group||n.maskGroup)&&(1!==a.SymbolInstance||n.maskGroup)||null!=n.shadow||null!=n.innerShadow||null!=n.fill&&n.fillEnabled||null!=n.stroke&&n.strokeEnabled)||(n.mlIgnoreEvent=!0)}else n.mlIgnoreEvent=!0}}function Ne(t,e,r,n,i,a){Se(r,t,i),xe(t);var o=t.markedForExport;o&&_e(r,n,t);var s=t.children||t.layers;if(c(s))if(o){var l=[];Ae(r,e,t,l,n),t.children=l}else s.forEach((function(i){i.parentNode=t,e.push(i);try{Ne(i,e,r,n,t,a),Ee(a,r,t,i)}finally{i.mlIgnoreEvent&&!i.mlIgnoreLeftSide&&(i.mlIgnoreLeftSide=!i.children||0===i.children.length)}}))}function Pe(t){var e=0;while(null!=(t=t.parentNode))if(e++,t.types.Artboard)break;return e}var Te=function(t){return new Promise((function(e,r){if(t.isLoaded)return e(t);if(t.isFetching)return r(t);var n=t.artboard,i=n.pathData||n.artboardPath+"/data.js";t.isLoaded=!1,t.isFetching=!0,t.isError=!1,we(i).then((function(r){var i=r.artboard,a=r.linked,o=r.sizeMap,s=i.mlConfig&&i.mlConfig.fileType===g.SKETCH;s&&oe(i),ye(i,a,n,o);var c=[i],l=[];Ne(i,c,i,l,null,s),t.artboard=i,i.nodeDepthIndex=0;var u=[],d=c.length,h=d-1;c.forEach((function(t,e){if(t.nodeDepthIndex=Pe(t),0!==e&&t.markedForExport&&!(e>=h)){for(var r=-1,n=e+1;n<=h;n++){var i=c[n];if(!i)break;if(!i.boundsInArtboard||!i.boundsInArtboard.isSame(t.boundsInArtboard))break;r=n}-1!==r&&u.push({from:e,to:r})}})),u.length>0&&u.forEach((function(t){var e=t.from,r=t.to,n=c[e],i=c[r];c[e]=i,c[r]=n})),t.childs=c,t.exportNodes=l,t.isLoaded=!0,t.isFetching=!1,t.isError=!1,e(t)})).catch((function(e){t.isLoaded=!0,t.isError=!0,t.isFetching=!1,t.loadErrMsg=e,r(t)}))}))},Me=function t(){Object(R["a"])(this,t),Object(B["a"])(this,"X",0),Object(B["a"])(this,"Y",0),Object(B["a"])(this,"Width",0),Object(B["a"])(this,"Height",0),Object(B["a"])(this,"Down",null),Object(B["a"])(this,"Right",null),Object(B["a"])(this,"Used",!1)},Ie=function(){function t(e,r){var n=this;if(Object(R["a"])(this,t),Object(B["a"])(this,"Root",null),Object(B["a"])(this,"Margin",0),this.Margin=r,null!=e){e.sort((function(t,e){return n.compareMaxSide(t,e)}));var i=e.length,a=null,o=null,s=0,c=0,l=2*r;if(!(i>0)){var u=this.Root=new Me;return u.Width=l,u.Height=l,u.X=r,void(u.Y=r)}o=e[0],s=o.rect.width+l,c=o.rect.height+l;var d=this.Root=new Me;d.Width=s,d.Height=c,d.X=r,d.Y=r;for(var h=0;h<i;h++){o=e[h],s=o.rect.width+r,c=o.rect.height+r,a=this.findNode(this.Root,s,c);var f=null;f=null!=a?this.splitNode(a,s,c):this.growNode(s,c),f&&(o.rect.x=f.X-r,o.rect.y=f.Y-r,o.rect.width=f.Width-r,o.rect.height=f.Height-r)}}}return Object(F["a"])(t,[{key:"compareMaxSide",value:function(t,e){var r;return r=this.compareMax_WH(t,e),0!=r?r>0?1:-1:(r=this.compareHeight_Width(t,e),0!=r?r>0?1:-1:1)}},{key:"compareMax_WH",value:function(t,e){var r=Math.max(e.rect.width,e.rect.height)-Math.max(t.rect.width,t.rect.height);return r}},{key:"compareHeight_Width",value:function(t,e){var r=this.compareHeight(t,e);return 0!=r?r>0?1:-1:this.compareWidth(t,e)}},{key:"compareWidth",value:function(t,e){return e.rect.width-t.rect.width}},{key:"compareHeight",value:function(t,e){return e.rect.height-t.rect.height}},{key:"findNode",value:function(t,e,r){if(null==t)return null;if(t.Used){var n=this.findNode(t.Right,e,r);return null!=n?n:this.findNode(t.Down,e,r)}return e<=t.Width&&r<=t.Height?t:null}},{key:"splitNode",value:function(t,e,r){t.Used=!0;var n=t.Right=new Me;n.X=t.X+e,n.Y=t.Y,n.Width=t.Width-e,n.Height=r;var i=t.Down=new Me;return i.X=t.X,i.Y=t.Y+r,i.Width=t.Width,i.Height=t.Height-r,t}},{key:"growNode",value:function(t,e){var r=!1;t<=this.Root.Width&&(r=!0);var n=!1;e<=this.Root.Height&&(n=!0);var i=n&&this.Root.Height>=this.Root.Width+t,a=r&&this.Root.Width>=this.Root.Height+e;return i?this.growRight(t,e):a?this.growDown(t,e):n?this.growRight(t,e):r?this.growDown(t,e):null}},{key:"growRight",value:function(t,e){var r=this.Root,n=this.Root=new Me;n.Used=!0,n.Width=r.Width+t,n.Height=r.Height,n.Y=this.Margin,n.X=this.Margin,n.Down=r;var i=n.Right=new Me;i.X=r.Width,i.Width=t,i.Height=r.Height,i.Y=this.Margin;var a=this.findNode(this.Root,t,e);return null!=a?this.splitNode(a,t,e):null}},{key:"growDown",value:function(t,e){var r=this.Root,n=this.Root=new Me;n.Used=!0,n.Width=r.Width,n.Height=r.Height+e,n.Y=this.Margin,n.X=this.Margin,this.Root.Right=r;var i=this.Root.Down=new Me;i.Y=r.Height,i.Width=r.Width,i.Height=e,i.X=this.Margin;var a=this.findNode(this.Root,t,e);return null!=a?this.splitNode(a,t,e):null}}]),t}(),Oe={count:0,loaded:0,resolve:null,initdata:[],artboards:null,defaultArtboardGuid:"",permission:!0,folderNotFound:!1,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudName:null,cloudKey:null,cloudVersion:null};function Le(t){if(Oe.loaded+=1,t&&t({current:Oe.loaded,count:Oe.count}),Oe.loaded>=Oe.count){var e=Oe.resolve;e&&(Oe.resolve=null,Re(),e())}}function De(t){var e=t.pageGuid||t.docGuid||"",r=ct.docsMinScale[e];null==r&&(r=1);var n=t.boundsInParent;n&&1!==r&&r>0&&(n.x=Math.round(n.x*r),n.y=Math.round(n.y*r),n.width=Math.ceil(n.width*r),n.height=Math.ceil(n.height*r))}function Re(){var t=function(t,e){var r=t.artboard,n=e.artboard,i=r.boundsInParent||r.frame,a=n.boundsInParent||n.frame,o=i.y,s=a.y,c=Math.round(o/100),l=Math.round(s/100),u=c-l;if(u>0)return 1;if(u<0)return-1;var d=i.x,h=a.x,f=d-h;if(r.updateTimeTimes>0&&n.updateTimeTimes>0&&Math.abs(f)<30){var p=r.updateTimeTimes-n.updateTimeTimes;if(p>0)return 1;if(p<0)return-1}return f>0?1:-1},e=Be.documents;if(ct.inCloudMode){var r={};if(Oe.initdata.forEach((function(t){var n=t.artboard,i=n.pageGuid||"",a=i||n.docGuid||"";De(n);var o=r[a];o||(o=r[a]=[],e.push({arts:o,docGuid:a})),o.push(t)})),r=null,e.length>1)return e.forEach((function(e){e.arts.sort(t),e.maxRect=bt(e.arts),e.rect=(new H).set(0,0,e.maxRect.width,e.maxRect.height)})),void new Ie(e,150)}else if(ct.fileType==g.SKETCH){var n={};if(Oe.initdata.forEach((function(t){var r=t.artboard,i=r.pageGuid||"",a=n[i];a||(a=n[i]=[],e.push({arts:a,docGuid:i})),a.push(t)})),n=null,e.length>1)return e.forEach((function(e){e.arts.sort(t),e.maxRect=bt(e.arts),e.rect=(new H).set(0,0,e.maxRect.width,e.maxRect.height)})),void new Ie(e,150)}e.splice(0,e.length),Oe.initdata.sort(t);var i={arts:Oe.initdata,docGuid:""};i.arts.sort(t),i.maxRect=bt(i.arts),i.rect=(new H).set(0,0,i.maxRect.width,i.maxRect.height),e.push(i)}function Fe(){var t=window.__marklionData;window.__marklionData=null,u(t)||(t={artboards:[],guid:"No Data",name:"No Data"}),null==t.fileType&&(t.fileType=g.XD);var e,r=t.cloudData;if(ct.inCloudMode=u(r),ct.fileType=t.fileType,ct.inCloudMode)ct.documentGuid=r.folderId.toString(),ct.documentName=r.folderName,ct.config={guid:ct.documentGuid,scales:[1,1.5,2,3,4],compressPNG:!0,supportFileProtocol:!0,platform:0},Oe.defaultArtboardGuid=r.artboardGuid,Oe.parentFolder=r.parent,Oe.currentFolderId=r.folderId,ct.cloudFolderId=r.folderId,Oe.permission=r.permission,Oe.folderNotFound=r.folderNotFound,Oe.cloudNeedLogin=r.needLogin,Oe.cloudIsLogin=r.isLogin,Oe.cloudNickName=r.nickName,Oe.cloudUserEmail=r.email,Oe.cloudName=r.cloudName,Oe.cloudKey=r.cloudKey,Oe.cloudVersion=r.cloudVersion,u(r.folderInfo)&&(e=r.folderInfo.artboards,Oe.subFolders=r.folderInfo.folders);else switch(ct.documentGuid=t.guid,ct.documentName=t.name,ct.config=t.config,t.fileType){case g.SKETCH:var n=t.pages;e=[],c(n)&&n.forEach((function(t){t&&c(t.artboards)&&t.artboards.forEach((function(r){r&&(r.pageGuid=t.guid,r.pageName=t.name,e.push(r))}))}));break;default:e=t.artboards;break}c(Oe.subFolders)?Oe.subFolders.sort((function(t,e){return ft(t.name,e.name)})):Oe.subFolders=[],c(e)||(e=[]),Oe.artboards=e,Oe.count=e.length}Fe();var Be={inCloudMode:ct.inCloudMode,documentName:ct.documentName,documentGuid:ct.documentGuid,config:ct.config,permission:Oe.permission,cloudNeedLogin:Oe.cloudNeedLogin,cloudIsLogin:Oe.cloudIsLogin,cloudNickName:Oe.cloudNickName,cloudUserEmail:Oe.cloudUserEmail,cloudName:Oe.cloudName,cloudKey:Oe.cloudKey,cloudVersion:Oe.cloudVersion,documentArtboards:Oe.initdata,documents:[],cloud:{folderNotFound:Oe.folderNotFound,defaultArtboardGuid:Oe.defaultArtboardGuid,parentFolder:Oe.parentFolder,currentFolderId:Oe.currentFolderId,subFolders:Oe.subFolders},allArtboardLoadChecked:function(t){return new Promise((function(e){0!==Oe.count?(Oe.resolve=e,Oe.artboards.forEach((function(e){ye(e);var r={artboard:e,childs:[],exportNodes:[],loadErrMsg:null,isLoaded:!1,isFetching:!1,isError:!1,mlUserSelectDown:!0};if(Oe.initdata.push(r),ct.inCloudMode){var n=e.boundsInParent,i=e.scale,a=e.docGuid,o=e.pageGuid;if(n&&(("number"!==typeof i||i<=0)&&(i=1),1!==i)){var s=o||a,c=ct.docsMinScale[s];null==c&&(c=1),c>i&&(ct.docsMinScale[s]=i)}Le(t)}else Te(r).catch((function(t){var e=Oe.initdata.findIndex((function(e){return e===t}));-1!==e&&Oe.initdata.splice(e,1)})).finally((function(){Le(t)}))}))):e()}))}};o&&(window.artboardLoadData=Oe,window.marklionData=Be);var ze,We=r("2b0e"),$e=r("2f62"),Ue={device:{android:/([ ;/)(,]|^)Android([ ;/)(,]|$)/i,iphone:/([ ;/)(,]|^)iPhone([ ;/)(,]|$)/i,ipad:/([ ;/)(,]|^)ipad([ ;/)(,]|$)/i,ios:/([ ;/)(,]|^)ios([ ;/)(,]|$)/i,macos:/([ ;/)(,]|^)mac os([ ;/)(,]|$)/i,windows:/([ ;/)(,]|^)Windows([ ;/)(,]|$)/i,linux:/([ ;/)(,]|^)linux([ ;/)(,]|$)/i},maker:{mot:/([ ;/)(,]|^)mot([ ;/)(,]|$)/i},browser:{uc:/([ ;/)(,]|^)(UCBrowser|UCWEB)([ ;/)(,]|$)/i,safria:/([ ;/)(,]|^)Safari([ ;/)(,]|$)/i,aol:/([ ;/)(,]|^)aol([ ;/)(,]|$)/i,arora:/([ ;/)(,]|^)Arora([ ;/)(,]|$)/i,qqbrowser:/([ ;/)(,]|^)QQBrowser([ ;/)(,]|$)/i,mqqbrowser:/([ ;/)(,]|^)mQQBrowser([ ;/)(,]|$)/i,chrome:/([ ;/)(,]|^)(?:chrome|CriOS)([ ;/)(,]|$)/i,qq:/([ ;/)(,]|^)qq([ ;/)(,]|$)/i,microMessenger:/([ ;/)(,]|^)MicroMessenger([ ;/)(,]|$)/i,sogouMobileBrowser:/([ ;/)(,]|^)sogouMobileBrowser([ ;/)(,]|$)/i,baidubrowser:/([ ;/)(,]|^)baidubrowser([ ;/)(,]|$)/i,weibo:/([ ;/)(,]|^)weibo([ ;/)(,]|$)/i,firefox:/([ ;/)(,]|^)Firefox([ ;/)(,]|$)/i,baiduboxapp:/([ ;/)(,]|^)baiduboxapp([ ;/)(,]|$)/i,msie:/(?:[ ;/)(,]|^)(?:msie|rv)\s*:?\s*([\d.]+)/i,Edge:/(?:[ ;/)(,]|^)(?:Edge)\s*:?\s*([\d.]+)/i}},je={safria:"Safria"},Ve=function(t){if(!t)return"";var e=Ue.browser;if(e.uc.test(t))return"UC浏览器";if(e.aol.test(t))return"AOL";if(e.Edge.test(t))return"Edge";if(e.arora.test(t))return"Arora";if(e.sogouMobileBrowser.test(t))return"搜狗浏览器";if(e.baidubrowser.test(t))return"百度浏览器";if(e.baiduboxapp.test(t))return"手机百度";if(e.weibo.test(t))return"微博客户端";if(e.microMessenger.test(t))return Ue.device.windows.test(t)||e.qqbrowser.test(t)?"微信电脑端":"微信手机端";if(e.qq.test(t))return"手机QQ";if(e.mqqbrowser.test(t))return"QQ浏览器";if(e.firefox.test(t))return"Firefox";if(e.chrome.test(t))return"Chrome";if(e.safria.test(t))return je.safria;var r=e.msie.exec(t);return r?"IE"+r[1]:"Other"},Ge={android:"Android",iPhone:"iPhone",iPad:"iPad",iOS:"iOS",macOS:"macOS",windows:"Windows",linux:"Linux",other:"Other"},He=function(t){if(t){var e=Ue.device;if(e.android.test(t))return{name:Ge.android,type:"android"};if(e.iphone.test(t))return{name:Ge.iPhone,type:"ios"};if(e.ipad.test(t))return{name:Ge.iPad,type:"ios"};if(e.ios.test(t))return{name:Ge.iOS,type:"ios"};if(e.macos.test(t))return{name:Ge.macOS,type:"ios"};if(e.windows.test(t))return{name:Ge.windows,type:"windows"};if(e.linux.test(t))return{name:Ge.linux,type:"linux"}}return{name:Ge.other,type:"other"}},Ye=function(t){if(void 0!==ze)return t(ze),void(t=null);var e=new Image,r=function(n){e.onerror=e.onload=null;var i=!(!n||"load"!==n.type)&&1==e.width;ze=i?Xe.Support:Xe.NotSupport,r=e=null,t(ze),t=null};e.onerror=r,e.onload=r,e.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="},Xe={Checking:0,NotSupport:1,Support:2},Ke=function(){var t=navigator.userAgent,e=He(t);switch(e.name){case Ge.macOS:case Ge.iPhone:case Ge.iPad:case Ge.iOS:break;default:return!1}var r=Ve(t);return r===je.safria}();We["a"].use($e["a"]);var Ze=!1;function qe(){var t=Qe.state,e="";t.inCloudMode?(t.cloudNeedLogin&&!t.cloudIsLogin||(t.cloud.folderNotFound?e+="链接已失效 - ":t.curArtboard?e+="".concat(t.curArtboard.artboard.name," - ").concat(ct.documentName," - "):e+="".concat(ct.documentName," - ")),t.cloudName&&(e+="".concat(t.cloudName," - "))):e+="".concat(ct.documentName," - "),document.title=e+ct.initTitle}function Je(t,e,r){qe();var n="#";if(ct.inCloudMode){if(r.cloudNeedLogin&&!r.cloudIsLogin||!r.permission)return;if(!history.pushState)return;if(Ze)return void(Ze=!1);if(o)return;var i,a,s="/viewer/".concat(ct.cloudFolderId,"/");t&&(i=t.artboard.guid,s+="".concat(i,"/")),e&&(a=e.guid,s+="".concat(a,"/"));var c=location.href;if(c.indexOf(s)===c.length-s.length)return;history.pushState({artboardGuid:i,nodeGuid:a},null,s)}else t&&(n+="/artboard/".concat(t.artboard.guid)),e&&(n+="/node/".concat(e.guid)),location.hash!==n&&(location.hash=n)}ct.inCloudMode&&history.pushState&&window.addEventListener("popstate",(function(t){var e,r,n=t.state;if(u(n))e=n.artboardGuid,r=n.nodeGuid;else{e=Qe.state.cloud.defaultArtboardGuid;var i=window.location.href,a=/\/viewer\/\d+\/[\w-]+]\/([\w-]+])\//.exec(i);r=a?a[1]:null}var o=null,s=null;e&&(o=Qe.state.documentArtboards.find((function(t){return t.artboard.guid===e})),o&&r&&(s=o.childs.find((function(t){return t.guid===r})))),Ze=!0,o!=Qe.state.curArtboard&&Qe.commit("curArtboard",o),o!=Qe.state.curNode&&Qe.commit("curNode",s)}));var Qe=new $e["a"].Store({state:{config:null,allArtboardLoadChecked:!1,artboardLoadProgress:{current:0,count:1},documentGuid:null,documentName:null,curArtboard:null,curNode:null,clickedNode:null,enterNode:null,documentArtboards:[],sortedArtboardsWithDocument:[],documents:[],isSupportWebp:Xe.Checking,scale:{artboard:1,list:1,resetList:0,resetArtboard:0},setting:{color:{items:["rgba","hex","ahex","hexa","hsla"],current:0},numberAutoRound:!1,exportBoxBackground:L.Transparent},platform:{type:Ct.WEB,customUnit:St.PX,customDocWidth:0},unitTemplate:{template:"",enable:!1},androidUseMipmap:"1"===Ut("androidUseMipmap",!1),textTip:{visible:!1,text:"",handle:0},inMultDownMode:!1,inArtboardMultDownMode:!1,inOutput:!1,artboardMenu:{visible:!1,x:0,y:0,artboard:null},helper:{visible:!1,handle:0},inCloudMode:!1,permission:!0,cloudNeedLogin:!1,cloudIsLogin:!1,cloudNickName:null,cloudUserEmail:null,cloudName:null,cloudKey:null,cloudVersion:null,cloud:{folderNotFound:!1,defaultArtboardGuid:"",parentFolder:null,currentFolderId:0,subFolders:[]},resetScaleSceneCenter:null,selectArtboardChanged:null,artboardListUseCanvas:!1},mutations:{artboardListUseCanvas:function(t,e){jt("list-view-mode",e?"1":"0"),location.reload(!0),setTimeout((function(){t.artboardListUseCanvas=e}),1e3)},selectArtboardChanged:function(t,e){t.selectArtboardChanged=e},resetScaleSceneCenter:function(t,e){t.resetScaleSceneCenter=e},isSupportWebp:function(t,e){t.isSupportWebp=e},artboardLoadProgress:function(t,e){if(u(e)){var r=e.current,n=e.count;t.artboardLoadProgress.current=r,t.artboardLoadProgress.count=n}},allArtboardLoadChecked:function(t,e){t.allArtboardLoadChecked=e},setHelperVisible:function(t,e){var r=t.helper;clearTimeout(r.handle),e?r.visible=!0:r.handle=setTimeout((function(){r.visible=!1}),200)},setInOutput:function(t,e){t.inOutput=e},setAndroidUseMipmap:function(t,e){t.androidUseMipmap!==e&&(t.androidUseMipmap=e,jt("androidUseMipmap",e?"1":"0"))},setArtboardMenu:function(t,e){if(u(e)){var r=e.visible,n=e.x,i=e.y,a=e.artboard,o=t.artboardMenu;null!=n&&(o.x=n),null!=i&&(o.y=i),null!=r&&(o.visible=r),!1===r?o.artboard=null:null!=a&&(o.artboard=a)}},setInMultDownMode:function(t,e){t.inMultDownMode=e},setInArtboardMultDownMode:function(t,e){t.inArtboardMultDownMode=e},Tip_showTextTip:function(t,e){var r=e.second,n=void 0===r?5:r,i=e.text,a=t.textTip;a.visible=!0,a.text=i,clearTimeout(a.handle),n>0&&(a.handle=setTimeout((function(t){clearTimeout(t.handle),t.handle=0,t.visible=!1}),1e3*n,a))},Tip_hideTextTip:function(t){var e=t.textTip;e.visible=!1,clearTimeout(e.handle),e.handle=0},setUnitTemplate:function(t,e){var r=e.enable,n=e.template,i=e.fromInited,a=e.guid,o=t.unitTemplate;if((o.enable!=r||o.template!=n)&&(o.enable=r,l(n)||(n="rem(%num%)"),o.template=n,!i)){var s="unittemplate.".concat(a);o.enable||"rem(%num%)"!=o.template?jt(s,o):Vt(s)}},setPlatform:function(t,e){var r=e.type,n=e.customUnit,i=e.customDocWidth,a=e.fromInited,o=e.guid,s=t.platform,c=!1;if(null!==r){var l;switch(r){case Ct.ANDROID:case Ct.IOS:case Ct.CUSTOM:l=r;break;default:l=Ct.WEB;break}l!==s.type&&(c=!0,s.type=l)}if(null!=n&&null!=i){switch(c=!0,n){case St.DP:case St.PT:s.customUnit=n;break;default:s.customUnit=St.PX;break}"number"===typeof i&&isFinite(i)&&!isNaN(i)&&i>=1?s.customDocWidth=Math.round(i):s.customDocWidth=0}if(c&&!a){var u="platform.".concat(o);jt(u,s)}},setScale:function(t,e){if(u(e)){var r=e.artboard,n=e.list,i=e.reset;if(null!=r){var o=.1,s=6;r=Math.min(s,r),r=Math.max(o,r),r=Math.round(100*r),r=a.div(r,100),t.scale.artboard=r}if(null!=n){var c=.05,l=10;n=Math.min(l,n),n=Math.max(c,n),n=Math.round(100*n),n=a.div(n,100),t.scale.list=n}!0===i&&(null==t.curArtboard?t.scale.resetList=Date.now():t.scale.resetArtboard=Date.now())}},exportBoxBackgroundType:function(t,e){t.setting.exportBoxBackground=e,jt("export-box-background",e)},setNumberAutoRound:function(t,e){t.setting.numberAutoRound=e,jt("number-auto-round",e?"1":"0")},setSettingColor:function(t,e){var r=t.setting.color;(e<0||e>=r.items.length)&&(e=0),r.current=e,jt("colortype",e)},curArtboard:function(t,e){if(u(e)||(e=null),t.curArtboard=e,t.curNode=null,lt.paused=null!=e,Je(e,t.curNode,t),null!=e&&e.isLoaded){var r=e.artboard;if(u(r)){var n=r.mlConfig;if(u(n)&&"number"===typeof n.platform){var i=dt(r.docGuid,n.platform);Qe.commit("setPlatform",i)}var a=ut(r.docGuid);Qe.commit("setUnitTemplate",a)}}},curNode:function(t,e){u(e)||(e=null),t.curNode=e,Je(t.curArtboard,e,t)},clickedNode:function(t,e){t.clickedNode=e},enterNode:function(t,e){t.enterNode=e},setCloudNickName:function(t,e){t.cloudNickName=e},setMyState:function(t,e){u(e)&&(t.permission=e.permission,t.cloudNeedLogin=e.needLogin,t.cloudIsLogin=e.isLogin,t.cloudNickName=e.nickName,t.cloudUserEmail=e.email,t.cloudName=e.cloudName,t.cloudVersion=e.cloudVersion)},setDocument:function(t,e){var r=e.documentName,n=e.documentArtboards,i=e.documentGuid,a=e.config,o=e.permission,s=e.inCloudMode,l=e.cloud,d=e.documents,h=e.cloudNeedLogin,f=e.cloudIsLogin,p=e.cloudNickName,m=e.cloudUserEmail,v=e.cloudName,b=e.cloudKey,g=e.cloudVersion;if(t.documentArtboards=n,c(d)){var w=t.sortedArtboardsWithDocument;w.splice(0),d.forEach((function(t){t&&c(t.arts)&&t.arts.forEach((function(t){w.push(t)}))}))}t.documents=d,t.documentName=r,t.documentGuid=i,t.config=a,t.permission=o,t.cloudNeedLogin=h,t.cloudIsLogin=f,t.cloudNickName=p,t.cloudUserEmail=m,t.cloudName=v,t.cloudKey=b,t.cloudVersion=g,t.inCloudMode=s,ct.cloudVersion=g;var y=t.cloud;u(l)&&Object.keys(l).forEach((function(t){y[t]=l[t]}));var x=dt(i,a.platform);Qe.commit("setPlatform",x);var _=ut(i);Qe.commit("setUnitTemplate",_)}},actions:{}});(function(){var t=parseInt(Ut("colortype",!1));if(!(isNaN(t)||!isFinite(t)||t<0)){var e=Qe.state.setting.color;t<e.items.length&&(e.current=t)}})(),function(){var t="1"===Ut("number-auto-round",!1);t&&(Qe.state.setting.numberAutoRound=!0)}(),function(){var t=+Ut("export-box-background",!1);switch(t){case L.Black:case L.Transparent:break;default:t=L.Transparent}t!==L.Transparent&&(Qe.state.setting.exportBoxBackground=t)}(),function(){var t=Ut("list-view-mode");switch(t){case"1":Qe.state.artboardListUseCanvas=!0;break;case"0":Qe.state.artboardListUseCanvas=!1;break;default:Qe.state.artboardListUseCanvas=!0;break}}();var tr=Qe,er=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pop-box prompt"},[r("form",{on:{submit:t.clickSubmit}},[r("div",{staticClass:"box"},[r("a",{staticClass:"sys-close",attrs:{href:"javascript:;",title:t.noText},on:{click:t.clickNo}}),r("div",{staticClass:"title"},[t._v(t._s(t.title))]),r("div",{staticClass:"text"},[r("UserInput",{ref:"text",attrs:{defaultBorder:!0,placeholder:t.placeholder,target:"text",initValue:t.text,maxLength:t.maxLength},on:{change:t.onChange}})],1),r("div",{staticClass:"btns"},[r("a",{staticClass:"button light btn-yes",attrs:{href:"javascript:;"},on:{click:t.clickYes}},[t._v(t._s(t.yesText))])])])])])},rr=[],nr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input",class:t.cls},["checkbox"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:"checkbox"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{blur:t.blur,focus:t.focus,change:function(e){var r=t.value,n=e.target,i=!!n.checked;if(Array.isArray(r)){var a=null,o=t._i(r,a);n.checked?o<0&&(t.value=r.concat([a])):o>-1&&(t.value=r.slice(0,o).concat(r.slice(o+1)))}else t.value=i}}}):"radio"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:"radio"},domProps:{checked:t._q(t.value,null)},on:{blur:t.blur,focus:t.focus,change:function(e){t.value=null}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",attrs:{maxlength:t.maxLength,placeholder:t.placeholder,autocomplete:t.autocomplete,spellcheck:"false",type:t.type},domProps:{value:t.value},on:{blur:t.blur,focus:t.focus,input:function(e){e.target.composing||(t.value=e.target.value)}}}),t.showVerify?r("img",{staticClass:"verifycode",attrs:{src:t.verifySrc,title:"点击刷新验证码"},on:{click:function(e){return t.clickVerifyCode()}}}):t.showPwd?r("span",{staticClass:"pwd-mode",class:{"in-text":t.pwdModeInText},on:{click:function(e){t.pwdModeInText=!t.pwdModeInText}}}):t.showPhoneCode?r("a",{staticClass:"button btn-phoneCodeSend",class:{off:!t.phoneCodeBtnEnable,light:t.phoneCodeBtnEnable},attrs:{href:"javascript:;"},on:{click:t.sendPhoneCode}},[t._v(t._s(t.phoneCodeBtnText))]):t._e()])},ir=[],ar={methods:{sendPhoneCode:function(){this.$emit("sendPhoneCode")},setFocus:function(){var t=this.$refs.input;t&&t.focus()},setValue:function(t){"string"===typeof t&&(this.value=t)},clearAndFocus:function(){this.value="",this.setFocus()},refreshCode:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.ticks=Date.now(),this.value="";case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),clickVerifyCode:function(t){var e=this.ticks,r=Date.now(),n=r-e;n<500&&n>=0||(this.ticks=r,this.value="",!0!==t&&this.setFocus())},focus:function(){this.focused=!0},blur:function(){this.focused=!1}},watch:{showVerify:function(t){t&&this.refreshCode()},value:function(t){this.$emit("change",t)}},props:{target:String,initValue:String,placeholder:String,maxLength:Number,defaultBorder:Boolean,phoneCodeBtnText:String,phoneCodeBtnEnable:Boolean},computed:{autocomplete:function(){return"password"===this.type?"new-password":"off"},type:function(){return"pwd2"===this.target||"pwd3"===this.target?"password":this.showPwd?this.pwdModeInText?"text":"password":"text"},verifySrc:function(){return"".concat(nt,"router/verifycode.ashx?r=").concat(this.ticks)},showPwd:function(){return"pwd"===this.target},showVerify:function(){return"verify"===this.target},showPhoneCode:function(){return"phoneCode"===this.target},cls:function(){var t=[],e=this.target;return e&&t.push(e),this.focused&&t.push("focused"),this.defaultBorder&&t.push("default-bor"),t}},created:function(){this.value=this.initValue,this.showVerify&&this.refreshCode()},data:function(){return{pwdModeInText:!1,focused:!1,value:"",ticks:Date.now()}}},or=ar,sr=(r("e7be"),r("2877")),cr=Object(sr["a"])(or,nr,ir,!1,null,"358e5a7c",null),lr=cr.exports,ur={methods:{clickSubmit:function(t){t.preventDefault(),this.clickYes()},onChange:function(t){this.value=t}},components:{UserInput:lr},props:{title:{type:String,default:"提示"},maxLength:{type:Number,default:256},placeholder:{type:String,default:""},text:String,yesText:{type:String,default:"确认"},noText:{type:String,default:"取消"}},data:function(){return{value:""}},created:function(){var t=this;this.value=this.text,l(this.value)&&this.$nextTick((function(){var e=t.$refs.text;e&&e.setFocus&&e.setFocus()}))}},dr=ur,hr=(r("5768"),Object(sr["a"])(dr,er,rr,!1,null,"56ca67ea",null)),fr=hr.exports,pr=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var n,i,a,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=!(s.length>2&&void 0!==s[2])||s[2],"string"!==typeof r&&(r=JSON.stringify(r)),i="/api/"+e,o&&(i=it+i),t.next=6,fetch(i,{method:"post",body:r,credentials:o?"include":void 0});case 6:a=t.sent,t.t0=a.status,t.next=200===t.t0?10:500===t.t0?22:26;break;case 10:return t.next=12,a.text();case 12:if(r=t.sent,l(r)){t.next=15;break}throw"接口".concat(e,"请求失败,不存在返回值");case 15:if(r=re(r),u(r)){t.next=18;break}throw"接口".concat(e,"请求失败,无法解析返回值");case 18:if(r.success){t.next=21;break}throw r.code===ot.NotLogin&&st(2e3).then((function(){window.location.reload(!0)})),r.errMsg;case 21:return t.abrupt("return",n?ne(r.data):r.data);case 22:return t.next=24,a.text();case 24:throw r=t.sent,r;case 26:throw"接口".concat(e,"请求失败");case 27:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),mr=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(u(r)){t.next=2;break}throw"接口[".concat(e,"]返回值格式异常");case 2:if(r.success){t.next=4;break}return t.abrupt("return",r);case 4:if(r=r.data,l(r)){t.next=7;break}throw"接口[".concat(e,"]返回值格式异常,无法解析data");case 7:return n="/api/"+e,o&&(n=it+n),t.next=11,fetch(n,{method:"post",body:r,credentials:o?"include":void 0});case 11:i=t.sent,t.t0=i.status,t.next=200===t.t0?15:500===t.t0?24:28;break;case 15:return t.next=17,i.text();case 17:if(r=t.sent,l(r)){t.next=20;break}throw"接口[".concat(e,"]请求失败,不存在返回值");case 20:if(r=re(r),u(r)){t.next=23;break}throw"接口[".concat(e,"]请求失败,无法解析返回值");case 23:return t.abrupt("return",r);case 24:return t.next=26,i.text();case 26:throw r=t.sent,"接口[".concat(e,"]").concat(r);case 28:throw"接口[".concat(e,"]请求失败");case 29:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),vr=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var n,a,o,s,c,l,u,d,h=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=h.length>2&&void 0!==h[2]?h[2]:0,a="pre"+e,t.next=4,pr(a,r,!1);case 4:return o=t.sent,s="".concat(nt,"router/web/webupdate.ashx"),c=document.createElement("iframe"),l="__postdata_"+Date.now(),c.name=l,c.style.cssText="width:1px;height:1px;position: absolute;top:-10px;left:-10px;overflow:hidden;",u=document.createElement("form"),u.style.cssText="width:1px;height:1px;position: absolute;top:-10px;left:-10px;overflow:hidden;",u.appendChild(c),u.target=l,u.method="POST",u.action=s,u.enctype="multipart/form-data",d=document.createElement("input"),d.name="router",d.value=e,u.appendChild(d),d=document.createElement("input"),d.name="body",d.value=o,u.appendChild(d),d=null,document.body.appendChild(u),t.abrupt("return",new Promise((function(t,r){var a,o=function(){clearTimeout(a),window.removeEventListener("message",s),document.body.removeChild(u),s=u=c=null};n>0&&(a=setTimeout((function(){o(),r("[".concat(e,"]操作已超时"))}),n));var s=function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(i){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=i.source,a===c.contentWindow){n.next=3;break}return n.abrupt("return");case 3:if(n.prev=3,s=i.data,"string"!==typeof s){n.next=9;break}return n.abrupt("return",r(s));case 9:return n.prev=9,n.t0=t,n.next=13,mr(e,s);case 13:n.t1=n.sent,(0,n.t0)(n.t1),n.next=20;break;case 17:n.prev=17,n.t2=n["catch"](9),r(n.t2);case 20:return n.prev=20,o(),n.finish(20);case 23:case"end":return n.stop()}}),n,null,[[3,,20,23],[9,17]])})));return function(t){return n.apply(this,arguments)}}();window.addEventListener("message",s),u.submit()})));case 28:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),br=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var n,i,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="pre"+e,t.next=3,pr(n,r,!0);case 3:return i=t.sent,a="".concat(nt,"router/web/").concat(e,".ashx"),t.next=7,fetch(a,{method:"post",body:i});case 7:o=t.sent,t.t0=o.status,t.next=200===t.t0?11:500===t.t0?20:24;break;case 11:return t.next=13,o.text();case 13:if(r=t.sent,l(r)){t.next=16;break}throw"返回值格式异常";case 16:return r=re(r),t.next=19,mr(e,r);case 19:return t.abrupt("return",t.sent);case 20:return t.next=22,o.text();case 22:throw r=t.sent,r;case 24:throw"接口".concat(e,"请求失败");case 25:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),gr={computed:{numberAutoRound:function(){return this.$store.state.setting.numberAutoRound},exportBoxBackground:function(){return this.$store.state.setting.exportBoxBackground},inCloudMode:function(){return this.$store.state.inCloudMode},permission:function(){return this.$store.state.permission},cloudNeedLogin:function(){return this.$store.state.cloudNeedLogin},cloudIsLogin:function(){return this.$store.state.cloudIsLogin},cloudNickName:function(){return this.$store.state.cloudNickName},cloudUserEmail:function(){return this.$store.state.cloudUserEmail},cloudName:function(){return this.$store.state.cloudName},cloudKey:function(){return this.$store.state.cloudKey},cloudVersion:function(){return this.$store.state.cloudVersion},cloudFolderNotFound:function(){return this.$store.state.cloud.folderNotFound},cloudCurrentFolderId:function(){return this.$store.state.cloud.currentFolderId},cloudSubFolders:function(){return this.$store.state.cloud.subFolders},cloudParentFolder:function(){return this.$store.state.cloud.parentFolder},androidUseMipmap:function(){return this.$store.state.androidUseMipmap},calcPlatformUse:function(){var t=this.calcPlatformType;switch(t){case Ct.ANDROID:case Ct.IOS:return t;case Ct.CUSTOM:switch(this.calcPlatformCustomUnit){case St.DP:return Ct.ANDROID;case St.PT:return Ct.IOS;default:return Ct.WEB}default:return Ct.WEB}},calcArtScale:function(){var t=this.curArtboard;if(!t)return 1;var e=t.artboard;if(!e)return 1;var r=e.mlConfig;if(!r)return 1;var n=r.artScale;return null==n||n<=0?1:n},calcPlatformType:function(){return this.$store.state.platform.type},calcPlatformCustomUnit:function(){return this.$store.state.platform.customUnit},calcPlatformShowType:function(){switch(this.calcPlatformType){case Ct.ANDROID:case Ct.IOS:return this.calcPlatformType;case Ct.CUSTOM:switch(this.calcPlatformCustomUnit){case St.DP:return Ct.ANDROID;case St.PT:return Ct.IOS;default:return Ct.WEB}default:return Ct.WEB}},calcUnitTemplateValue:function(){if(!this.inArtboardMode)return"";var t=this.$store.state.unitTemplate.template;return t||""},calcPlatformCustomDocWidth:function(){if(!this.inArtboardMode)return 1;var t=this.$store.state.platform.customDocWidth;return(isNaN(t)||!isFinite(t)||t<1)&&(t=0),t},calcPlatformCustomDocWidthShow:function(){var t=this.calcPlatformCustomDocWidth;return 0===t&&(t=this.curArtboard.artboard.boundsInArtboard.width),t},scaleArtboard:function(){return this.$store.state.scale.artboard},scaleList:function(){return this.$store.state.scale.list},inArtboardMode:function(){return null!==this.curArtboard},curArtboard:function(){return this.$store.state.curArtboard},curNode:function(){return this.$store.state.curNode},propertyVisible:function(){return this.inMultDownMode||this.inArtboardMode&&null!==this.curNode},clickedNode:function(){return this.$store.state.clickedNode},enterNode:function(){return this.$store.state.enterNode},singleDocumentMode:function(){return this.documents.length<=1},documents:function(){return this.$store.state.documents},sortedArtboardsWithDocument:function(){return this.$store.state.sortedArtboardsWithDocument},documentArtboards:function(){return this.$store.state.documentArtboards},documentName:function(){return this.$store.state.documentName},inMultDownMode:function(){return this.inArtboardMode&&this.$store.state.inMultDownMode},inArtboardMultDownMode:function(){return!this.inArtboardMode&&this.$store.state.inArtboardMultDownMode}},methods:{checkUserState:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.inCloudMode&&this.cloudNeedLogin){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("".concat(o?it:"","/api/getmystate"),{method:"post",body:"folderid=".concat(this.cloudCurrentFolderId),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},credentials:o?"include":void 0});case 4:e=t.sent,t.t0=e.status,t.next=200===t.t0?8:500===t.t0?14:17;break;case 8:return t.next=10,e.json();case 10:if(r=t.sent,u(r)){t.next=13;break}throw"返回值异常";case 13:return t.abrupt("return",r);case 14:return t.next=16,e.text();case 16:throw t.sent;case 17:throw"无法检测用户状态";case 18:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),cryptoMarklionWeb:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,br(e,r);case 2:if(r=t.sent,r.success){t.next=18;break}t.t0=r.code,t.next=t.t0===ot.NotLogin?7:17;break;case 7:return this.showTextTip(r.errMsg),t.next=10,fetch("/api/logout",{method:"post",body:""});case 10:return n=t.sent,t.next=13,n.text();case 13:return t.next=15,st(2e3);case 15:return window.location.reload(!0),t.abrupt("break",17);case 17:throw r.errMsg;case 18:return t.abrupt("return",r.data);case 19:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}(),cryptoMarklionWeb2:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var n,i,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:0,t.next=3,vr(e,r,n);case 3:if(r=t.sent,r.success){t.next=19;break}t.t0=r.code,t.next=t.t0===ot.NotLogin?8:18;break;case 8:return this.showTextTip(r.errMsg),t.next=11,fetch("/api/logout",{method:"post",body:""});case 11:return i=t.sent,t.next=14,i.text();case 14:return t.next=16,st(2e3);case 16:return window.location.reload(!0),t.abrupt("break",18);case 18:throw r.errMsg;case 19:return t.abrupt("return",r.data);case 20:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}(),goCloudLogin:function(){var t=location.href;t=t.replace(/https?:\/\/[^/]+\//i,"/"),window.location.href="".concat(o?"https://local.user.marklion.net":"https://user.marklion.net","/web/?action=cloud.login&cloudkey=").concat(encodeURIComponent(this.cloudKey),"&ver=").concat(encodeURIComponent(this.cloudVersion),"&redirect=").concat(encodeURIComponent(t))},prompt:function(t){var e=t.title,r=t.text,n=t.placeholder,i=void 0===n?"":n,a=t.beforeYes,o=t.maxLength,s=void 0===o?256:o,c=t.noText,l=void 0===c?"取消":c,u=t.yesText,d=void 0===u?"确认":u;return new Promise((function(t,n){var o=function(){if(c){var t=c.$el;c.$destroy(),c=null,t&&t.parentNode&&(t.parentNode.removeChild(t),t=null)}},c=new(We["a"].extend(fr))({propsData:{title:e,text:r,noText:l,yesText:d,placeholder:i,maxLength:s},methods:{clickYes:function(){var e=this.value;"function"!==typeof a||!1!==a(e)?(o(),t(e)):this.$refs.text.setFocus()},clickNo:function(){o(),n()}}}).$mount();document.body.appendChild(c.$el)}))},getCalcPlatformUnit:function(t){var e;switch(this.calcPlatformType){case Ct.ANDROID:e=t?"sp":"dp";break;case Ct.IOS:e="pt";break;case Ct.CUSTOM:e=this.getCalcPlatformCustomUnitText(t);break;default:e="px";break}return e},getCalcPlatformCustomUnitText:function(t){var e,r=this.calcPlatformCustomUnit;switch(r){case St.DP:e=t?"sp":"dp";break;case St.PT:e="pt";break;default:e="px";break}return e},getCalcRectScale:function(){if(!this.inArtboardMode)return 1;switch(this.calcPlatformType){case Ct.CUSTOM:var t=this.calcPlatformCustomDocWidthShow,e=this.curArtboard.artboard.boundsInArtboard.width;return t/e;default:return 1}},getCalcValue:function(t,e,r){if(!this.inArtboardMode)return 0;var n;switch(ct.inCloudMode&&r&&(t=rt(t,this.calcArtScale,e)),this.calcPlatformType){case Ct.ANDROID:n=t;break;case Ct.IOS:n=t;break;case Ct.CUSTOM:var i=this.calcPlatformCustomDocWidthShow,a=this.curArtboard.artboard.boundsInArtboard.width;n=i/a*t;break;default:n=t;break}return n=Math.round(100*n)/100,this.numberAutoRound&&(n=n>0&&n<1?1:e?Math.ceil(n):Math.round(n)),n},getCalcPlatformValue:function(t,e){if(null==t)return 0;if(!this.inArtboardMode)return 0;var r,n,i,a;e?(r=e.fontSize,n=e.markedForExport,i=e.noUnitTemplate,a=e.needArtScale):(r=!1,n=!1,i=!1,a=!1);var o=this.getCalcValue(t,n,a);if(i){var s=this.getCalcPlatformUnit(r);return o+s}return this.getCalcUnitTemplateValue(o,r)},getCalcUnitTemplateValue:function(t,e){var r=this.$store.state.unitTemplate;if(r.enable){var n=this.curArtboard.artboard.boundsInArtboard;return r.template.replace(/%[^%]+%/g,(function(e){switch(e){case"%num%":return t.toString();case"%W%":return n.width.toString();case"%H%":return n.height.toString();case"%VW%":return Zt(t/n.width*100,2).toString();case"%VH%":return Zt(t/n.height*100,2).toString();default:return e}}))}var i=this.getCalcPlatformUnit(e);return t+i},setInOutput:function(t){this.$store.commit("setInOutput",t)},setInMultDownMode:function(t){this.$store.commit("setInMultDownMode",t)},setInArtboardMultDownMode:function(t){this.$store.commit("setInArtboardMultDownMode",t)},setScaleArtboard:function(t){this.$store.commit("setScale",{artboard:t})},setScaleList:function(t){this.$store.commit("setScale",{list:t})},setCurArtboard:function(t){this.$store.commit("curArtboard",t)},setCurNode:function(t){this.$store.commit("curNode",t)},setClickedNode:function(t){this.$store.commit("clickedNode",t)},setEnterNode:function(t){this.$store.commit("enterNode",t)},showTextTip:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;"string"!==typeof t&&null!=t&&(t=t.toString()),this.$store.commit("Tip_showTextTip",{second:e,text:t})},hideTextTip:function(){this.$store.commit("Tip_hideTextTip")}}},wr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{attrs:{id:"main"}},[r("div",{staticClass:"loading",class:{on:!t.allArtboardLoadChecked,local:!t.inCloudMode}},[t._v("正在加载画板数据中("+t._s(t.artboardLoadProgressText)+"),请稍后...")]),t.cloudNeedLogin&&!t.cloudIsLogin?r("CloudNeedLoginTip"):t.allArtboardLoadChecked?[r("Header"),r("main",[r("FolderNav"),t.cloudFolderNotFound?r("EmptyData",{attrs:{text:"链接已失效,无法找到对应的文件夹"}}):t.permission?t.isEmptyData?r("EmptyData",{attrs:{text:t.emptyText}}):t.inArtboardMode?r("ArtboardInfo"):t._e():r("Authority"),r("keep-alive",[t.cloudFolderNotFound||!t.permission||t.isEmptyData||t.inArtboardMode?t._e():r("ArtboardList")],1),r("Tip"),r("InOutputTip"),r("ArtboardListItemMenu")],1)]:t._e(),r("SafariWebpTip")],2)},yr=[],xr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"needlogin-tip"},[r("div",{staticClass:"logo"}),r("div",{staticClass:"box"},[r("div",{staticClass:"container"},[r("div",{staticClass:"cloudname"},[t._v("您正在访问"),r("b",[t._v(t._s(t.title))])]),r("div",{staticClass:"text"},[t._v("请先登录验证权限")]),r("div",{staticClass:"btns"},[r("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.goCloudLogin}},[t._v("立即登录")])])])])])},_r=[],kr={computed:{title:function(){var t=this.cloudName;return t||"标记狮设计协作平台私有云服务"}}},Cr=kr,Sr=(r("c1fd"),Object(sr["a"])(Cr,xr,_r,!1,null,"2924a674",null)),Ar=Sr.exports,Er=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.artboardMenu.visible?r("div",{staticClass:"menu",style:t.menuStyle,on:{contextmenu:function(t){t.preventDefault()}}},[r("a",{attrs:{href:"javascript:;"},on:{click:t.clickGoArtboard}},[t._v("查看画板全部切图")]),r("a",{attrs:{href:"javascript:;"},on:{click:t.clickDownPreview}},[t._v("下载该画板预览图")])]):t._e()},Nr=[],Pr=function(){function t(){Object(R["a"])(this,t),Object(B["a"])(this,"files",[]),Object(B["a"])(this,"jszip",null),this.jszip=new at}return Object(F["a"])(t,[{key:"start",value:function(t){var e=this;return new Promise((function(r,n){if(0===e.files.length)return n("文件列表为空");e.fetch().then((function(e){Et(t,e),r("success")})).catch(n)}))}},{key:"fetch",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.files.splice(0,1)[0],void 0!==e){t.next=5;break}return t.next=4,this._compress();case 4:return t.abrupt("return",t.sent);case 5:return t.next=7,Mt(e.resSrc,e.base64ResSrc);case 7:return r=t.sent,n=this.jszip,"string"===typeof r&&(i={base64:!0}),n.file(e.filename,r,i),t.next=13,this.fetch();case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_compress",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.jszip,t.next=3,e.generateAsync({type:"blob"});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addFile",value:function(t,e,r){this.files.push({filename:t,resSrc:e,base64ResSrc:r})}}]),t}(),Tr={ANDROID_MIPMAP:[{name:"mdpi",minname:"mdpi",scale:1,filepath:"mipmap-mdpi/{$name$}.png",resname:"{$name$}.png"},{name:"hdpi",minname:"hdpi",scale:1.5,filepath:"mipmap-hdpi/{$name$}.png",resname:"{$name$}@1.5x.png"},{name:"xhdpi",minname:"xhdpi",scale:2,filepath:"mipmap-xhdpi/{$name$}.png",resname:"{$name$}@2x.png"},{name:"xxhdpi",minname:"xxhdpi",scale:3,filepath:"mipmap-xxhdpi/{$name$}.png",resname:"{$name$}@3x.png"},{name:"xxxhdpi",minname:"xxxhdpi",scale:4,filepath:"mipmap-xxxhdpi/{$name$}.png",resname:"{$name$}@4x.png"}],ANDROID:[{name:"mdpi",minname:"mdpi",scale:1,filepath:"drawable-mdpi/{$name$}.png",resname:"{$name$}.png"},{name:"hdpi",minname:"hdpi",scale:1.5,filepath:"drawable-hdpi/{$name$}.png",resname:"{$name$}@1.5x.png"},{name:"xhdpi",minname:"xhdpi",scale:2,filepath:"drawable-xhdpi/{$name$}.png",resname:"{$name$}@2x.png"},{name:"xxhdpi",minname:"xxhdpi",scale:3,filepath:"drawable-xxhdpi/{$name$}.png",resname:"{$name$}@3x.png"},{name:"xxxhdpi",minname:"xxxhdpi",scale:4,filepath:"drawable-xxxhdpi/{$name$}.png",resname:"{$name$}@4x.png"}],IOS:[{name:"标准尺寸 @1x",scale:1,filepath:"{$name$}.png"},{name:"视网膜 @2x",scale:2,filepath:"{$name$}@2x.png"},{name:"高清视网膜 @3x",scale:3,filepath:"{$name$}@3x.png"}],WEB:[{name:"Web @1x",scale:1,filepath:"{$name$}.png"},{name:"Web @2x",scale:2,filepath:"{$name$}@2x.png"},{name:"Web @3x",scale:3,filepath:"{$name$}@3x.png"}]},Mr={name:"SVG",scale:1,filepath:"{$name$}.svg"},Ir=[{scale:1,ext:".png"},{scale:1,ext:".svg"},{scale:2,ext:"@2x.png"},{scale:3,ext:"@3x.png"},{scale:4,ext:"@4x.png"},{scale:1.5,ext:"@1.5x.png"}],Or=function(t,e,r,n){if(n)return[{value:Mr,enabled:!0}];var i;switch(e){case Ct.ANDROID:i=r?Tr.ANDROID_MIPMAP:Tr.ANDROID;break;case Ct.IOS:i=Tr.IOS;break;default:i=Tr.WEB;break}var a=t.artboard.mlConfig.scalesObj,o=[];return i.forEach((function(t){o.push({value:t,enabled:1===a[t.scale]})})),o},Lr=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var n,i,a,o,s,d,h,f,p,m,v,b,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Tt(r.artboard)){t.next=2;break}return t.abrupt("return");case 2:if(c(e)&&0!==e.length){t.next=4;break}throw"至少需要选中一个节点才能激活下载";case 4:if(n=kt(r.artboard),n){t.next=7;break}throw"设计狮没有为该画板导出[SVG]格式的切图";case 7:if(i=0,a={},o=[],e.forEach((function(t){if(u(t)&&t.markedForExport){var e=Rt(t);if(l(e)){var r=zt(e),n=Mr.filepath;n=n.replace("{$name$}",r);var s=a[n];if(s){var c=++s.index;n=Mr.filepath,n=n.replace("{$name$}","".concat(r,"(").concat(c,")"))}else a[n]={index:0};o.push({filepath:n,node:t,nodeName:e}),i+=1}}})),0!==o.length){t.next=15;break}throw"至少需要选中一个节点才能激活下载";case 15:if(1!==o.length){t.next=24;break}return s=o[0],d=s.node,h=s.nodeName,f=$r(r.artboard,d),p=f.png,m=f.base64Png,v="".concat(h,".svg"),t.next=21,Nt(v,p,m);case 21:return t.abrupt("return",t.sent);case 24:return b=new Pr,o.forEach((function(t){var e=t.node,n=t.filepath,i=$r(r.artboard,e),a=i.png,o=i.base64Png;b.addFile(n,a,o)})),g=1===i?o[0].nodeName:r.artboard.name,t.next=29,b.start("svg_".concat(g,".zip"));case 29:return t.abrupt("return",t.sent);case 30:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();function Dr(t,e,r,n){return Rr.apply(this,arguments)}function Rr(){return Rr=Object(i["a"])(regeneratorRuntime.mark((function t(e,r,n,i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Tt(i)){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",Nt(e,r,n));case 3:case"end":return t.stop()}}),t)}))),Rr.apply(this,arguments)}function Fr(t,e){return Br.apply(this,arguments)}function Br(){return Br=Object(i["a"])(regeneratorRuntime.mark((function t(e,r){var n,i,a,o,s,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c(r)&&0!==r.length){t.next=2;break}throw"至少需要选中一个画板才能激活下载";case 2:if(n=[],i={},r.forEach((function(t){if(Tt(t)){var e=zt(t.name),r=e,a=i[r],o=t.artboardPreviewPng,s=l(o)&&/\.webp$/i.test(o)?".webp":".png",c=t.artboardPreviewJS;if(a){var u=++a.index;r="".concat(e,"(").concat(u,")")}else i[r]={index:0};r+=s,n.push({filename:r,pngurl:o,jsurl:c})}})),0!==n.length){t.next=9;break}throw"至少需要选中一个画板才能激活下载";case 9:if(1!==n.length){t.next=16;break}return a=n[0],o=a.filename,s=a.pngurl,u=a.jsurl,t.next=13,Nt(o,s,u);case 13:return t.abrupt("return",t.sent);case 16:return d=new Pr,n.forEach((function(t){var e=t.filename,r=t.pngurl,n=t.jsurl;d.addFile(e,r,n)})),t.next=20,d.start(e+".zip");case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t)}))),Br.apply(this,arguments)}var zr=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,r,n,i,a,o){var s,d,h,f,p,m,v,b,g,w,y,x,_,k,C,S,A,E,N;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Tt(a.artboard)){t.next=2;break}return t.abrupt("return");case 2:if(c(i)&&0!==i.length){t.next=4;break}throw"至少需要选中一个节点才能激活下载";case 4:if(u(n)){t.next=6;break}throw"至少需要选中一个图片规格才能激活下载";case 6:if(!o){t.next=12;break}if(s=_t(a.artboard),s){t.next=10;break}throw"设计狮没有为该画板导出[WEBP]格式的切图";case 10:t.next=15;break;case 12:if(s=xt(a.artboard),s){t.next=15;break}throw"设计狮没有为该画板导出[PNG]格式的切图";case 15:if(d=[],h=a.artboard.mlConfig.scalesObj,Object.keys(n).forEach((function(t){h[t]&&n[t]&&d.push(t)})),0!==d.length){t.next=20;break}throw"至少需要选中一个图片规格才能激活下载";case 20:if(f=Or(a,e,r),p=[],m={},v={},d.forEach((function(t){var e=f.find((function(e){return e.enabled&&e.value.scale==t}));if(null==e)throw"意外的程序性异常,丢失downloadType";m[t]=e.value.filepath})),b=0,i.forEach((function(t){if(u(t)&&t.markedForExport){var e=Rt(t);if(l(e)){var r=zt(e);d.forEach((function(n){var i=m[n];i=i.replace("{$name$}",r),o&&(i=i.replace(/\.png$/i,".webp"));var a=v[i];if(a){var s=++a.index;i=m[n],i=i.replace("{$name$}","".concat(r,"(").concat(s,")")),o&&(i=i.replace(/\.png$/i,".webp"))}else v[i]={index:0};p.push({filepath:i,node:t,scale:n,nodeName:e})})),b+=1}}})),0!==p.length){t.next=31;break}throw"至少需要选中一个节点才能激活下载";case 31:if(1!==p.length){t.next=40;break}return g=p[0],w=g.node,y=g.scale,x=g.nodeName,_=Wr(a.artboard,w,y,o),k=_.png,C=_.base64Png,S=Ft(y,x,o),t.next=37,Nt(S,k,C);case 37:return t.abrupt("return",t.sent);case 40:A=new Pr,p.forEach((function(t){var e=t.node,r=t.scale,n=t.filepath,i=Wr(a.artboard,e,r,o),s=i.png,c=i.base64Png;A.addFile(n,s,c)})),E=1===b?p[0].nodeName:a.artboard.name,t.t0=e,t.next=t.t0===Ct.ANDROID?46:t.t0===Ct.IOS?48:50;break;case 46:return N="android_",t.abrupt("break",52);case 48:return N="ios_",t.abrupt("break",52);case 50:return N="web_",t.abrupt("break",52);case 52:return t.next=54,A.start(N+E+".zip");case 54:return t.abrupt("return",t.sent);case 55:case"end":return t.stop()}}),t)})));return function(e,r,n,i,a,o){return t.apply(this,arguments)}}(),Wr=function(t,e,r,n){if(!t||!e)return{};var i,a=t.artboardPath,o=e.exportPath,s=pt(r),c=n?".webp":".png",l=wt(t,"".concat(a,"/png/"),"".concat(o).concat(s).concat(c));return i=n?l.replace(/\/png\/(.*)\.webp$/,"/base64/$1.webp.js"):l.replace(/\/png\/(.*)\.png$/,"/base64/$1.js"),{png:l,base64Png:i}},$r=function(t,e){if(!t||!e)return{};var r=t.artboardPath,n=e.exportPath,i=wt(t,"".concat(r,"/svg/"),"".concat(n,".svg")),a=i.replace(/\/svg\/(.*)\.svg$/,"/base64/$1@svg.js");return{png:i,base64Png:a}},Ur={methods:{clickDownPreview:function(){var t=this,e=this.artboard;e&&(e=e.artboard,e&&(this.setInOutput(!0),Dr("".concat(e.name,".png"),e.artboardPreviewPng,e.artboardPreviewJS,e).catch((function(e){t.showTextTip(e)})).finally((function(){t.setInOutput(!1)}))))},clickGoArtboard:function(){this.setCurArtboard(this.artboardMenu.artboard),this.inMultDownMode||this.setInMultDownMode(!0)},hideContextmenu:function(t){var e=this;"mouseup"===t.type&&2===t.button||(clearTimeout(this.handle),this.handle=setTimeout((function(){e.$store.commit("setArtboardMenu",{visible:!1})}),200))}},watch:{"artboardMenu.x":function(){clearTimeout(this.handle)},"artboardMenu.y":function(){clearTimeout(this.handle)},"artboardMenu.artboard":function(t){null!=t&&clearTimeout(this.handle)},"artboardMenu.visible":function(t){t?(clearTimeout(this.handle),window.addEventListener("mouseup",this.hideContextmenu,!0),window.addEventListener("contextmenu",this.hideContextmenu,!0)):(window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0))}},beforeDestroy:function(){clearTimeout(this.handle),window.removeEventListener("mouseup",this.hideContextmenu,!0),window.removeEventListener("contextmenu",this.hideContextmenu,!0)},data:function(){return{needOpen:!1,handle:0}},computed:{artboard:function(){return this.artboardMenu.artboard},menuStyle:function(){return{top:this.artboardMenu.y+"px",left:this.artboardMenu.x+"px"}},artboardMenu:function(){return this.$store.state.artboardMenu}}},jr=Ur,Vr=(r("ff98"),Object(sr["a"])(jr,Er,Nr,!1,null,"23ba0f74",null)),Gr=Vr.exports,Hr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.tipVisible?r("div",{staticClass:"pop-tip-text"},[r("p",[t._v(t._s(t.tipText)),r("a",{staticClass:"btn-close",attrs:{href:"javascript:;"},on:{click:function(e){return t.hideTextTip()}}},[t._v("我知道了")])])]):t._e()},Yr=[],Xr={computed:{tipText:function(){return this.$store.state.textTip.text},tipVisible:function(){return this.$store.state.textTip.visible}}},Kr=Xr,Zr=(r("e47a"),Object(sr["a"])(Kr,Hr,Yr,!1,null,"7fec39a8",null)),qr=Zr.exports,Jr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visible&&0!==t.documentArtboards.length?r("div",{staticClass:"folder-nav"},[r("dl",{staticClass:"subfolders",class:{on:t.subFoldersOpen}},[r("dt",{on:{click:t.clickSubFoldersOpen}},[t._v("文件夹")]),r("dd",t._l(t.cloudSubFolders,(function(e){return r("div",{key:e.id,staticClass:"item",class:{private:1===e.shareMode},attrs:{title:"单击进入文件夹:["+e.name+"]"},on:{click:function(r){return t.clickGoFolder(e)}}},[t._v(t._s(e.name))])})),0)])]):t.visible?r("div",{staticClass:"cloud-folders"},[r("div",{staticClass:"list"},t._l(t.cloudSubFolders,(function(e){return r("div",{key:e.id,staticClass:"item max",class:{private:1===e.shareMode},attrs:{title:"单击进入文件夹:["+e.name+"]"},on:{click:function(r){return t.clickGoFolder(e)}}},[e.pathPreviews&&e.pathPreviews.length>1?r("div",{staticClass:"imgs"},t._l(e.pathPreviews,(function(t,e){return r("ArtboardPreviewImg",{key:e,attrs:{pathPreview:t}})})),1):e.pathPreviews&&1==e.pathPreviews.length?r("div",{staticClass:"img"},[r("ArtboardPreviewImg",{attrs:{pathPreview:e.pathPreviews[0]}})],1):t._e(),r("div",{staticClass:"text"},[r("div",{staticClass:"name"},[r("span",[t._v(t._s(e.name))]),1===e.shareMode?r("div",{staticClass:"lock-max"}):t._e()])])])})),0)]):t._e()},Qr=[],tn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"preview"},[t.imgSrc?r("img",{directives:[{name:"show",rawName:"v-show",value:!t.errored,expression:"!errored"}],staticClass:"img",attrs:{src:t.imgSrc},on:{error:t.onError}}):t._e()])},en=[],rn={methods:{onError:function(){this.errored||(this.errored=!0)}},watch:{pathPreview:function(){this.errored=!1}},computed:{imgSrc:function(){var t=this.pathPreview;return t}},data:function(){return{errored:!1}},props:{pathPreview:String}},nn=rn,an=(r("0d46"),Object(sr["a"])(nn,tn,en,!1,null,"15200071",null)),on=an.exports,sn={components:{ArtboardPreviewImg:on},methods:{clickGoFolder:function(t){Wt(t.id)},clickSubFoldersOpen:function(){this.subFoldersOpen=!this.subFoldersOpen,jt("subfolderopen",this.subFoldersOpen?"1":"0")}},computed:{visible:function(){return this.inCloudMode&&!this.inArtboardMode&&!this.cloudFolderNotFound&&this.cloudSubFolders&&this.cloudSubFolders.length>0}},data:function(){var t="0"!==Ut("subfolderopen",!1);return{subFoldersOpen:t}}},cn=sn,ln=(r("29be"),Object(sr["a"])(cn,Jr,Qr,!1,null,"ef97b8f8",null)),un=ln.exports,dn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.tipVisible?r("div",{staticClass:"pop-tip-text"},[r("p",[r("span",{staticClass:"loading"}),t._v("\n    "+t._s(t.tipText)+"\n  ")])]):t._e()},hn=[],fn={computed:{tipText:function(){return"正在导出切图资源中,请稍后..."},tipVisible:function(){return this.$store.state.inOutput}}},pn=fn,mn=(r("5245"),Object(sr["a"])(pn,dn,hn,!1,null,"76380b63",null)),vn=mn.exports,bn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",[t.inCloudMode&&!t.inArtboardMode&&0!=t.cloudCurrentFolderId&&t.cloudParentFolder?[r("a",{staticClass:"doc-name",on:{click:t.clickGoParentFolder}},[t._v(t._s(t.cloudParentFolderName))]),r("span",{staticClass:"title"},[t._v(t._s(t.documentName))])]:t.inArtboardMode?[r("a",{staticClass:"doc-name",on:{click:t.clickGoHome}},[t._v(t._s(t.documentName))]),r("span",{staticClass:"title"},[t._v(t._s(t.curArtboard.artboard.name))])]:[r("div",{staticClass:"hidetitle"},[t._v(t._s(t.documentName))]),r("span",{staticClass:"title"},[t._v(t._s(t.documentName))])],r("div",{staticClass:"set",class:{zoom:t.propertyVisible}},[t.setVisible?[t.inCloudMode&&!t.inArtboardMode?r("a",{staticClass:"btn-viewmode",class:{on:t.artboardListUseCanvas},attrs:{href:"javascript:;",title:"开启极速模式浏览画板列表,减少卡顿更流畅"},on:{click:t.clickArtboardListUseCanvas}},[r("span",[t._v("极速模式")]),r("i")]):t._e(),t.inArtboardMode?t._e():r("a",{staticClass:"btn-download",class:{on:t.inArtboardMultDownMode},attrs:{href:"javascript:;",title:"批量下载画板预览图"},on:{click:function(e){return t.setInArtboardMultDownMode(!t.inArtboardMultDownMode)}}}),r("ScaleControl",{attrs:{type:t.inArtboardMode?1:0}}),r("a",{staticClass:"btn-scene-reset",attrs:{href:"javascript:;",title:"重置场景比例和偏移信息"},on:{click:t.clickResetScene}}),r("div",{staticClass:"helper",on:{mouseenter:function(e){return t.clickHelper(!0)},mouseleave:function(e){return t.clickHelper(!1)}}},[r("Helper")],1)]:t._e(),t.userInfoVisible?r("UserInfo",{attrs:{setVisible:t.setVisible}}):t._e()],2)],2)},gn=[],wn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"scale-control"},[r("section",{staticClass:"btns"},[r("a",{staticClass:"btn-zoom btn-zoom-out",attrs:{href:"javascript:;"},on:{click:function(e){return t.setScaleZoomOut()}}}),r("span",{staticClass:"text"},[r("a",{attrs:{href:"javascript:;",title:"设置缩放为100%"},on:{click:function(e){return t.setScale(1)}}},[t._v(t._s(t.scaleText))])]),r("a",{staticClass:"btn-zoom btn-zoom-in",attrs:{href:"javascript:;"},on:{click:function(e){return t.setScaleZoomIn()}}})])])},yn=[],xn={methods:{quickKey:function(t){var e=t.code||t.key;switch(e){case"-":case"Minus":var r=t.ctrlKey||t.metaKey;r&&(this.setScaleZoomOut(),t.preventDefault());break;case"=":case"Equal":var n=t.ctrlKey||t.metaKey;n&&(this.setScaleZoomIn(),t.preventDefault());break}},setScaleZoomOut:function(){var t=this.scale,e=Math.max(.3*t,.25);e=Math.min(2,e),t-=e,this.setScale(t)},setScaleZoomIn:function(){var t=this.scale,e=Math.max(.3*t,.25);e=Math.min(2,e),t+=e,this.setScale(t)},setScale:function(t){var e=this.scale;0===this.type?this.setScaleList(t):this.setScaleArtboard(t),this.resetScaleSceneCenter(t,e)},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},computed:{scale:function(){return 0===this.type?this.scaleList:this.scaleArtboard},scaleText:function(){var t=a.mul(this.scale,100).toString();return t.indexOf(".00")&&(t=t.replace(".00","")),t+"%"}},created:function(){window.addEventListener("keydown",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey)},props:{type:Number}},_n=xn,kn=(r("d1fd"),Object(sr["a"])(_n,wn,yn,!1,null,"06ddd72e",null)),Cn=kn.exports,Sn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visible?r("div",{staticClass:"pop-helper",on:{mouseenter:function(e){return t.clickHelper(!0)},mouseleave:function(e){return t.clickHelper(!1)}}},[r("div",{staticClass:"box"},[r("div",{staticClass:"scene"},[r("h5",[t._v("场景快捷键")]),t._m(0),t._m(1),r("dl",{staticClass:"text"},[r("dt",[t._v("缩放视图")]),r("dd",[r("span",{staticClass:"key"},[t._v("鼠标滚轮")]),r("span",[t._v("+")]),r("span",{staticClass:"key"},[t._v(t._s(t.commandKey))])])]),t._m(2),r("h5",[t._v("画板详情快捷键")]),t._m(3),t._m(4),t._m(5),r("dl",{staticClass:"text"},[r("dt",[t._v("切换到上1个画板")]),r("dd",[r("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),r("span",[t._v("+")]),r("span",{staticClass:"key"},[t._v("↑")])])]),r("dl",{staticClass:"text"},[r("dt",[t._v("切换到下1个画板")]),r("dd",[r("span",{staticClass:"key"},[t._v(t._s(t.commandKey))]),r("span",[t._v("+")]),r("span",{staticClass:"key"},[t._v("↓")])])]),r("h5",[t._v("获取指定2个节点坐标关系")]),r("div",{staticClass:"text"},[t._v("1.左键单击选择1个节点.")]),t._m(6),r("div",{staticClass:"text"},[t._v("*多次单击可穿透选中下方被遮挡节点")])]),r("div",{staticClass:"home"},[r("b",[t._v("@标记狮")]),r("a",{attrs:{href:t.homepage,target:"_blank"}},[t._v("www.marklion.net")])])])]):t._e()},An=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"text"},[r("dt",[t._v("上下视图平移")]),r("dd",[r("span",{staticClass:"key"},[t._v("鼠标滚轮")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"text"},[r("dt",[t._v("左右视图平移")]),r("dd",[r("span",{staticClass:"key"},[t._v("鼠标滚轮")]),r("span",[t._v("+")]),r("span",{staticClass:"key"},[t._v("shift")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text"},[r("span",[t._v("缩放/平移视图时同时按下")]),r("span",{staticClass:"key"},[t._v("alt")]),r("span",[t._v("键可加速操作")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"text"},[r("dt",[t._v("切换到画板列表")]),r("dd",[r("span",{staticClass:"key"},[t._v("F1")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"text"},[r("dt",[t._v("切换到图层列表")]),r("dd",[r("span",{staticClass:"key"},[t._v("F2")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"text"},[r("dt",[t._v("显隐左侧边栏")]),r("dd",[r("span",{staticClass:"key"},[t._v("F3")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text"},[r("span",[t._v("2.按住")]),r("span",{staticClass:"key"},[t._v("shift")]),r("span",[t._v(",左键单击需要比对的节点.")])])}],En={methods:{clickHelper:function(t){this.$store.commit("setHelperVisible",t)}},computed:{homepage:function(){var t;return this.curArtboard&&(t=this.curArtboard.artboard.mlConfig.softVersion),t||(t=this.$store.state.config.softVer),l(t)?"https://www.marklion.net/?invoke=MarkLion.Output&ver=".concat(t):"https://www.marklion.net/?invoke=MarkLion.Output"},commandKey:function(){return this.inMacOS?"command":"ctrl"},inMacOS:function(){return ht},visible:function(){return this.$store.state.helper.visible}}},Nn=En,Pn=(r("4862"),Object(sr["a"])(Nn,Sn,An,!1,null,"fcbc1ff0",null)),Tn=Pn.exports,Mn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-info",class:{line:t.setVisible}},[r("UserFace",{attrs:{canClick:!1}}),r("div",{staticClass:"nickname",class:{islogin:t.cloudIsLogin,on:t.menuVisible},attrs:{title:t.showTitle},on:{click:function(e){return e.stopPropagation(),t.clickShowMenu(e)}}},[t._v(t._s(t.showName))]),t.menuVisible?r("menu",[t.cloudIsLogin?[r("a",{staticClass:"item btn-nickname",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickSetNickName()}}},[t._v("修改昵称")]),r("a",{staticClass:"item btn-logout",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickLogout()}}},[t._v("退出登录")])]:r("a",{staticClass:"item login",attrs:{href:"javascript:;"},on:{click:t.clickLogin}},[t._v("登录")])],2):t._e()],1)},In=[],On=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"userface",class:{on:t.canClick},attrs:{title:t.title},on:{click:function(e){return e.stopPropagation(),t.clickUserFace(e)}}},[t.showIcon?r("div",{staticClass:"icon"}):r("div",{staticClass:"user"},[t._v(t._s(t.iconText))])])},Ln=[],Dn={methods:{clickUserFace:function(){this.$emit("click")}},computed:{showIcon:function(){return!this.cloudIsLogin},iconText:function(){if(!this.cloudIsLogin)return"";var t=this.cloudNickName;return l(t)||(t=this.cloudUserEmail),t[t.length-1]}},props:{title:String,canClick:Boolean}},Rn=Dn,Fn=(r("1570"),Object(sr["a"])(Rn,On,Ln,!1,null,"43f0706e",null)),Bn=Fn.exports,zn={components:{UserFace:Bn},methods:{clickSetNickName:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.prompt({title:"修改昵称",text:this.cloudNickName,placeholder:"昵称;方便其他成员认识你",beforeYes:function(t){if(t=t.trim(),!vt(t))return n.showTextTip("请输入正确的昵称,由5-20个字符组成,其中1个中文=2个字符."),!1}});case 3:e=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t["catch"](0),t.abrupt("return");case 9:if(e=e.trim(),e!==this.cloudNickName){t.next=12;break}return t.abrupt("return");case 12:return this.nickSetting=!0,t.prev=13,t.next=16,this.cryptoMarklionWeb2("setusernickname",{nickName:e},1e4);case 16:r=t.sent,this.$store.commit("setCloudNickName",r),this.showTextTip("昵称已修改"),t.next=24;break;case 21:t.prev=21,t.t1=t["catch"](13),this.showTextTip(t.t1);case 24:case"end":return t.stop()}}),t,this,[[0,6],[13,21]])})));function e(){return t.apply(this,arguments)}return e}(),clickLogout:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.logoutting){t.next=2;break}return t.abrupt("return");case 2:return this.logoutting=!0,t.prev=3,t.next=6,fetch("/api/logout",{method:"post",body:""});case 6:return e=t.sent,t.next=9,e.text();case 9:t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](3);case 13:return t.prev=13,window.location.href="".concat(nt,"router/web/weblogout.ashx?redirect=").concat(encodeURIComponent(location.href)),t.finish(13);case 16:case"end":return t.stop()}}),t,this,[[3,11,13,16]])})));function e(){return t.apply(this,arguments)}return e}(),clickLogin:function(){this.goCloudLogin()},clickShowMenu:function(){this.menuVisible=!this.menuVisible},hideMenu:function(){var t=this;clearTimeout(this.menuHandler),this.menuHandler=setTimeout((function(){t.menuVisible=!1}),50)}},computed:{showTitle:function(){return this.cloudIsLogin?"".concat(this.cloudNickName,"(").concat(this.cloudUserEmail,")"):"点击登录"},showName:function(){return this.cloudIsLogin?this.cloudNickName:"未登录"}},watch:{menuVisible:function(t){t?window.addEventListener("click",this.hideMenu,!1):window.removeEventListener("click",this.hideMenu,!1)}},beforeDestroy:function(){window.removeEventListener("click",this.hideMenu,!1)},data:function(){return{menuVisible:!1,menuHandler:0,logoutting:!1,nickSetting:!1}},props:{setVisible:Boolean}},Wn=zn,$n=(r("f432"),Object(sr["a"])(Wn,Mn,In,!1,null,"11302fd9",null)),Un=$n.exports,jn={methods:{clickArtboardListUseCanvas:function(){this.$store.commit("artboardListUseCanvas",!this.artboardListUseCanvas)},clickResetScene:function(){this.$store.commit("setScale",{reset:!0})},clickMultDownArtboard:function(){this.setInArtboardMultDownMode(!0)},clickGoParentFolder:function(){var t=this;setTimeout((function(){Wt(t.cloudParentFolder.id)}),100)},clickGoHome:function(){var t=this;setTimeout((function(){t.setCurArtboard(null)}),100)},clickHelper:function(t){this.$store.commit("setHelperVisible",t)}},computed:{artboardListUseCanvas:function(){return this.$store.state.artboardListUseCanvas},cloudParentFolderName:function(){var t=this.cloudParentFolder;if(!t)return null;if(0!==t.id)return t.name;var e=this.cloudName;return e||t.name},setVisible:function(){var t=!this.cloudFolderNotFound&&this.permission&&this.documentArtboards.length>0;return t},userInfoVisible:function(){return this.inCloudMode&&this.cloudNeedLogin&&!this.inArtboardMode}},components:{ScaleControl:Cn,Helper:Tn,UserInfo:Un}},Vn=jn,Gn=(r("4cbc"),Object(sr["a"])(Vn,bn,gn,!1,null,"16ab1704",null)),Hn=Gn.exports,Yn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"authority"},[r("div",{staticClass:"box"},[r("div",{staticClass:"logo"}),r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("div",{staticClass:"container"},[r("div",{staticClass:"text"},[t._v("需要输入分享码后才能访问")]),r("div",{staticClass:"input",class:{focused:t.inputFocused}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],ref:"input",attrs:{type:"text",placeholder:"请输入分享码",maxlength:"6",spellcheck:"false"},domProps:{value:t.code},on:{focus:function(e){t.inputFocused=!0},blur:function(e){t.inputFocused=!1},input:function(e){e.target.composing||(t.code=e.target.value)}}})]),r("div",{staticClass:"btns"},[r("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.onSubmit}},[t._v("\n            确定\n            "),r("input",{attrs:{type:"submit"}})])])])])])])},Xn=[],Kn={methods:{onSubmit:function(){var t=this,e=this.code.trim();if(!/^[a-zA-Z\d]{1,6}$/.test(e))return this.showTextTip("分享码不正确,分享码由1-6位的数字或字母组合而成"),void this.$refs.input.focus();var r="/api/previewer";fetch(r,{method:"post",body:"code=".concat(e,"&folderid=").concat(this.cloudCurrentFolderId),cache:"reload",credentials:"include",headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(e){e.text().then((function(r){if(200!=e.status)throw r;r=JSON.parse(r),u(r)?r.success?window.location.reload():t.showTextTip(r.errMsg):t.showTextTip("返回值格式异常")})).catch((function(e){t.showTextTip(e)}))})).catch((function(e){t.showTextTip(e)}))}},data:function(){return{inputFocused:!1,code:""}}},Zn=Kn,qn=(r("ea90"),Object(sr["a"])(Zn,Yn,Xn,!1,null,"1a643e28",null)),Jn=qn.exports,Qn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"error-data"},[r("div",{staticClass:"box"},[t._v(t._s(t.text))])])},ti=[],ei={props:{text:String}},ri=ei,ni=(r("7211"),Object(sr["a"])(ri,Qn,ti,!1,null,"380022f7",null)),ii=ni.exports,ai=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"p-index"},[r("ZoomContainer",{attrs:{type:0}}),r("MultArtboardDownload")],1)},oi=[],si=(r("c018"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.inArtboardMultDownMode&&t.exportNodeCount?r("section",{staticClass:"mult-download"},[r("div",{staticClass:"text"},[0!==t.exportNodeCount?r("Radio",{attrs:{text:"全选",selected:t.allSelected},on:{click:t.clickAllSelectBtn}}):t._e(),r("div",{staticClass:"info"},[t._v("已选中"+t._s(t.selectNodeCount)+"/"+t._s(t.exportNodeCount)+"个画板")])],1),r("div",{staticClass:"btns"},[r("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickDownSelectAll()}}},[t._v("下载")]),r("a",{staticClass:"btn-close",attrs:{href:"javascript:;"},on:{click:function(e){return t.setInArtboardMultDownMode(!1)}}})])]):t._e()}),ci=[],li=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"radio",class:{on:t.selected},on:{click:t.click}},[t.text?r("i",[t._v(t._s(t.text))]):t._e()])},ui=[],di={props:{text:String,selected:Boolean},methods:{click:function(){this.$emit("click",!this.selected)}}},hi=di,fi=Object(sr["a"])(hi,li,ui,!1,null,null,null),pi=fi.exports,mi={methods:{clickAllSelectBtn:function(t){t=!this.allSelected&&(this.exportNodeCount,!0);var e={length:0};this.documentArtboards.forEach((function(r){r.mlUserSelectDown!==t&&(r.mlUserSelectDown=t,e[r.artboard.guid]=1,e.length++)})),this.$store.commit("selectArtboardChanged",e)},clickDownSelectAll:function(){var t=this;0!==this.exportNodeCount?(this.setInOutput(!0),Fr(this.documentName,this.selectArtboards).catch((function(e){t.showTextTip(e)})).finally((function(){t.setInOutput(!1)}))):this.showTextTip("当前文件夹不存在画板")}},computed:{allSelected:function(){return 0!==this.exportNodeCount&&this.exportNodeCount===this.selectNodeCount},selectNodeCount:function(){var t=0;return this.documentArtboards.forEach((function(e){e.mlUserSelectDown&&(t+=1)})),t},selectArtboards:function(){var t=this.documentArtboards,e=[];return t.forEach((function(t){t.mlUserSelectDown&&e.push(t.artboard)})),e},exportNodeCount:function(){return this.documentArtboards.length}},components:{Radio:pi}},vi=mi,bi=(r("ed12"),Object(sr["a"])(vi,si,ci,!1,null,"6940ae64",null)),gi=bi.exports,wi=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{ref:"$info",staticClass:"zoom-container",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickZoomContainer(e)},mousedown:function(e){return t.mousedownZoomContainer(e)}}},[r("section",{ref:"$scene",staticClass:"zoom-box",style:t.zoomBoxOffset,on:{click:function(e){return e.target!==e.currentTarget?null:t.clickZoomContainer(e)}}},[t.cloudArtListMode?r("CloudModeArtboardList",{ref:"$instance",attrs:{dragging:t.dragging,scale:t.scale,sceneX:t.sceneX,sceneY:t.sceneY,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight,sceneScaleKeepX:t.sceneScaleKeepX,sceneScaleKeepY:t.sceneScaleKeepY,sceneOffsetX:t.sceneOffsetX,sceneOffsetY:t.sceneOffsetY}}):0===t.type?r("ArtboardList",{ref:"$instance",attrs:{dragging:t.dragging,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight}}):1===t.type?r("ArtboardInfo",{ref:"$instance",attrs:{dragging:t.dragging,sceneWidth:t.sceneWidth,sceneHeight:t.sceneHeight}}):t._e()],1)])},yi=[],xi=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{ref:"box",staticClass:"art-info",class:{dragging:t.dragging},style:t.style,on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu(e)}}},[r("img",{staticClass:"preview",attrs:{src:t.artboardPreviewPng}}),r("NodeItem",{attrs:{parentRect:t.curArtboard.artboard.boundsInArtboard,item:t.curArtboard.artboard,shiftKey:t.shiftKey}}),t._l(t.exportNodes,(function(t,e){return r("SliceTip",{key:e+"+"+t.guid,attrs:{node:t}})})),r("NodeInfoCurrent"),r("NodeIntersectInfo",{attrs:{width:t.rect.width,height:t.rect.height}})],2)},_i=[],ki=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visibleMax?r("div",{staticClass:"node-item-wrap",style:t.style},[t.item.mlIgnoreEvent?t._e():r("div",{staticClass:"node-item",on:{click:function(e){return e.stopPropagation(),t.clickNode(e)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterNode(e)},mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveNode(e)}}}),t._l(t.children,(function(e,n){return r("NodeItem",{key:n+"_"+e.guid,attrs:{parentRect:t.item.boundsInArtboard,item:e,shiftKey:t.shiftKey}})}))],2):t.visibleMin?r("div",{staticClass:"node-item-wrap on",style:t.style,on:{click:function(e){return e.stopPropagation(),t.clickNode(e)},mouseenter:function(e){return e.stopPropagation(),t.mouseEnterNode(e)},mouseleave:function(e){return e.stopPropagation(),t.mouseLeaveNode(e)}}}):t._e()},Ci=[],Si={name:"NodeItem",methods:{mouseLeaveNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(null)},mouseEnterNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(this.item)},getNodesFromPoint:function(t){var e=t.target;if(e){var r,n=t.offsetX;null==n?(n=t.layerX,r=t.layerY):r=t.offsetY;var i=this.scale;n/=i,r/=i;var a="".concat(n,"_").concat(r),o=this.cachePointNodes;if(o.key===a)return o.nodes;var s=this.item.boundsInArtboard,c=(new H).set(s.x+n,s.y+r,1,1),l=this.curArtboard.childs,u=[];return l.forEach((function(t){if(t&&t.visible&&!t.mlIgnoreEvent){var e=t.boundsInArtboard;if(e.width<=2||e.height<=2){var r=e,n=r.x,i=r.y,a=r.width,o=r.height;e=(new H).set(n,i,a,o),e.width<=2&&(e.width+=2,e.x-=1),e.height<=2&&(e.height+=2,e.y-=1)}tt(e,c)&&u.push(t)}})),o.key=a,o.nodes=u,u}},clickNode:function(t){var e=this.item;if(this.inMultDownMode)e.markedForExport&&(e.mlUserSelectDown=!e.mlUserSelectDown);else{var r=this.curNode,n=!1;if(null!=r&&this.shiftKey&&(r=this.enterNode,n=!0),null!=r&&this.clickedNode===e&&Math.abs(this.clickPageX-t.pageX)<2&&Math.abs(this.clickPageY-t.pageY)<2){var i=this.getNodesFromPoint(t),a=i.findIndex((function(t){return t===r}));if(-1===a)a=i.length-1;else{var o=r.boundsInArtboard;while(a--&&a>=0){var s=i[a],c=s.boundsInArtboard;if(!X(c,o)||s.markedForExport||1===s.types.Artboard||1!==s.types.GraphicNode&&1!==s.types.Group&&1!==s.types.SymbolMaster&&1!==s.types.SymbolInstance||s.fillEnabled||s.strokeEnable||s.shadow||s.innerShadow)break}a<0&&(a=i.length-1)}var l=i[a];r=l||e}else r=e;this.clickPageX=t.pageX,this.clickPageY=t.pageY,n?this.setEnterNode(r):this.setCurNode(r),this.setClickedNode(e)}}},computed:{children:function(){return this.item.children||[]},visibleMax:function(){return this.visible&&this.children.length>0},visibleMin:function(){return!this.visibleMax&&this.visible&&!this.item.mlIgnoreEvent},visible:function(){var t=this.item;return!!t&&(!!t.visible&&!t.mlIgnoreLeftSide)},scale:function(){return this.scaleArtboard},style:function(){var t=this.item.boundsInArtboard,e=this.parentRect,r=this.scale,n=Math.ceil(Math.max(1,t.width*r)),i=Math.ceil(Math.max(1,t.height*r)),a=Math.round((t.y-e.y)*r),o=Math.round((t.x-e.x)*r);return n<3&&(n+=2,o-=1),i<3&&(i+=2,a-=1),{top:a+"px",left:o+"px",width:n+"px",height:i+"px"}}},props:{item:Object,shiftKey:Boolean,parentRect:Object},data:function(){return{clickPageX:0,clickPageY:0,cachePointNodes:{nodes:null,key:""}}}},Ai=Si,Ei=(r("28dc"),Object(sr["a"])(Ai,ki,Ci,!1,null,"66ba550b",null)),Ni=Ei.exports,Pi=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visible?r("div",{staticClass:"node-info-current",class:{"only-enter":null==t.curNode},style:t.showNodeStyle},[t.curNode?t._l(t.borRadios,(function(e){return r("div",{key:e,class:["bor bor-"+e],style:t.borderStyle})})):t._e(),t.showNodeSize?[r("div",{staticClass:"item width",style:t.nodeWidthStyle},[r("span",[t._v(t._s(t.nodeRect.showWidth))])]),r("div",{staticClass:"item height",style:t.nodeHeightStyle},[r("span",[t._v(t._s(t.nodeRect.showHeight))])])]:t._e()],2):t._e()},Ti=[],Mi={computed:{showNodeSize:function(){var t=this.curNode,e=this.enterNode;return t?!e||e===t:!!e},nodeRect:function(){if(!this.showNodeSize)return{width:0,height:0,top:0,left:0};var t=this.showNode,e=t.boundsInArtboard,r=this.scaleArtboard,n=t.markedForExport,i={width:Math.ceil(e.width*r),height:Math.ceil(e.height*r),left:Math.floor(e.x*r),top:Math.floor(e.y*r),showWidth:this.getCalcPlatformValue(e.width,{markedForExport:n}),showHeight:this.getCalcPlatformValue(e.height,{markedForExport:n})};return i},nodeWidthStyle:function(){var t=this.nodeRect;return{left:Math.ceil(t.width/2)+"px"}},nodeHeightStyle:function(){var t=this.nodeRect;return{left:t.width+1+"px",top:Math.ceil(t.height/2)+"px"}},borderStyle:function(){var t=this.borderWidth;return"width:".concat(t,";height:").concat(t,";")},borderWidth:function(){var t=2.3*this.scaleArtboard+3;return t=Math.round(t),t+"px"},borRadios:function(){return[0,1,2,3]},visible:function(){if(this.inMultDownMode)return!1;var t=this.showNode;return!!t},showNode:function(){var t=this.curNode;return t||(t=this.enterNode),t},showNodeStyle:function(){var t=this.showNode;if(t){var e=t.boundsInArtboard,r=this.scaleArtboard;return{top:Math.floor(e.y*r)+"px",left:Math.floor(e.x*r)+"px",width:Math.ceil(Math.max(1,e.width)*r)+"px",height:Math.ceil(Math.max(1,e.height)*r)+"px"}}}}},Ii=Mi,Oi=(r("a58b"),Object(sr["a"])(Ii,Pi,Ti,!1,null,"89c9f896",null)),Li=Oi.exports,Di=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visible?r("section",{staticClass:"node-info"},[r("div",{staticClass:"enter-item-box",style:t.enterNodeStyle}),t._l(t.markLines,(function(e){return r("div",{key:e.id,staticClass:"item",class:{horizintal:e.isHorizintal,vertical:!e.isHorizintal,dashed:e.isDashed},style:t.getMarkStyle(e)},[e.text?r("span",[t._v(t._s(e.text))]):t._e()])}))],2):t._e()},Ri=[],Fi={methods:{getMarkStyle:function(t){var e=this.scale,r=this.markScale;0===r&&(r=1),e/=r;var n,i,a=t.rect,o={top:Math.floor(a.top*e)+"px",left:Math.floor(a.left*e)+"px"};return t.isHorizintal?(n="height",i="width"):(n="width",i="height"),o[n]=a[n]+"px",o[i]=Math.ceil(a[i]*e)+"px",o},getMarkLines:function(){var t=this;if(!this.visible)return[];var e=this.curNode,r=this.enterNode,n=e.boundsInArtboard,i=r.boundsInArtboard,a=(new H).set(n.x,n.y,n.width,n.height),o=(new H).set(i.x,i.y,i.width,i.height),s={width:this.getCalcValue(this.width),height:this.getCalcValue(this.height)},c=e.markedForExport;a.x=this.getCalcValue(a.x),a.y=this.getCalcValue(a.y),a.width=this.getCalcValue(a.width,c),a.height=this.getCalcValue(a.height,c);var l=r.markedForExport;return o.x=this.getCalcValue(o.x),o.y=this.getCalcValue(o.y),o.width=this.getCalcValue(o.width,l),o.height=this.getCalcValue(o.height,l),this.markScale=this.getCalcRectScale(),Q(a,o,s,(function(e){return t.getCalcUnitTemplateValue(e)}))}},watch:{curNode:function(){this.markLines=this.getMarkLines()},enterNode:function(){this.markLines=this.getMarkLines()},visible:function(t){t&&(this.markLines=this.getMarkLines())}},computed:{enterNodeStyle:function(){var t=this.enterNode;if(t){var e=t.boundsInArtboard,r=this.scaleArtboard;return{top:Math.floor(e.y*r)+"px",left:Math.floor(e.x*r)+"px",width:Math.ceil(Math.max(1,e.width)*r)+"px",height:Math.ceil(Math.max(1,e.height)*r)+"px"}}},scale:function(){return this.scaleArtboard},visible:function(){return!this.inMultDownMode&&null!=this.curNode&&null!=this.enterNode&&this.enterNode!==this.curNode}},props:{width:Number,height:Number},data:function(){return{markScale:1,markLines:[]}}},Bi=Fi,zi=(r("7058"),Object(sr["a"])(Bi,Di,Ri,!1,null,"37c6e157",null)),Wi=zi.exports,$i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.inMultDownMode&&t.node.mlUserSelectDown?r("div",{staticClass:"slice-tip",class:{out:!t.inArtboard},style:t.style,on:{click:function(e){e.stopPropagation(),t.node.mlUserSelectDown=!1}}},[r("div",{staticClass:"name",attrs:{title:"点击取消选择\n"+t.nodeName}},[t._v("\n    "+t._s(t.nodeName)+"\n  ")])]):t.inMultDownMode||t.inArtboard?r("div",{staticClass:"slice-tip-min",class:{off:t.curNode==t.node||t.enterNode==t.node,out:!t.inArtboard},style:t.style,on:{click:t.clickSliceTipMin}}):t._e()},Ui=[],ji={methods:{clickSliceTipMin:function(){(this.inMultDownMode||this.inArtboard)&&(this.node.mlUserSelectDown=!0)}},computed:{nodeName:function(){return Rt(this.node)},style:function(){var t=this.node.boundsInArtboard,e=this.scaleArtboard;return{top:Math.floor(t.y*e)+"px",left:Math.floor(t.x*e)+"px",width:Math.ceil(Math.max(1,t.width)*e)+"px",height:Math.ceil(Math.max(1,t.height)*e)+"px"}},inArtboard:function(){var t=this.node.boundsInArtboard,e=tt(t,this.curArtboard.artboard.boundsInArtboard);return e}},props:{node:Object}},Vi=ji,Gi=(r("9470"),Object(sr["a"])(Vi,$i,Ui,!1,null,"52bd1120",null)),Hi=Gi.exports,Yi={components:{NodeItem:Ni,NodeIntersectInfo:Wi,NodeInfoCurrent:Li,SliceTip:Hi},methods:{onContextmenu:function(t){var e=this,r=t.pageX,n=t.pageY,i=this.curArtboard;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:r,y:n,artboard:i})}))},clickZoomContainer:function(){this.setCurNode(null)},canEmitEvent:function(){return!0},onSceneResize:function(t,e,r){if(!this.initScale||r){var n=this.rect;if(n&&0!==t&&0!==e){this.initScale=!0;var i=n.width/t,a=n.height/e,o=Math.max(i,a);0!==o&&this.setScaleArtboard(.92/o)}}},quickKey:function(t){this.shiftKey=t.shiftKey}},computed:{exportVisible:function(){return this.inMultDownMode&&this.exportNodes.length>0},exportNodes:function(){var t=this.curArtboard;if(!t)return[];var e=t.exportNodes;return e||[]},rect:function(){var t=this.artboard,e=t.boundsInArtboard,r=e.x+e.width,n=e.y+e.height;return(new H).set(0,0,r,n)},artboard:function(){return this.curArtboard.artboard},artboardPreviewPng:function(){var t,e=this.inCloudMode,r=this.artboard;return e&&this.isSupportWebp&&(t=r.artboardPreviewWebp,t)?t:(t=r.artboardPreviewPng,e?t:"".concat(t,"?").concat(r.mlOutputTime))},isSupportWebp:function(){return this.$store.state.isSupportWebp===Xe.Support},style:function(){var t=this.artboard.boundsInArtboard,e=this.scale;return{width:Math.ceil(t.width*e)+"px",height:Math.ceil(t.height*e)+"px"}},scale:function(){return this.scaleArtboard}},watch:{curArtboard:function(){this.initScale=!1}},data:function(){return{imgErrored:!1,previewImage:null,shiftKey:!1,initScale:!1}},props:{sceneWidth:Number,sceneHeight:Number,dragging:Boolean},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKey);var t=this.previewImage;t&&(t.src=null,t=null)}},Xi=Yi,Ki=(r("4210"),Object(sr["a"])(Xi,xi,_i,!1,null,"2f55eade",null)),Zi=Ki.exports,qi=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{ref:"box",staticClass:"art-list",class:{dragging:t.dragging},style:t.style},[r("div",{staticClass:"box-size",style:t.boxSize}),t.singleDocumentMode?t._l(t.documentArtboards,(function(e){return r("ArtboardListItem",{key:e.artboard.guid,attrs:{item:e,maxRect:t.rect}})})):t._l(t.documents,(function(e){return r("div",{key:e.docGuid,staticClass:"art-doc"},t._l(e.arts,(function(t){return r("ArtboardListItem",{key:e.docGuid+t.artboard.guid,attrs:{item:t,maxRect:{x:e.maxRect.x-e.rect.x,y:e.maxRect.y-e.rect.y}}})})),1)}))],2)},Ji=[],Qi=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{ref:"$item",staticClass:"item",class:{on:t.selected},style:t.style,on:{dblclick:function(e){return t.dlbClickArtboard()},click:t.clickArtboard}},[r("div",{staticClass:"info",domProps:{textContent:t._s(t.artboard.name)}}),r("div",{staticClass:"img",style:t.imgStyle,attrs:{title:t.goInfoTip},on:{contextmenu:function(e){return e.preventDefault(),t.onContextmenu(e)}}},[t.errorText?r("div",{staticClass:"error"},[t._v(t._s(t.errorText))]):r("img",{attrs:{src:t.artboardPreviewPng}})])])},ta=[],ea={methods:{onContextmenu:function(t){var e=this,r=t.pageX,n=t.pageY,i=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:r,y:n,artboard:i})}))},dlbClickArtboard:function(){clearTimeout(this.tipHandle),this.inArtboardMultDownMode||(this.hideTextTip(),this.setCurArtboard(this.item))},clickArtboard:function(){var t=this;clearTimeout(this.tipHandle),this.inArtboardMultDownMode?this.item.mlUserSelectDown=!this.item.mlUserSelectDown:this.tipHandle=setTimeout((function(){t.showTextTip(t.goInfoTip2,7)}),200)},loadedImage:function(t){if(null==t)return this.imgErrored=!0,void(this.imgLoaded=!1);this.imgErrored=!1,this.imgLoaded=!0},loadImage:function(){var t=this.artboardPreviewPng;t&&(this.imgErrored=!1,this.imgLoaded=!1,lt.add(t,this.loadedImage))}},beforeDestroy:function(){clearTimeout(this.tipHandle),lt.remove(this.artboardPreviewPng,this.loadedImage)},created:function(){this.loadImage()},watch:{artboardPreviewPng:function(t,e){this.imgErrored=!1,lt.remove(e,this.loadedImage),this.loadImage()}},computed:{errorText:function(){return this.imgErrored?"画板预览图加载失败":this.imgLoaded?null:"预览图加载中..."},outlineWidth:function(){if(this.inArtboardMultDownMode)return Math.ceil(3/this.scaleList)+"px"},selected:function(){return this.inArtboardMultDownMode&&this.item.mlUserSelectDown},goInfoTip2:function(){var t="",e=this.item.artboard;return this.inCloudMode&&(t="".concat(e.updaterName," 提交于 ").concat(e.updateTimeStr,",")),"".concat(t,"双击查看 ").concat(e.name," 标注详情")},goInfoTip:function(){var t="",e=this.item.artboard;return this.inCloudMode&&(t="".concat(e.updaterName," 提交于 ").concat(e.updateTimeStr,", ")),"".concat(t,"双击查看标注详情")},style:function(){var t=this.artboard.boundsInParent,e=this.maxRect,r=Math.floor(t.y-e.y),n=Math.floor(t.x-e.x),i=Math.ceil(t.width),a=Math.ceil(t.height+40);return"top:".concat(r,"px;left:").concat(n,"px;width:").concat(i,"px;height:").concat(a,"px;")},imgStyle:function(){var t=this.artboard.boundsInParent;return"height:".concat(t.height,"px;outline-width:").concat(this.outlineWidth)},artboardPreviewPng:function(){var t,e=this.inCloudMode,r=this.artboard;return e&&this.isSupportWebp&&(t=r.artboardPreviewWebp,t)?t:(t=r.artboardPreviewPng,e?t:"".concat(t,"?").concat(r.mlOutputTime))},isSupportWebp:function(){return this.$store.state.isSupportWebp===Xe.Support},artboard:function(){return this.item.artboard}},data:function(){return{tipHandle:0,imgErrored:!1,imgLoaded:!1}},props:{item:Object,maxRect:Object}},ra=ea,na=(r("47e2"),Object(sr["a"])(ra,Qi,ta,!1,null,"1f5e1a78",null)),ia=na.exports,aa={methods:{quickKey:function(t){var e=t.keyCode||t.which;switch(e){case 112:case 113:case 114:var r=e-111;this.showTextTip("快捷键[F".concat(r,"]仅在画板详情面板可用,您当前处于画板列表面板,双击画板可进入详情")),t.preventDefault();break}},onSceneResize:function(t,e,r){if(!this.initScale||r){var n=this.rect;if(n&&0!==t&&0!==e){this.initScale=!0;var i=n.width/t,a=n.height/e,o=Math.max(i,a);if(0!==o){o=.96/o;var s=this.scale;this.setScaleList(o),this.resetScaleSceneCenter(o,s)}}}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},created:function(){window.addEventListener("keydown",this.quickKey)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey)},data:function(){return{initScale:!1}},computed:{rect:function(){var t=40;if(this.singleDocumentMode){var e=this.documents[0];return(new H).set(e.maxRect.x,e.maxRect.y,e.maxRect.width,e.maxRect.height+t)}var r=[];this.documents.forEach((function(t){r.push({artboard:{boundsInParent:t.rect}})}));var n=bt(r);return n.height+=t,n},scale:function(){return this.scaleList},style:function(){var t=this.rect;if(t)return{transform:"scale(".concat(this.scale,") translate3d(0,0,0)")}},boxSize:function(){var t=this.rect;if(t)return{width:t.width+"px",height:t.height+"px"}}},components:{ArtboardListItem:ia},props:{sceneWidth:Number,sceneHeight:Number,dragging:Boolean}},oa=aa,sa=(r("2ca0"),Object(sr["a"])(oa,qi,Ji,!1,null,"0ce355c0",null)),ca=sa.exports,la=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"canvas-box",attrs:{title:t.mouseenterArtboardTitle},on:{mousemove:t.onMouseMove,mouseleave:t.onMouseLeave,dblclick:t.dblClickCanvas,click:t.clickCanvas,contextmenu:function(e){return e.preventDefault(),t.onContextmenu(e)}}},[r("canvas",{ref:"canvas",style:t.canvasStyle,attrs:{width:t.sceneWidth*t.canvasScale,height:t.sceneHeight*t.canvasScale}}),t.mouseenterArtboardStyle?r("div",{staticClass:"artboard-hover",style:t.mouseenterArtboardStyle}):t._e()])},ua=[],da={methods:{onContextmenu:function(t){var e=this,r=this.mouseenterArtboard;if(r){var n=t.pageX,i=t.pageY;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:n,y:i,artboard:r.artboard})}))}},dblClickCanvas:function(){var t=this.mouseenterArtboard,e=this.inArtboardMultDownMode;!e&&t&&(clearTimeout(this.tipHandle),this.hideTextTip(),this.setCurArtboard(t.artboard))},clickCanvas:function(){var t=this,e=Math.abs(Date.now()-this.draggingTime);if(!(e<66)){clearTimeout(this.tipHandle);var r=this.mouseenterArtboard,n=this.inArtboardMultDownMode;if(r){if(n)return r.artboard.mlUserSelectDown=!r.artboard.mlUserSelectDown,void this.draw(r);var i=r.artboard;this.tipHandle=setTimeout((function(){t.showTextTip(t.goInfoTip2(i),7)}),200)}}},goInfoTip2:function(t){var e="";return t=t.artboard,this.inCloudMode&&(e="".concat(t.updaterName," 提交于 ").concat(t.updateTimeStr,",")),"".concat(e,"双击查看 ").concat(t.name," 标注详情")},onMouseMove:function(t){var e=this.mouseLoc;e.x=t.layerX,e.y=t.layerY,null==e.x&&(e.x=t.pageX-this.sceneOffsetX,e.y=t.pageY-this.sceneOffsetY)},onMouseLeave:function(){var t=this.mouseLoc;t.x=t.y=-10},quickKey:function(t){var e=t.keyCode||t.which;switch(e){case 112:case 113:case 114:var r=e-111;this.showTextTip("快捷键[F".concat(r,"]仅在画板详情面板可用,您当前处于画板列表面板,双击画板可进入详情")),t.preventDefault();break}},draw:function(t,e){var r=this;if(t||e)requestAnimationFrame((function(){r._draw(t,e)}));else{var n=this.sceneInfo,i=this.sceneWidth,a=this.sceneHeight,o=this.inArtboardMultDownMode,s=n.sceneWidth!==i||n.sceneHeight!==a?1:0;if(s||o!=n.inArtboardMultDownMode)return clearTimeout(this.sceneDelayHandle),cancelAnimationFrame(this.handle),void(this.handle=requestAnimationFrame((function(){r._draw(t)})));clearTimeout(this.sceneDelayHandle),this.sceneDelayHandle=setTimeout((function(){cancelAnimationFrame(r.handle),r.handle=requestAnimationFrame((function(){r._draw(t)}))}),83)}},_draw:function(t,e){var r=this,n=this.sceneX,i=this.sceneY,a=this.scale,o=this.sceneWidth,s=this.sceneHeight,c=this.sceneInfo,l=this.inArtboardMultDownMode;if(c.sceneX=n,c.sceneY=i,c.scale=a,c.sceneWidth=o,c.sceneHeight=s,c.inArtboardMultDownMode=l,0!==a&&0!==o&&0!==s){var u=this.drawInfo,d=!t,h=!(u.scale===a&&u.sceneX===n&&u.sceneY===i&&u.sceneWidth===o&&u.sceneHeight===s&&u.inArtboardMultDownMode===l);if(!d||h||e){var f=this.$refs.canvas;if(f){u.scale=a,u.sceneX=n,u.sceneY=i,u.sceneWidth=o,u.sceneHeight=s,u.inArtboardMultDownMode=l;var p,m=f.getContext("2d"),v=!1;d||h?(m.clearRect(0,0,this.getCanvasDrawNum(o),this.getCanvasDrawNum(s)),p=this.inViewerArtboards,v=!0):p=[t];var b=(new H).set(-n,-i,o,s),g=(new H).set(b.x/a,b.y/a,b.width/a,b.height/a),w=Math.max(2,Math.min(6,Math.ceil(3*this.scale)));m.strokeStyle="#1886ff",m.lineWidth=this.getCanvasDrawNum(w),p.forEach((function(t){r._drawArtboard(m,b,g,a,t,v,l,w)}))}}}},_drawArtboardBackground:function(t,e,r,n,i){var a=Math.round(this.titleHeight*i);r||t.clearRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y-a),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height+a)),t.fillStyle="#a6a9b41a",t.fillRect(this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(e.y),this.getCanvasDrawNum(e.width),this.getCanvasDrawNum(e.height)),t.fillStyle="#a6a9b4",t.textAlign="left",t.textBaseline="bottom",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(2,9*i),22)),"px Arial"),n&&t.fillText(n,this.getCanvasDrawNum(e.x),this.getCanvasDrawNum(Math.round(e.y-5*i)),this.getCanvasDrawNum(e.width))},_drawArtboardText:function(t,e,r){t.textAlign="center",t.font="".concat(this.getCanvasDrawNum(Math.min(Math.max(6,r.width/15),36)),"px Arial"),t.fillText(e,this.getCanvasDrawNum(Math.floor(r.x+r.width/2)),this.getCanvasDrawNum(Math.ceil(r.y+r.height/2)),this.getCanvasDrawNum(r.width))},_drawArtboard:function(t,e,r,n,i,a,o,s){var c=tt(i.rect,r);if(c){var l=Object.assign({},i.rect);l.x=Math.floor(l.x*n-e.x),l.y=Math.floor(l.y*n-e.y),l.width=Math.round(l.width*n),l.height=Math.round(l.height*n),this._drawArtboardBackground(t,l,a,i.artboard.artboard.name,n);var u=i.miniImgSize,d=i.miniImg,h=i.img,f=this.isDrawMiniImg(i);if(f)t.drawImage(d,0,0,u.width,u.height,this.getCanvasDrawNum(l.x),this.getCanvasDrawNum(l.y),this.getCanvasDrawNum(l.width),this.getCanvasDrawNum(l.height));else if(i.loaded)if(h){var p=i.imgSize;t.drawImage(h,0,0,p.width,p.height,this.getCanvasDrawNum(l.x),this.getCanvasDrawNum(l.y),this.getCanvasDrawNum(l.width),this.getCanvasDrawNum(l.height))}else this._drawArtboardText(t,"预览图加载失败",l);else this._drawArtboardText(t,"画板预览图加载中...",l);if(o&&i.artboard.mlUserSelectDown){var m=Math.round(s/2);t.strokeRect(this.getCanvasDrawNum(l.x+m),this.getCanvasDrawNum(l.y+m),this.getCanvasDrawNum(l.width-s),this.getCanvasDrawNum(l.height-s))}}},getCanvasDrawNum:function(t){return Math.round(t*this.canvasScale)},isDrawMiniImg:function(t){return t.miniLoaded&&t.loaded&&t.miniImg&&t.img&&2*t.miniImgSize.width/3>this.scale*t.rect.width},imgLoaded:function(t,e){if(e.loaded=!0,e.img=t,t){var r=e.imgSize;r.width=t.width,r.height=t.height;var n=this.isDrawMiniImg(e);if(n&&!e.miniLoaded)return}this.draw(e)},miniImgLoaded:function(t,e){if(e.miniLoaded=!0,e.miniImg=t,t){var r=e.miniImgSize;r.width=t.width,r.height=t.height;var n=this.isDrawMiniImg(e);if(!n&&e.loaded&&e.img)return}this.draw(e)},onSceneResize:function(t,e,r){if(!this.initScale||r){var n=this.rect;if(n&&0!==t&&0!==e){this.initScale=!0;var i=n.width/t,a=n.height/e,o=Math.max(i,a);if(0!==o){o=.96/o;var s=this.scale;this.setScaleList(o),this.resetScaleSceneCenter(o,s)}}}},resetScaleSceneCenter:function(t,e){e!==this.scale&&this.$store.commit("resetScaleSceneCenter",{newScale:t,oldScale:e})}},computed:{selectNodeCount:function(){var t=0;return this.documentArtboards.forEach((function(e){e.mlUserSelectDown&&(t+=1)})),t},mouseenterArtboardTitle:function(){var t=this.mouseenterArtboard;if(t){var e="",r=t.artboard.artboard;return this.inCloudMode&&(e="".concat(r.updaterName," 提交于 ").concat(r.updateTimeStr,", ")),"".concat(e,"双击查看标注详情")}},mouseenterArtboardStyle:function(){var t=this.canvasStyle;if(t)return null;var e=this.mouseenterArtboard;if(!e)return null;var r=this.sceneX,n=this.sceneY,i=this.scale,a=e.rect,o={};o.left=Math.floor(a.x*i+r)+"px",o.top=Math.floor(a.y*i+n)+"px",o.width=Math.ceil(a.width*i)+"px",o.height=Math.ceil(a.height*i)+"px";var s=Math.min(20,Math.max(5,Math.round(20*i)));return o.boxShadow="0 0 ".concat(s,"px #3d7eaf99"),o},canvasStyle:function(){var t=this.sceneInfo;if(0!==t.scale){var e=this.sceneX,r=this.sceneY,n=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=Math.round(e-t.sceneX),s=Math.round(r-t.sceneY),c=n/t.scale;if(0!==o||0!==s||1!==c||t.sceneWidth!==i||t.sceneHeight!==a){var l={transform:""};return 1!==c?(o=t.sceneX/t.scale*n-e,s=t.sceneY/t.scale*n-r,o=-Math.round(o),s=-Math.round(s),l.transform+="translate3d(".concat(o,"px, ").concat(s,"px, 0px) scale(").concat(c.toFixed(5),")")):0===o&&0===s||(l.transform+=" translate3d(".concat(o,"px, ").concat(s,"px, 0px)")),l}}},rect:function(){var t=this.titleHeight;if(this.singleDocumentMode){var e=this.documents[0];return(new H).set(0,0-t,e.maxRect.width,e.maxRect.height+t)}var r=[];this.documents.forEach((function(t){r.push({artboard:{boundsInParent:t.rect}})}));var n=bt(r);return n.y-=t,n.height+=t,n},isSupportWebp:function(){return this.$store.state.isSupportWebp===Xe.Support},mouseenterArtboard:function(){var t=this.mouseLoc,e=this.scale,r=this.sceneX,n=this.sceneY,i=this.inViewerArtboards;if(0===i.length)return null;var a=(new H).set((t.x-r)/e,(t.y-n)/e,1,1);return i.find((function(t){return tt(t.rect,a)}))},inViewerArtboards:function(){var t=[],e=this.sceneX,r=this.sceneY,n=this.scale,i=this.sceneWidth,a=this.sceneHeight,o=this.artboards;if(0===n||0===i||0===a)return t;var s=(new H).set(-e/n,-r/n,i/n,a/n);return o.forEach((function(e){var r=tt(e.rect,s);r&&t.push(e)})),t},artboards:function(){var t=this,e=[],r=this.documents;if(!c(r))return e;var n=this.isSupportWebp;return r.forEach((function(r){var i=r.maxRect.x-r.rect.x,a=r.maxRect.y-r.rect.y,o=r.arts;c(o)&&o.forEach((function(r){var o=r.artboard;if(o){var s,c=o.boundsInParent;n&&(s=o.pathPreviewWebp),s||(s=o.pathPreview);var l=o.pathPreviewMini,u={rect:{x:Math.floor(c.x-i),y:Math.floor(c.y-a),width:Math.ceil(c.width),height:Math.ceil(c.height)},imgSrc:s,imgSize:{width:0,height:0},img:null,miniImgSrc:l,miniImgSize:{width:0,height:0},miniImg:null,miniLoaded:!1,loaded:!1,artboard:r};lt.add(s,t.imgLoaded,u),lt.add(l,t.miniImgLoaded,u),e.push(u)}}))})),e},selectArtboardChanged:function(){return this.$store.state.selectArtboardChanged}},watch:{selectArtboardChanged:function(t){var e=this;if(t&&0!==t.length)if(t.length>10)this.draw(null,!0);else{var r=this.inViewerArtboards;r.forEach((function(r){var n=r.artboard.artboard.guid;t[n]&&e.draw(r)}))}},dragging:function(){this.draggingTime=Date.now()},artboards:function(t,e){var r=this;c(e)&&e.forEach((function(t){lt.remove(t.imgSrc,r.imgLoaded,t),lt.remove(t.miniImgSrc,r.miniImgLoaded,t),t.img=null,t.loaded=!1}))},scale:function(){this.draw()},sceneX:function(){this.draw()},sceneY:function(){this.draw()},sceneWidth:function(){this.draw()},sceneHeight:function(){this.draw()},inArtboardMultDownMode:function(){this.draw()}},data:function(){return{canvasScale:ie(),mouseLoc:{x:-10,y:-10},drawInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0},sceneInfo:{sceneX:0,sceneY:0,scale:0,sceneWidth:0,sceneHeight:0,id:0},sceneDelayHandle:-1,titleHeight:40,initScale:!1,handle:0,context:null,useOffscreen:!1,worker:null,workerInited:!1,tipHandle:0,draggingTime:0}},beforeDestroy:function(){o&&console.log("cloudmode.canvas.beforeDestroy"),clearTimeout(this.tipHandle),window.removeEventListener("keydown",this.quickKey)},created:function(){o&&(console.log("cloudmode.canvas.created"),window.cloudModeInstance=this),window.addEventListener("keydown",this.quickKey)},props:{scale:Number,sceneX:Number,sceneY:Number,sceneWidth:Number,sceneHeight:Number,dragging:Boolean,sceneScaleKeepX:Number,sceneScaleKeepY:Number,sceneOffsetX:Number,sceneOffsetY:Number}},ha=da,fa=(r("d0ac"),Object(sr["a"])(ha,la,ua,!1,null,"6bbf6cae",null)),pa=fa.exports,ma={passive:!1},va={passive:!1,capture:!0},ba={x:0,y:0,sceneX:0,sceneY:0},ga={components:{ArtboardInfo:Zi,ArtboardList:ca,CloudModeArtboardList:pa},created:function(){var t=this;window.addEventListener("mousewheel",this.mouseWheel,ma),window.addEventListener("DOMMouseScroll",this.mouseWheel,ma),window.addEventListener("resize",this.resize,ma),this.$nextTick((function(){(1===t.type||t.allArtboardLoadChecked)&&(t.resize(),t.resetSceneLocation())}))},beforeDestroy:function(){var t=document.documentElement;t.removeEventListener("mousemove",this.mouseMove,va),t.removeEventListener("mouseup",this.mouseUp,va),window.removeEventListener("mousewheel",this.mouseWheel,ma),window.removeEventListener("DOMMouseScroll",this.mouseWheel,ma),window.removeEventListener("resize",this.resize,ma)},watch:{resetScaleSceneCenter:function(t){var e,r;t&&(e=Math.round(this.sceneOffsetX+this.sceneWidth/2),r=Math.round(this.sceneOffsetY+this.sceneHeight/2),this.resetScaleScene(e,r,t.oldScale,t.newScale))},curArtboard:function(t){null==t?0===this.type&&this.resetSceneLocation():1===this.type&&(this.sceneX=this.sceneY=0,this.resize(!0))},resetList:function(){0===this.type&&this.resetSceneLocation()},resetArtboard:function(){1===this.type&&this.resetSceneLocation()},allArtboardLoadChecked:function(t){0===this.type&&t&&this.resize()}},computed:{artboardListUseCanvas:function(){return this.$store.state.artboardListUseCanvas},resetScaleSceneCenter:function(){return this.$store.state.resetScaleSceneCenter},cloudArtListMode:function(){return 0===this.type&&this.inCloudMode&&this.artboardListUseCanvas},zoomBoxOffset:function(){return this.cloudArtListMode?null:{transform:"translate3d(".concat(this.sceneX,"px,").concat(this.sceneY,"px,1px)")}},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},scale:function(){return 0===this.type?this.scaleList:this.scaleArtboard},resetList:function(){return this.$store.state.scale.resetList},resetArtboard:function(){return this.$store.state.scale.resetArtboard}},data:function(){return{sceneX:0,sceneY:0,sceneWidth:0,sceneHeight:0,sceneOffsetX:0,sceneOffsetY:0,dragging:!1,sceneScaleKeepX:0,sceneScaleKeepY:0}},props:{type:Number},methods:{resetSceneLocation:function(){if(this.resize(!0),this.sceneX=this.sceneY=0,this.cloudArtListMode){var t=this.childRect();if(t){var e=this.scale;this.sceneX=-(t.width/2+t.x/2)*e+this.sceneWidth/2,this.sceneY=-(t.height/2+t.y/2)*e+this.sceneHeight/2}}},mouseMove:function(t){t.preventDefault();var e=t.clientX-ba.x,r=t.clientY-ba.y;this.sceneX=Math.round(ba.sceneX+e),this.sceneY=Math.round(ba.sceneY+r),!this.dragging&&(Math.abs(e)>=2||Math.abs(r)>=2)&&(this.dragging=!0)},mouseUp:function(t){t.preventDefault(),this.dragging=!1;var e=document.documentElement;e.removeEventListener("mousemove",this.mouseMove,va),e.removeEventListener("mouseup",this.mouseUp,va)},mousedownZoomContainer:function(t){if(0===t.button){ba.x=t.clientX,ba.y=t.clientY,ba.sceneX=this.sceneX,ba.sceneY=this.sceneY;var e=document.documentElement;e.addEventListener("mousemove",this.mouseMove,va),e.addEventListener("mouseup",this.mouseUp,va)}},setScale:function(t){t>.92&&t<1.08&&(t=1),0===this.type?this.setScaleList(t):this.setScaleArtboard(t)},clickZoomContainer:function(t){var e=this.$refs.$instance;if(e){var r=e.clickZoomContainer;r&&r(t)}},inBox:function(t){var e=this.$refs.$info;if(!e)return!0;while(null!=t){if(t===e)return!0;t=t.parentNode}return!1},canEmitEvent:function(t,e){var r=t.target;e.target=r;var n=this.$refs.$instance;if(!n)return!1;var i=n.canEmitEvent;return!(i&&!i(e))&&(!!e.isScale||this.inBox(r))},childRect:function(){var t=this.$refs.$instance;if(t){var e=t.rect;return e?e.toJSON():null}},canEmitWindowEvent:function(){switch(this.type){case 0:if(this.inArtboardMode)return!1;break;case 1:if(!this.inArtboardMode)return!1;break}return!0},resize:function(t){if(this.canEmitWindowEvent()){var e=!0===t,r=this.$refs.$info.getBoundingClientRect();this.sceneWidth=r.width,this.sceneHeight=r.height,this.sceneOffsetX=r.left,this.sceneOffsetY=r.top;var n=this.$refs.$instance;if(n){var i=n.onSceneResize;i&&i(this.sceneWidth,this.sceneHeight,e)}}},getBoxLocation:function(t,e,r,n){var i=0,a=0,o=n.width,s=n.height,c=(new H).set(this.sceneOffsetX+this.sceneX,this.sceneOffsetY+this.sceneY,this.sceneWidth,this.sceneHeight);if(this.cloudArtListMode)return t-=this.sceneOffsetX,e-=this.sceneOffsetY,i=this.sceneX,a=this.sceneY,t-=i,e-=a,o*=r,s*=r,{x:t/o,y:e/s};o*=r,s*=r,i=c.x,a=c.y,i+=c.width/2,a+=c.height/2,i-=o/2,a-=s/2;var l=(new H).set(i,a,o,s);return 0!==l.width&&0!==l.height?(t-=l.x,e-=l.y,t/=l.width,e/=l.height,{x:t,y:e}):void 0},resetScaleScene:function(t,e,r,n){var i=this.$refs.$instance;if(i){var a=this.childRect(),o=this.getBoxLocation(t,e,r,a);if(o){var s=this.getBoxLocation(t,e,n,a);if(s){this.sceneScaleKeepX=t-this.sceneOffsetX,this.sceneScaleKeepY=e-this.sceneOffsetY;var c=s.x-o.x,l=s.y-o.y,u=c*a.width*n,d=l*a.height*n;this.sceneX+=Math.round(u),this.sceneY+=Math.round(d)}}}},mouseWheel:function(t){if(this.canEmitWindowEvent()){var e=t.ctrlKey||t.metaKey,r=t.shiftKey;if(this.canEmitEvent(t,{isScale:e,isMove:!e})){t.preventDefault();var n=t.wheelDelta||-t.detail,i=n>0?1:-1,a=t.altKey?5:1;if(e){var o=this.scale,s=o+.11*i*a,c=s-o;if(0===c)return;this.setScale(s),this.resetScaleScene(t.pageX,t.pageY,o,this.scale)}else{var l=t.wheelDeltaX;if("number"===typeof l&&0!==l){var u=t.wheelDeltaY,d=l>0?1:0===l?0:-1,h=u>0?1:0===u?0:-1;0!==d&&(this.sceneX+=Math.round(10*d*a)),0!==h&&(this.sceneY+=Math.round(10*h*a))}else this[r?"sceneX":"sceneY"]+=Math.round(50*i*a)}}else e&&t.preventDefault()}}}},wa=ga,ya=(r("d907"),Object(sr["a"])(wa,wi,yi,!1,null,"dc4bcff8",null)),xa=ya.exports,_a={components:{ZoomContainer:xa,MultArtboardDownload:gi}},ka=_a,Ca=(r("d169"),Object(sr["a"])(ka,ai,oi,!1,null,"08f4c5c8",null)),Sa=Ca.exports,Aa=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"p-info"},[r("keep-alive",[r("LeftSide",{ref:"$leftside"})],1),t.isError?r("div",{staticClass:"error"},[r("div",{staticClass:"box"},[r("div",{staticClass:"text"},[t._v(t._s(t.curArtboard.loadErrMsg))]),r("div",{staticClass:"btns"},[r("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:t.clickReload}},[t._v("重新加载")])])])]):t.isFetching?r("div",{staticClass:"loading"},[r("div",{staticClass:"box"},[t._v("正在加载画板详情...")])]):t.isLoaded?[r("ZoomContainer",{attrs:{type:1}}),r("Properties"),r("MultDownload")]:t._e()],2)},Ea=[],Na=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"left-side",class:{on:t.visible}},[r("a",{staticClass:"btn-visible",class:{on:t.visible},attrs:{href:"javascript:;",title:t.visible?"收起左侧(F3)":"展开左侧(F3)"},on:{click:function(e){t.visible=!t.visible}}}),r("nav",[r("a",{staticClass:"btn-showart",class:{on:t.showArtboardList},attrs:{href:"javascript:;",title:"切换到画板列表(F1)"},on:{click:function(e){t.showArtboardList=!0,t.visible=!0}}},[t._v("画板")]),r("a",{staticClass:"btn-shownode",class:{on:!t.showArtboardList},attrs:{href:"javascript:;",title:"切换到图层列表(F2)"},on:{click:function(e){t.showArtboardList=!1,t.visible=!0}}},[t._v("图层")])]),t.showArtboardList?r("div",{staticClass:"search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.artboard,expression:"searchText.artboard"}],attrs:{type:"text",placeholder:"搜索画板名"},domProps:{value:t.searchText.artboard},on:{input:function(e){e.target.composing||t.$set(t.searchText,"artboard",e.target.value)}}}),t.searchText.artboard?r("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:function(e){t.searchText.artboard=""}}}):t._e()]):r("div",{staticClass:"search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText.node,expression:"searchText.node"}],attrs:{type:"text",placeholder:"搜索节点名"},domProps:{value:t.searchText.node},on:{input:function(e){e.target.composing||t.$set(t.searchText,"node",e.target.value)}}}),t.searchText.node?r("a",{staticClass:"btn-clear",attrs:{href:"javascript:;"},on:{click:function(e){t.searchText.node=""}}}):t._e()]),r("div",{staticClass:"filter"},[r("Checkbox2",{attrs:{text:"仅切图",selected:t.sliceFilterOpen},on:{click:t.clickSliceFilter}}),t.showArtboardList?r("a",{staticClass:"artlist-mode",class:{min:!t.artlistModeMin},attrs:{href:"javascript:;",title:t.artlistModeMinTitle},on:{click:t.clickArtlistModeMin}}):t._e()],1),r("section",{staticClass:"box"},[r("ArtboardList",{attrs:{artlistModeMin:t.artlistModeMin,visible:t.showArtboardList,list:t.renderArtboardList}}),r("section",{ref:"nodeList",staticClass:"nodelist",class:{on:!t.showArtboardList},on:{scroll:t.onNodeListScroll}},[r("div",{staticClass:"container",class:{"slice-filter":t.sliceFilterOpen||t.nodeInSearch}},[r("div",{staticClass:"brace",style:t.braceStyle},[r("div",{staticClass:"front",style:t.frontStyle},t._l(t.renderList,(function(e){return r("NodeListNew",{key:e.index+":"+e.node.guid,attrs:{nodeListHeight:t.nodeListHeight,nodeListScrollTop:t.nodeListScrollTop,nodeLineHeight:t.nodeLineHeight,shiftKey:t.shiftKey,sliceFilterOpen:t.sliceFilterOpen,nodeInSearch:t.nodeInSearch,item:e.node}})})),1)])])])],1)])},Pa=[],Ta=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"checkbox2",class:{on:t.selected},on:{click:t.click}},[t.text?r("i",{staticClass:"text"},[t._v(t._s(t.text))]):t._e(),t._m(0)])},Ma=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"rect-icon"},[r("i")])}],Ia={props:{text:String,selected:Boolean},methods:{click:function(){this.$emit("click",!this.selected)}}},Oa=Ia,La=Object(sr["a"])(Oa,Ta,Ma,!1,null,null,null),Da=La.exports,Ra=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item",class:{hover:t.enterNode===t.item,focused:t.curNode===t.item}},[t.sliceFilterOpen||t.nodeInSearch?t._e():r("div",{staticClass:"prex",class:{first:t.isFirstChild,last:t.isLastChild,"has-child":t.hasChild},style:{width:t.depthWidth}}),r("div",{ref:"$item_name",staticClass:"name",class:{export:t.item.markedForExport},style:{paddingLeft:t.paddingLeft},on:{mouseenter:t.mouseEnterNode,mouseleave:t.mouseLeaveNode,click:t.clickNode}},[t._v("\n    "+t._s(t.name)+"\n  ")])])},Fa=[],Ba=10,za={name:"NodeList",methods:{clickNode:function(){var t=this.item;o&&console.log("NodeItem.clickNode",t.guid,t),this.inMultDownMode?t.markedForExport&&(t.mlUserSelectDown=!t.mlUserSelectDown):this.setCurNode(t)},mouseLeaveNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(null)},mouseEnterNode:function(){this.inMultDownMode||this.shiftKey&&null!=this.curNode||this.setEnterNode(this.item)}},computed:{itemStyle:function(){return{top:this.index*this.nodeLineHeight+"px"}},isFirstChild:function(){var t=this.item;if(t.types.Artboard)return!0;var e=t.parentNode.children;return!!e&&e[0]==t},isLastChild:function(){var t=this.item;if(t.types.Artboard)return!0;var e=t.parentNode.children;return!!e&&e[e.length-1]==t},hasChild:function(){var t=this.item.children;if(!t)return!1;if(0===t.length)return!1;var e=t.find((function(t){return!t.mlIgnoreLeftSide}));return!!e},depthWidth:function(){var t=this.nodeDepthIndex*Ba;return t<0&&(t=0),t+"px"},paddingLeft:function(){return this.nodeDepthIndex*Ba+6+"px"},nodeDepthIndex:function(){return this.item.nodeDepthIndex},name:function(){var t=30,e=Rt(this.item);return l(e)?(e=e.trim(),e.length>t&&(e=e.substr(0,t)),e):this.item.guid}},props:{item:Object,sliceFilterOpen:Boolean,nodeInSearch:Boolean,shiftKey:Boolean,nodeListScrollTop:Number,nodeListHeight:Number,index:Number,nodeLineHeight:Number}},Wa=za,$a=(r("750b"),Object(sr["a"])(Wa,Ra,Fa,!1,null,"224307d2",null)),Ua=$a.exports,ja=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"art-list",class:{on:t.visible}},t._l(t.list,(function(e){return r("ArtboardListItem",{key:e.artboard.docGuid+"-"+e.artboard.guid,attrs:{item:e,artlistModeMin:t.artlistModeMin}})})),1)},Va=[],Ga=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{ref:"$item",staticClass:"item",class:{on:t.focused,min:t.artlistModeMin},on:{click:function(e){return t.clickArtboard()},contextmenu:function(e){return e.preventDefault(),t.onContextmenu(e)}}},[r("div",{staticClass:"name",attrs:{title:t.artboard.name},domProps:{textContent:t._s(t.artboard.name)}}),r("div",{staticClass:"img"},[r("img",{attrs:{src:t.artboardReviewImg,alt:""},on:{error:t.errPreviewImage}}),t.exportNodeCount>0?r("div",{staticClass:"slice-total"},[t._v(t._s(t.exportNodeCount))]):t._e()])])},Ha=[],Ya={methods:{errPreviewImage:function(){this.userMiniPreviewImg&&(this.userMiniPreviewImg=!1)},onContextmenu:function(t){var e=this,r=t.pageX,n=t.pageY,i=this.item;requestAnimationFrame((function(){e.$store.commit("setArtboardMenu",{visible:!0,x:r,y:n,artboard:i})}))},clickArtboard:function(){this.setCurArtboard(this.item)},scrollIntoView:function(t){if(this.focused){var e=this.$refs.$item;e&&e.scrollIntoView({block:"center",behavior:null===t?"auto":"smooth"})}}},watch:{curArtboard:function(t,e){this.scrollIntoView(e)}},mounted:function(){this.scrollIntoView(null)},computed:{exportNodeCount:function(){if(this.inCloudMode)return this.artboard.resNodeCount;var t=this.item.exportNodes;return t.length},artboardReviewImg:function(){var t=this.artboard,e=this.userMiniPreviewImg?t.artboardPreviewThumbPng:t.artboardPreviewPng;return this.inCloudMode?e:"".concat(e,"?").concat(t.mlOutputTime)},focused:function(){return this.curArtboard===this.item},artboard:function(){return this.item.artboard}},data:function(){return{userMiniPreviewImg:!0}},props:{item:Object,artlistModeMin:Boolean,searchText:String}},Xa=Ya,Ka=(r("343a"),Object(sr["a"])(Xa,Ga,Ha,!1,null,"508dc8e2",null)),Za=Ka.exports,qa={props:{visible:Boolean,artlistModeMin:Boolean,list:Array},components:{ArtboardListItem:Za}},Ja=qa,Qa=Object(sr["a"])(Ja,ja,Va,!1,null,null,null),to=Qa.exports,eo={components:{ArtboardList:to,NodeListNew:Ua,Checkbox2:Da},methods:{onNodeListResize:function(){var t=this.$refs.nodeList;t&&(this.nodeListHeight=t.offsetHeight)},onNodeListScroll:function(){var t=this.$refs.nodeList;t&&(this.nodeListScrollTop=t.scrollTop)},clickArtlistModeMin:function(){this.artlistModeMin=!this.artlistModeMin,jt("leftside.artlistmodemin",this.artlistModeMin?"1":"0")},clickSliceFilter:function(){this.sliceFilterOpen=!this.sliceFilterOpen,jt("sliceFilterOpen",this.sliceFilterOpen?"1":"0")},quickKeyShift:function(t){this.shiftKey=t.shiftKey},quickKey:function(t){var e=this;this.quickKeyShift(t);var r=t.keyCode||t.which;switch(r){case 112:case 113:this.showArtboardList=112===r,this.visible=!0,t.preventDefault();break;case 114:this.visible=!this.visible,t.preventDefault();break;case 38:case 40:var n=38===r?-1:1,i=t.ctrlKey||t.metaKey;if(!i)break;var a=this.renderArtboardList;if(0===a.length)return void this.showTextTip(1===n?"已经到达最后一个画板":"已经到达第一个画板");var o=a.findIndex((function(t){return e.curArtboard===t}));if(-1===o?o=0:o+=n,o<0)return void this.showTextTip("已经到达第一个画板");if(o>=a.length)return void this.showTextTip("已经到达最后一个画板");this.setCurArtboard(a[o]);break}},getArtboardExportNodeCount:function(t){if(this.inCloudMode)return t.artboard.resNodeCount;var e=t.exportNodes;return e.length}},computed:{renderArtboardList:function(){var t=this,e=this.sortedArtboardsWithDocument,r=this.sliceFilterOpen,n=this.artboardSearchText,i=""!==n,a=[];return e.forEach((function(e){if(e&&e.artboard&&(!r||0!==t.getArtboardExportNodeCount(e))){if(i){var o=e.artboard.name;if(!o)return;if(-1===o.toLowerCase().indexOf(n))return}a.push(e)}})),a},artboardSearchText:function(){return this.searchText.artboard.toLowerCase()},nodeInSearch:function(){return""!==this.searchText.node},frontStyle:function(){var t=this.renderList,e=0;if(t.length>0){var r=t[0].index;e=r*this.nodeLineHeight}return{marginTop:e+"px"}},braceStyle:function(){return{height:this.nodeList.length*this.nodeLineHeight+"px"}},renderList:function(){var t=this.nodeList,e=[],r=new H,n=new H,i=this.nodeLineHeight,a=this.preloadCount*i,o=this.nodeListHeight,s=this.nodeListScrollTop;return t.forEach((function(t,c){r.set(0,c*i,100,i),n.set(0,s-a,100,o+2*a),tt(r,n)&&e.push({node:t,index:c})})),e},nodeList:function(){var t=this.curArtboard,e=this.sliceFilterOpen?t.exportNodes:t.childs,r=[],n=this.nodeInSearch,i=n?this.searchText.node.toLowerCase():"";return e.forEach((function(t){if(t.visible&&!t.mlIgnoreLeftSide){if(n){var e=t.name;if(!e)return;if(-1==e.toLowerCase().indexOf(i))return}r.push(t)}})),r},artlistModeMinTitle:function(){return this.artlistModeMin?"单击切换到大图模式":"单击切换到小图模式"}},data:function(){return{preloadCount:2,nodeLineHeight:24,nodeListScrollTop:0,nodeListHeight:0,shiftKey:!1,showArtboardList:!1,artlistModeMin:"1"===Ut("leftside.artlistmodemin",!1),visible:"1"===Ut("leftside.visible",!1),sliceFilterOpen:"1"===Ut("sliceFilterOpen",!1),searchText:{artboard:"",node:""}}},watch:{visible:function(t){jt("leftside.visible",t?"1":"0")},curNode:function(t,e){if(t){var r=this.nodeList.findIndex((function(e){return t===e}));if(-1!==r){var n=r*this.nodeLineHeight-this.nodeListHeight/2,i=this.$refs.nodeList;i&&i.scrollTo({top:n,behavior:null===e?"auto":"smooth"})}}},curArtboard:function(t){t&&(this.onNodeListResize(),this.onNodeListScroll())}},mounted:function(){this.onNodeListResize(),this.onNodeListScroll()},created:function(){window.addEventListener("keydown",this.quickKey),window.addEventListener("keyup",this.quickKeyShift),window.addEventListener("resize",this.onNodeListResize)},beforeDestroy:function(){window.removeEventListener("keydown",this.quickKey),window.removeEventListener("keyup",this.quickKeyShift),window.removeEventListener("resize",this.onNodeListResize)}},ro=eo,no=(r("ea6e"),Object(sr["a"])(ro,Na,Pa,!1,null,null,null)),io=no.exports,ao=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"node-properties",class:{on:t.hasValue}},[t.hasValue?[r("Header"),r("main",{class:{export:t.curNode.markedForExport}},[r("PropertyInfo",{attrs:{nodeStyle:t.nodeStyle}}),t.nodeStyle.fill?r("PropertyFill",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.curNode.types.GraphicNode?r("PropertiesGraphicNode",{attrs:{nodeStyle:t.nodeStyle}}):t._e(),t.curNode.markedForExport?r("PropertyExport"):t.curNode.types.Text?r("PropertyText",{attrs:{sketchGroupFillColor:t.sketchGroupFillColor}}):t._e(),t.cssVisible?r("PropertyCss",{attrs:{sketchGroupFillColor:t.sketchGroupFillColor,nodeStyle:t.nodeStyle}}):t._e()],1),t.curNode.markedForExport?r("footer",[r("a",{staticClass:"button download-all",attrs:{href:"javascript:;"},on:{click:function(e){return t.setInMultDownMode(!0)}}},[t._v("查看当前画板全部切图")])]):t._e()]:t._e()],2)},oo=[],so=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._l(t.nodeStyle.borders,(function(e,n){return r("section",{key:"border-"+n,staticClass:"prop-box"},[r("h5",[0===e.position||1===e.position||2===e.position?r("span",{domProps:{textContent:t._s(t.SketchEnumBorderPositionNumber[e.position])}}):t._e(),t._v("边框\n    ")]),r("dl",{staticClass:"item"},[r("dt",[t._v("粗细")]),r("dd",[r("PropertyShowValue",{attrs:{value:e.width}}),r("div",{staticClass:"inp empty"})],1)]),r("dl",{staticClass:"item"},[r("dt",[t._v("线条类型")]),r("dd",[r("PropertyShowValue",{attrs:{value:e.style}}),r("div",{staticClass:"inp empty"})],1)]),r("PropertyColor",{attrs:{fill:e}})],1)})),t._l(t.nodeStyle.shadows,(function(e,n){return r("section",{key:"shadow-"+n,staticClass:"prop-box"},[r("h5",[t._v("外阴影")]),r("dl",{staticClass:"item loc"},[r("dt",[t._v("偏移")]),r("dd",[r("span",{staticClass:"loc-name"},[t._v("X")]),r("PropertyShowValue",{attrs:{value:e.x}}),r("span",{staticClass:"loc-name"},[t._v("Y")]),r("PropertyShowValue",{attrs:{value:e.y,cls:{m2:1}}})],1)]),r("dl",{staticClass:"item"},[r("dt",[t._v("模糊距离")]),r("dd",[r("PropertyShowValue",{attrs:{value:e.blur}}),r("div",{staticClass:"inp empty"})],1)]),e.spread?r("dl",{staticClass:"item"},[r("dt",[t._v("阴影大小")]),r("dd",[r("PropertyShowValue",{attrs:{value:e.spread}}),r("div",{staticClass:"inp empty"})],1)]):t._e(),r("PropertyShowColor",{attrs:{name:"颜色",value:e.color}})],1)})),t._l(t.nodeStyle.innerShadows,(function(e,n){return r("section",{key:"innerShadow-"+n,staticClass:"prop-box"},[r("h5",[t._v("内阴影")]),r("dl",{staticClass:"item loc"},[r("dt",[t._v("偏移")]),r("dd",[r("span",{staticClass:"loc-name"},[t._v("X")]),r("PropertyShowValue",{attrs:{value:e.x}}),r("span",{staticClass:"loc-name"},[t._v("Y")]),r("PropertyShowValue",{attrs:{value:e.y,cls:{m2:1}}})],1)]),r("dl",{staticClass:"item"},[r("dt",[t._v("模糊距离")]),r("dd",[r("PropertyShowValue",{attrs:{value:e.blur}}),r("div",{staticClass:"inp empty"})],1)]),e.spread?r("dl",{staticClass:"item"},[r("dt",[t._v("阴影大小")]),r("dd",[r("PropertyShowValue",{attrs:{value:e.spread}}),r("div",{staticClass:"inp empty"})],1)]):t._e(),r("PropertyShowColor",{attrs:{name:"颜色",value:e.color}})],1)}))],2)},co=[],lo=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.fill.type===t.EnumFillShowType.FillColor?r("PropertyShowColor",{attrs:{name:"纯色",value:t.fill.color}}):t.fill.type===t.EnumFillShowType.LinearGradientFill?r("div",[r("dl",{staticClass:"item"},[r("dt",[t._v("线性渐变")]),r("dd",[r("PropertyShowValue",{attrs:{value:"linear"}}),r("PropertyShowValue",{attrs:{cls:{m2:1},value:t.fill.angle}})],1)]),r("ul",{staticClass:"fill-list"},t._l(t.fill.colorStops,(function(e,n){return r("li",{key:"line-colorStop-"+n},[r("div",{staticClass:"title"},[t._v(t._s(e.stop))]),r("PropertyShowColor",{attrs:{name:"",value:e.color}})],1)})),0)]):t.fill.type===t.EnumFillShowType.RadialGradientFill?r("div",[r("dl",{staticClass:"item"},[r("dt",[t._v("径向渐变")]),r("dd",[r("PropertyShowValue",{attrs:{value:"radial"}}),r("PropertyShowValue",{attrs:{cls:{m2:1},value:t.fill.angle}})],1)]),r("dl",{staticClass:"item loc"},[r("dd",[r("span",{staticClass:"loc-name start"},[t._v("圆心")]),r("span",{staticClass:"loc-name"},[t._v("X")]),r("PropertyShowValue",{attrs:{value:t.fill.startX}}),r("span",{staticClass:"loc-name"},[t._v("Y")]),r("PropertyShowValue",{attrs:{value:t.fill.startY,cls:{m2:1}}})],1)]),r("dl",{staticClass:"item loc"},[r("dd",[r("span",{staticClass:"loc-name start"},[t._v("半径")]),r("span",{staticClass:"loc-name"},[t._v("X")]),r("PropertyShowValue",{attrs:{value:t.fill.scaleX}}),r("span",{staticClass:"loc-name"},[t._v("Y")]),r("PropertyShowValue",{attrs:{value:t.fill.scaleY,cls:{m2:1}}})],1)]),r("ul",{staticClass:"fill-list"},t._l(t.fill.colorStops,(function(e,n){return r("li",{key:"radial-colorStop-"+n},[r("div",{staticClass:"title"},[t._v(t._s(e.stop))]),r("PropertyShowColor",{attrs:{name:"",value:e.color}})],1)})),0)]):t._e()},uo=[],ho=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"inp",class:t.cls,on:{click:function(e){return t.clickCopy(t.value)}}},[r("span",{attrs:{title:t.value},domProps:{textContent:t._s(t.value)}})])},fo=[],po={methods:{clickCopy:function(t){!1!==this.doNotAutoCopy&&(Kt(t)?this.showTextTip("已复制文本: ".concat(t),2):this.showTextTip("复制到剪切板失败",2))}},props:{value:null,cls:Object,doNotAutoCopy:{type:Boolean,default:!0}}},mo=po,vo=Object(sr["a"])(mo,ho,fo,!1,null,null,null),bo=vo.exports,go=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"item"},[t.name?r("dt",[t._v(t._s(t.name))]):t._e(),r("dd",[r("div",{staticClass:"color"},[r("i",{style:{backgroundColor:t.rgba.value},attrs:{title:"点击切换颜色类型"},on:{contextmenu:function(e){return e.preventDefault(),t.showColorSelect(e)},click:t.clickColorTypeNext}}),r("span",{staticClass:"inp",class:[this.currentColorType],on:{click:function(e){return t.clickCopy(t.showValue.value)}}},[r("span",{attrs:{title:t.showValue.value},domProps:{textContent:t._s(t.showValue.value)}})])]),"hex"===this.currentColorType?r("div",{staticClass:"inp opacity",on:{click:function(e){return t.clickCopy(t.opacity)}}},[r("span",{staticClass:"opacity",attrs:{title:t.opacity},domProps:{textContent:t._s(t.opacity)}})]):t._e(),t.colors.visible?r("ul",{staticClass:"colors"},t._l(t.colorTypes,(function(e,n){return r("li",{key:e,class:{on:t.currentColorTypeIndex===n},on:{click:function(e){return t.onColorSelectChanged(n)}}},[t._v(t._s(e.toUpperCase()))])})),0):t._e()])])},wo=[],yo={computed:{colorTypes:function(){return this.$store.state.setting.color.items},currentColorType:function(){return this.colorTypes[this.$store.state.setting.color.current]},currentColorTypeIndex:function(){return this.$store.state.setting.color.current}},methods:{setSettingColor:function(t){this.$store.commit("setSettingColor",t)},getColorRGBAValue:function(t){return d(t)},getCssShowColor:function(t){var e=d(t);return 1===e.opacity?p(e).value:e.value},getColorValue:function(t){var e=this.getColorRGBAValue(t);switch(this.currentColorType){case"hex":e=p(e);break;case"ahex":e=m(e);break;case"hexa":e=v(e);break;case"hsla":e=b(e);break}return e}}},xo={props:{value:null,name:String},methods:{clickCopy:function(t){Kt(t)?this.showTextTip("已复制文本: ".concat(t),2):this.showTextTip("复制到剪切板失败",2)},showColorSelect:function(){this.colors.visible=!0},clickColorTypeNext:function(){this.setSettingColor(this.currentColorTypeIndex+1)},onColorSelectChanged:function(t){this.setSettingColor(t)},hideColorSelect:function(){var t=this;requestAnimationFrame((function(){t.colors.visible=!1}))}},computed:{rgba:function(){return this.getColorRGBAValue(this.value)},showValue:function(){return this.getColorValue(this.value)},opacity:function(){var t=this.showValue.opacity;return a.mul(t,100)+"%"}},mixins:[yo],watch:{"colors.visible":function(t){t?(window.addEventListener("click",this.hideColorSelect,!0),window.addEventListener("contextmenu",this.hideColorSelect,!0)):(window.removeEventListener("click",this.hideColorSelect,!0),window.removeEventListener("contextmenu",this.hideColorSelect,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.hideColorSelect,!0),window.removeEventListener("contextmenu",this.hideColorSelect,!0)},data:function(){return{colors:{visible:!1}}}},_o=xo,ko=(r("28fd"),Object(sr["a"])(_o,go,wo,!1,null,"418e05ee",null)),Co=ko.exports,So={computed:{EnumFillShowType:function(){return O}},components:{PropertyShowColor:Co,PropertyShowValue:bo},props:{fill:Object}},Ao=So,Eo=(r("5944"),Object(sr["a"])(Ao,lo,uo,!1,null,"7075fd52",null)),No=Eo.exports,Po={components:{PropertyShowColor:Co,PropertyShowValue:bo,PropertyColor:No},props:{nodeStyle:Object},computed:{SketchEnumBorderPositionNumber:function(){return{0:"中心",1:"内",2:"外"}}}},To=Po,Mo=Object(sr["a"])(To,so,co,!1,null,null,null),Io=Mo.exports,Oo=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"prop-box"},[r("dl",{staticClass:"item node-name"},[r("dt",[t._v("图层")]),r("dd",{staticClass:"cur-node-name"},[r("NodeName",{attrs:{node:t.curNode}})],1)]),r("h5",[t._v("比例")]),r("dl",{staticClass:"item loc"},[r("dd",[r("span",{staticClass:"loc-name mid"},[t._v("X")]),r("PropertyShowValue",{attrs:{value:t.nodeStyle.left}}),r("span",{staticClass:"loc-name"},[t._v("Y")]),r("PropertyShowValue",{attrs:{value:t.nodeStyle.top,cls:{m2:1}}})],1)]),r("dl",{staticClass:"item loc"},[r("dd",[r("span",{staticClass:"loc-name mid"},[t._v("W")]),r("PropertyShowValue",{attrs:{value:t.nodeStyle.width}}),r("span",{staticClass:"loc-name"},[t._v("H")]),r("PropertyShowValue",{attrs:{value:t.nodeStyle.height,cls:{m2:1}}})],1)]),r("dl",{staticClass:"item"},[r("dt",[t._v("不透明度")]),r("dd",[r("PropertyShowValue",{attrs:{value:t.nodeStyle.opacity}}),t.shortCornerRadiiValue?r("div",{staticClass:"inp empty"}):t._e()],1)]),t.nodeStyle.cornerRadiiValue?r("dl",{staticClass:"item"},[r("dt",[t._v("圆角")]),r("dd",[r("PropertyShowValue",{attrs:{value:t.nodeStyle.cornerRadiiValue}}),t.shortCornerRadiiValue?r("div",{staticClass:"inp empty"}):t._e()],1)]):t._e(),t.curNode.boxTransform?[0!==t.curNode.boxTransform.rotation?r("dl",{staticClass:"item"},[r("dt",[t._v("旋转")]),r("dd",[r("PropertyShowValue",{attrs:{value:t.curNode.boxTransform.rotation+"deg"}}),r("div",{staticClass:"inp empty"})],1)]):t._e(),t.flippedText?r("dl",{staticClass:"item"},[r("dt",[t._v("翻转")]),r("dd",[r("PropertyShowValue",{attrs:{value:t.flippedText}}),r("div",{staticClass:"inp empty"})],1)]):t._e()]:t._e()],2)},Lo=[],Do=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"node-name",class:{focused:t.focused,"non-export":!t.node.markedForExport}},[this.node.markedForExport?r("input",{attrs:{type:"text","max-length":"50",spellcheck:"false"},domProps:{value:t.nodeShowName},on:{focus:t.inputFocus,blur:function(e){return t.inputBlur(e)},compositionstart:t.compositionstart,compositionend:t.compositionend,keyup:t.inputKeyup}}):r("div",{attrs:{title:t.nodeShowName}},[t._v(t._s(t.nodeShowName))])])},Ro=[],Fo={methods:{inputKeyup:function(t){var e=t.keyCode||t.which;13==e&&(t.target.blur(),t.preventDefault())},compositionstart:function(){this.inComposition=!0},compositionend:function(){this.inComposition=!1},inputFocus:function(){this.focused=!0},inputBlur:function(t){this.focused=!1;var e=t.target.value.trim();if(e!==this.nodeShowName){var r=this.node;r.markedForExport?$t(this,r,e):this.showTextTip("只有切图资源才可以进行重命名操作")}}},computed:{nodeShowName:function(){var t=this.node,e=Rt(t);if(!t.markedForExport&&l(e)){e=e.trim();var r=e.length;r>33&&(e=e.substr(0,30)+"...")}return e}},data:function(){return{focused:!1,inComposition:!1}},props:{node:Object}},Bo=Fo,zo=(r("aee4"),Object(sr["a"])(Bo,Do,Ro,!1,null,"393a3e2f",null)),Wo=zo.exports,$o={props:{nodeStyle:Object},components:{PropertyShowValue:bo,NodeName:Wo},computed:{flippedText:function(){var t=this.curNode.boxTransform;if(t){var e="";return t.flippedHorizontally&&(e="水平"),t.flippedVertically&&(e?e+=" & 垂直":e="垂直"),e}},shortCornerRadiiValue:function(){var t=this.nodeStyle.cornerRadiiValue;return!t||-1===t.indexOf(" ")}}},Uo=$o,jo=(r("166d"),Object(sr["a"])(Uo,Oo,Lo,!1,null,"2b0086c6",null)),Vo=jo.exports,Go=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visible?r("section",{staticClass:"prop-box"},[r("h5",{staticClass:"fill-title"},[r("span",[t._v("填充")]),t.nodeStyle.blendMode?r("div",{staticClass:"blend-mode"},[r("span",[t._v("混合模式")]),r("PropertyShowValue",{attrs:{value:t.nodeStyle.blendMode}})],1):t._e()]),t._l(t.fills,(function(t,e){return r("PropertyColor",{key:"fill-"+e,attrs:{fill:t}})})),t.objectEffect>0?r("dl",{staticClass:"item"},[r("dt",[t._v("高斯模糊")]),r("dd",[r("PropertyShowValue",{attrs:{value:t.objectEffect}}),r("span",{staticClass:"inp empty"})],1)]):t._e()],2):t._e()},Ho=[],Yo={props:{nodeStyle:Object},computed:{objectEffect:function(){return this.nodeStyle.objectEffect},blur:function(){return this.curNode.blur},fills:function(){return this.nodeStyle.fills},visible:function(){return this.fills.length>0}},components:{PropertyShowValue:bo,PropertyColor:No},data:function(){return{EnumFillShowType:O}}},Xo=Yo,Ko=(r("3f8c"),Object(sr["a"])(Xo,Go,Ho,!1,null,"deefd22c",null)),Zo=Ko.exports,qo=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("section",{staticClass:"prop-box"},[r("h5",[t._v("文本")]),t._l(t.combineStyles,(function(e,n){return[e.color?r("PropertyShowColor",{key:n,attrs:{name:e.name,value:t.tintColor(t.styles[0].fill.value)}}):e.hideDefault&&t.styles[0][e.field]===e.default?t._e():r("dl",{key:n,staticClass:"item"},[r("dt",{domProps:{textContent:t._s(e.name)}}),r("dd",[r("PropertyShowValue",{attrs:{value:e.extendValue(t.styles[0][e.field],"fontWeight"===e.field?t.calcPlatformShowType:t.getCalcPlatformValue)}}),"fontWeight"===e.field?r("PropertyShowValue",{attrs:{value:t.styles[0].fontWeightCss,cls:t.fontWeightCls}}):e.halfWidth?r("div",{staticClass:"inp m2 empty"}):t._e()],1)])]})),t.paragraphSpacing?r("dl",{staticClass:"item"},[r("dt",[t._v("段落间距")]),r("dd",[r("PropertyShowValue",{attrs:{value:t.paragraphSpacing}}),r("div",{staticClass:"inp m2 empty"})],1)]):t._e(),t.lineSpacing?r("dl",{staticClass:"item"},[r("dt",[t._v("行高")]),r("dd",[r("PropertyShowValue",{attrs:{value:t.lineSpacing}}),r("div",{staticClass:"inp m2 empty"})],1)]):t._e(),r("dl",{staticClass:"item"},[r("dt",[t._v("对齐方式")]),r("dd",[r("PropertyShowValue",{attrs:{value:t.curNode.textAlign}}),r("div",{staticClass:"inp m2 empty"})],1)]),t.curNode.textVerticalAlign?r("dl",{staticClass:"item"},[r("dt",[t._v("垂直对齐")]),r("dd",[r("PropertyShowValue",{attrs:{value:t.curNode.textVerticalAlign}}),r("div",{staticClass:"inp m2 empty"})],1)]):t._e()],2),t.unCombineStyles.length>0?r("div",[t._l(t.styles,(function(e,n){return[""!=t.subTexts[n]?r("section",{key:n,staticClass:"prop-box uncombine"},[r("h5",[t._v("文本"+t._s(n+1))]),t._l(t.unCombineStyles,(function(n,i){return[n.color?r("PropertyShowColor",{key:n.field,attrs:{name:n.name,value:t.tintColor(e.fill.value)}}):n.hideDefault&&e[n.field]===n.default?t._e():r("dl",{key:i,staticClass:"item"},[r("dt",{domProps:{textContent:t._s(n.name)}}),r("dd",[r("PropertyShowValue",{attrs:{value:n.extendValue(e[n.field],"fontWeight"===n.field?t.calcPlatformShowType:t.getCalcPlatformValue)}}),"fontWeight"===n.field?r("PropertyShowValue",{attrs:{value:e.fontWeightCss,cls:t.fontWeightCls}}):n.halfWidth?r("div",{staticClass:"inp m2 empty"}):t._e()],1)])]}))],2):t._e()]}))],2):t._e(),r("h5",{staticClass:"mult-h5"},[t._v("\n    文本内容\n    "),r("a",{staticClass:"copy",attrs:{href:"javascript:;"},on:{click:function(e){return t.copyText(t.text)}}},[t._v("复制文本")])]),r("dl",{staticClass:"item mult"},[r("dd",[r("PropertyShowValue",{attrs:{doNotAutoCopy:!1,value:t.text,cls:{multiple:1}}})],1)])])},Jo=[],Qo=[{name:"字体",field:"fontFamily"},{name:"字重",field:"fontWeight",halfWidth:!1,hideDefault:!1,default:"normal",extendValue:function(t,e){if("number"===typeof t){var r=k[t];r&&(t=r.toLowerCase())}return e===Ct.IOS&&t&&"normal"===t.toLowerCase()&&(t="Regular"),t}},{name:"斜体",field:"fontItalic",halfWidth:!0,hideDefault:!0,default:"normal"},{name:"前景色",field:"fill",color:!0},{name:"字号",field:"fontSize",halfWidth:!0,extendValue:function(t,e){return e(t,{fontSize:!0,needArtScale:!0})}},{name:"字间距",field:"charSpacing",hideDefault:!0,default:null,halfWidth:!0,extendValue:function(t,e){return e(t,{needArtScale:!0})}}];Qo.forEach((function(t){t.extendValue||(t.extendValue=function(t){return t})}));var ts={methods:{tintColor:function(t){return Qt(this.sketchGroupFillColor,t)},copyText:function(t){null!=t&&(Xt(t)?this.showTextTip("已复制文本到剪切板",2):this.showTextTip("复制到剪切板失败",2))}},computed:{fontWeightCls:function(){return{m2:1}},paragraphSpacing:function(){var t=this.curNode,e=t.paragraphSpacing;return 0===e||null==e?"":this.getCalcPlatformValue(e,{needArtScale:!0})},lineSpacing:function(){var t=this.curNode,e=t.lineSpacing;return 0===e||null==e?"":this.getCalcPlatformValue(e,{needArtScale:!0})},unCombineStyles:function(){var t=[],e=this.combineStyles;return Qo.forEach((function(r){e[r.field]||t.push(r)})),t},combineStyles:function(){var t={},e=this.styles,r=e.length;return r<=1?(1===r&&Qo.forEach((function(e){t[e.field]=e})),t):(Qo.forEach((function(n){var i=!0,a=e[0][n.field];n.color&&(a=a.value);for(var o=1;o<r;o++){var s=e[o];if(s){var c=s[n.field];if(n.color&&(c=c.value),c!==a){i=!1;break}}}i&&(t[n.field]=n)})),t)},subTexts:function(){var t=this.text,e=[],r=this.styles;if(0===r.length||1===r.length&&0===r[0].length)return e.push(t),e;var n=0;return r.forEach((function(i,a){var o;a===r.length-1?o=t.substr(n).trim():(o=t.substr(n,i.length).trim(),n+=i.length),e.push(o)})),e},text:function(){return this.curNode.text||""},styles:function(){return this.curNode.styleRanges||[]}},props:{sketchGroupFillColor:{type:Object,validator:function(){return!0}}},components:{PropertyShowValue:bo,PropertyShowColor:Co}},es=ts,rs=Object(sr["a"])(es,qo,Jo,!1,null,null,null),ns=rs.exports,is=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visible?r("section",{staticClass:"prop-box css-box"},[r("h5",{staticClass:"mult-h5"},[t._v("\n    CSS\n    "),r("a",{staticClass:"copy",attrs:{href:"javascript:;"},on:{click:function(e){return t.copyText(t.propertyText)}}},[t._v("复制样式")])]),r("dl",{staticClass:"item mult"},[r("dd",[r("ul",{staticClass:"css"},t._l(t.properties,(function(e,n){return r("li",{key:"property-"+n},[e.name?[r("span",{staticClass:"name"},[t._v(t._s(e.name)+":")]),r("span",{staticClass:"value"},[t._v(t._s(e.value)+";")])]:e.desc?[r("span",{staticClass:"desc"},[t._v(t._s(e.desc))])]:t._e()],2)})),0)])])]):t._e()},as=[],os={mixins:[yo],props:{nodeStyle:Object,sketchGroupFillColor:{type:Object,validator:function(){return!0}}},methods:{copyText:function(t){Xt(t)?this.showTextTip("已复制样式到剪切板",2):this.showTextTip("复制到剪切板失败",2)}},computed:{visible:function(){return this.properties.length>0},properties:function(){var t,e,r=this,n=this.curNode,i=[],a=this.nodeStyle;e="opacity",t=a[e],t&&"100%"!==t&&i.push({name:e,value:t}),e="width",t=a[e],t&&i.push({name:e,value:t}),e="height",t=a[e],t&&i.push({name:e,value:t}),a.blendMode&&(e="mix-blend-mode",t=a.blendMode,t&&i.push({name:e,value:t}));var o=n.boxTransform;if(o&&(e="transform",t=0!==o.rotation?"rotate(".concat(o.rotation,"deg)"):"",o.flippedHorizontally&&(t+=" scaleX(-1)"),o.flippedVertically&&(t+=" scaleY(-1)"),t&&i.push({name:e,value:t})),a.fill){var s=a.fill;switch(s.type){case O.FillColor:e="background-color",t=this.getCssShowColor(s.color),t&&i.push({name:e,value:t});break;case O.RadialGradientFill:e="background-image",t="radial-gradient(ellipse ".concat(s.scaleX," ").concat(s.scaleY," at ").concat(s.startX," ").concat(s.startY," ,").concat(s.colorStops.map((function(t){return"".concat(r.getCssShowColor(t.color)," ").concat(t.stop)})).join(","),")"),"0deg"!==s.angle&&i.push({desc:"/*径向渐变不支持旋转角度,可结合:before或:after配合transform实现*/"}),i.push({name:e,value:t});break;case O.LinearGradientFill:e="background-image",t="linear-gradient(".concat(s.angle,",").concat(s.colorStops.map((function(t){return"".concat(r.getCssShowColor(t.color)," ").concat(t.stop)})).join(","),")"),i.push({name:e,value:t})}}var l=a.border;if(l)switch(e="border",t="".concat(l.width," ").concat(l.style),i.push({name:e,value:t}),l.type){case O.FillColor:e="border-color",t=this.getCssShowColor(l.color),t&&i.push({name:e,value:t});break;case O.RadialGradientFill:case O.LinearGradientFill:e="border-image-source",t="linear-gradient(".concat(l.angle,",").concat(l.colorStops.map((function(t){return"".concat(r.getCssShowColor(t.color)," ").concat(t.stop)})).join(","),")"),i.push({name:e,value:t}),e="border-image-slice",t="1",i.push({name:e,value:t})}e="border-radius",t=a.cornerRadiiValue,t&&i.push({name:e,value:t}),a.objectEffect&&(e="filter",t="blur(".concat(this.getCalcPlatformValue(a.objectEffect,{needArtScale:!0}),")"),i.push({name:e,value:t}));var u=[];if(a.shadows.forEach((function(t){t&&u.push("".concat(t.x," ").concat(t.y," ").concat(t.blur).concat(t.spread?" "+t.spread:""," ").concat(r.getCssShowColor(t.color)))})),a.innerShadows.forEach((function(t){t&&u.push("".concat(t.x," ").concat(t.y," ").concat(t.blur).concat(t.spread?" "+t.spread:""," ").concat(r.getCssShowColor(t.color)," inset"))})),u.length>0&&(e=n.types.Text?"text-shadow":"box-shadow",t=u.join(","),i.push({name:e,value:t})),!n.markedForExport&&n.types.Text){var d=n.styleRanges;c(d)&&d.length>0&&(d=d[0],d&&(d.fontFamily&&(e="font-family",t=d.fontFamily,i.push({name:e,value:t})),d.fontWeightCss&&"400"!==d.fontWeightCss&&(e="font-weight",t=d.fontWeightCss,i.push({name:e,value:t})),d.fontItalic&&"normal"!==d.fontItalic&&(e="font-style",t=d.fontItalic,i.push({name:e,value:t})),d.fill&&null!=d.fill.value&&(e="color",t=this.getCssShowColor(Qt(this.sketchGroupFillColor,d.fill.value)),i.push({name:e,value:t})),null!=d.fontSize&&(e="font-size",t=this.getCalcPlatformValue(d.fontSize,{fontSize:!0,needArtScale:!0}),i.push({name:e,value:t})),0!==d.charSpacing&&null!=d.charSpacing&&(e="letter-spacing",t=this.getCalcPlatformValue(d.charSpacing,{needArtScale:!0}),i.push({name:e,value:t})),d.underline?(e="text-decoration",t="underline",i.push({name:e,value:t})):d.strikethrough&&(e="text-decoration",t="line-through",i.push({name:e,value:t})))),0!=n.paragraphSpacing&&null!=n.paragraphSpacing&&(e="padding-bottom",t=this.getCalcPlatformValue(n.paragraphSpacing,{needArtScale:!0}),i.push({name:e,value:t})),0!=n.lineSpacing&&null!=n.lineSpacing&&(e="line-height",t=this.getCalcPlatformValue(n.lineSpacing,{needArtScale:!0}),i.push({name:e,value:t})),n.textAlign&&(e="text-align",t=n.textAlign,"left"!=t&&i.push({name:e,value:t})),n.textVerticalAlign&&(e="vertical-align",t=n.textVerticalAlign,i.push({name:e,value:t}))}return i},propertyText:function(){var t=this.properties;return t.map((function(t){return"".concat(t.name,": ").concat(t.value,";")})).join("\n").trim()}}},ss=os,cs=(r("cf3d"),Object(sr["a"])(ss,is,as,!1,null,"23975856",null)),ls=cs.exports,us=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"prop-box prop-export"},[r("h5",[r("span",[t._v("切图")]),r("span",{staticClass:"export-bg"},[r("span",{class:{on:t.ExportBoxBackgroundType.Black===t.exportBoxBackground,black:1},attrs:{title:"深色背景填充"},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Black)}}}),r("span",{class:{on:t.ExportBoxBackgroundType.Transparent===t.exportBoxBackground,transparent:1},attrs:{title:"浅色背景填充"},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Transparent)}}})])]),r("section",{staticClass:"preview",class:["type"+t.exportBoxBackground]},[r("img",{attrs:{src:t.exportPreviewSrc}})]),r("section",{staticClass:"download"},[r("PropertyDownloadOptions",{ref:"downOptions",attrs:{currentResInSvg:t.currentResInSvg,downloadPlatform:t.calcPlatformUse,node:t.curNode},on:{clickDownSelect:t.clickDownSelect}}),r("div",{staticClass:"btns"},[r("Select",{attrs:{options:t.resTypeSelectOptions},on:{changed:t.onResTypeSelectChanged}}),t.currentResInSvg?r("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:t.clickDownSelect}},[t._v("下载切图")]):r("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:t.clickDownSelectAll}},[t._v("下载切图")])],1)],1)])},ds=[],hs=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.downloadPlatform===t.CALC_PLATFORM_TYPE.ANDROID?r("Select",{attrs:{options:t.androidUseMipmapSelectOptions},on:{changed:t.onAndroidUseMipmapSelectChanged}}):t._e(),r("div",{staticClass:"down-options",class:t.optionsClass},t._l(t.downloadPlatformItems,(function(e){return r("PropertyDownloadItem",{key:e.value.name,attrs:{config:e.value,node:t.node,enabled:e.enabled,selected:t.currentResInSvg||1==t.checkSetting[e.value.scale]},on:{clickItemSelect:t.clickItemSelect,clickDownSelect:t.clickDownSelect}})})),1)],1)},fs=[],ps=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"item",class:{disabled:!t.enabled},attrs:{title:t.title}},[r("Checkbox",{attrs:{text:t.name,selected:t.selected&&t.enabled},on:{click:t.clickItemSelect}}),null!=t.node?r("section",[r("span",{staticClass:"size"},[t._v(t._s(t.size))]),r("a",{staticClass:"btn-down-current",attrs:{href:"javascript:;",title:"下载该项切图"},on:{click:t.clickDownSelect}})]):t._e()],1)},ms=[],vs=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{staticClass:"checkbox",class:{on:t.selected},on:{click:t.click}},[t.text?r("i",[t._v(t._s(t.text))]):t._e()])},bs=[],gs={props:{text:String,selected:Boolean},methods:{click:function(){this.$emit("click",!this.selected)}}},ws=gs,ys=Object(sr["a"])(ws,vs,bs,!1,null,null,null),xs=ys.exports,_s={methods:{clickDownSelect:function(){var t={};t[this.config.scale]=1,this.$emit("clickDownSelect",t)},clickItemSelect:function(t){!t||this.enabled?this.$emit("clickItemSelect",this.config.scale,t):this.showTextTip("您无法导出该规格切图,因为设计狮没有为该画板导出该规格切图")}},computed:{inMultMode:function(){return null==this.node},title:function(){var t=this.config,e=t.name;return e},name:function(){var t,e=this.config;return t=e.name,t},originWidth:function(){return this.inMultMode?0:this.node.boundsInArtboard.width},originHeight:function(){return this.inMultMode?0:this.node.boundsInArtboard.height},size:function(){if(this.inMultMode)return"";if(!this.enabled)return"--";var t,e=this.node,r=this.curArtboard;if(r&&(t=r.artboard.mlConfig),t){var n=t.sizeMap;if(n){var i=(this.config.resname||this.config.filepath).replace("{$name$}",e.exportPath).toLowerCase(),a=n[i];if(a)return"".concat(a.width,"x").concat(a.height)}}var o=this.config.scale;return"".concat(Math.ceil(this.originWidth*o),"x").concat(Math.ceil(this.originHeight*o))}},props:{config:Object,node:Object,selected:Boolean,enabled:Boolean},components:{Checkbox:xs}},ks=_s,Cs=(r("7118"),Object(sr["a"])(ks,ps,ms,!1,null,"980e3118",null)),Ss=Cs.exports,As=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dl",{staticClass:"select",class:{expandUp:t.expandUp}},[r("dt",{class:{on:t.visible},attrs:{title:t.title},on:{click:function(e){e.stopPropagation(),t.visible=!t.visible}}},[t._v(t._s(t.selectName))]),t.visible?r("dd",[r("ul",t._l(t.options,(function(e,n){return r("li",{key:n,class:{on:t.selected===e,disabled:e.disabled},on:{click:function(r){return t.clickOption(e)}}},[t._v(t._s(e.name))])})),0)]):t._e()])},Es=[],Ns={methods:{clickOption:function(t){if(u(t)){var e=this.selected;e!==t&&(null!=e&&(e.selected=!1),t.selected=!0,this.visible=!1,this.$emit("changed",t))}},onVisibleClick:function(){var t=this;requestAnimationFrame((function(){t.visible=!1}))}},watch:{visible:function(t){t?window.addEventListener("click",this.onVisibleClick,!0):window.removeEventListener("click",this.onVisibleClick,!0)}},computed:{title:function(){var t=this.selected;return t&&t.title||""},selectName:function(){var t=this.selected;return t?t.name:""},selected:function(){var t=this.options,e=t.find((function(t){return u(t)&&t.selected}));return null==e&&(e=t[0]),e}},beforeDestroy:function(){window.removeEventListener("click",this.onVisibleClick,!0)},data:function(){return{visible:!1}},props:{options:Array,expandUp:{default:!1,type:Boolean}}},Ps=Ns,Ts=(r("53d7"),Object(sr["a"])(Ps,As,Es,!1,null,null,null)),Ms=Ts.exports,Is={methods:{onAndroidUseMipmapSelectChanged:function(t){u(t)&&this.clickSetAndroidUseMipmap(t.value)},clickSetAndroidUseMipmap:function(t){this.$store.commit("setAndroidUseMipmap",t)},clickDownSelect:function(t){this.$emit("clickDownSelect",t)},clickItemSelect:function(t,e){if(!this.currentResInSvg){var r=this.checkSetting;this.$set(r,t,e?1:0),this.setLocalCheckSetting(r)}},initCheckSetting:function(){var t=this.getLocalCheckSetting();this.checkSetting=t},setLocalCheckSetting:function(t){var e=this.downloadPlatform;jt("reschecked.".concat(e),t)},getLocalCheckSetting:function(){var t=this.downloadPlatform,e=Ut("reschecked.".concat(t),!0);if(!u(e))switch(t){case Ct.WEB:e={2:1};break;case Ct.IOS:e={1:1,2:1,3:1};break;case Ct.ANDROID:e={1:1,1.5:1,2:1,3:1,4:1};break}return[1,2,3,4,1.5].forEach((function(t){e[t]||(e[t]=0)})),e}},created:function(){this.initCheckSetting()},watch:{downloadPlatform:function(){this.initCheckSetting()}},computed:{optionsClass:function(){var t={};switch(this.currentResInSvg&&(t.svg=1),this.inMultMode&&(t.mult=1),this.downloadPlatform){case Ct.ANDROID:t.android=1;break;case Ct.WEB:t.web=1;break;case Ct.IOS:t.ios=1;break}return t},inMultMode:function(){return null==this.node},androidUseMipmapSelectOptions:function(){return[{name:"drawable-...",value:!1,selected:!this.androidUseMipmap,title:"Android目录前缀"},{name:"mipmap-...",value:!0,selected:this.androidUseMipmap,title:"Android目录前缀"}]},downloadPlatformItems:function(){return Or(this.curArtboard,this.downloadPlatform,this.androidUseMipmap,this.currentResInSvg)}},data:function(){return{CALC_PLATFORM_TYPE:Ct,checkSetting:{}}},components:{PropertyDownloadItem:Ss,Select:Ms},props:{currentResInSvg:Boolean,downloadPlatform:Number,node:Object,bottomPosition:Boolean}},Os=Is,Ls=(r("91b8"),Object(sr["a"])(Os,hs,fs,!1,null,"13ac5ec2",null)),Ds=Ls.exports,Rs={methods:{clickExportBoxBackgroundType:function(t){this.$store.commit("exportBoxBackgroundType",t)},onResTypeSelectChanged:function(t){u(t)&&this.clickCurrentResType(t.value)},clickCurrentResType:function(t){switch(t){case yt.PNG:if(!this.exportPng)return void this.showTextTip("设计狮没有为该画板导出[PNG]格式的切图");break;case yt.WEBP:if(!this.exportWebP)return void this.showTextTip("设计狮没有为该画板导出[WEBP]格式的切图");break;case yt.SVG:if(!this.exportSvg)return void this.showTextTip("设计狮没有为该画板导出[SVG]格式的切图");break}this.currentResType=t,jt("resType",t)},clickDownSelectAll:function(){this.clickDownSelect(this.$refs.downOptions.checkSetting)},clickDownSelect:function(t){var e=this;if(this.currentResInSvg)return this.setInOutput(!0),void Lr([this.curNode],this.curArtboard).catch((function(t){e.showTextTip(t)})).finally((function(){e.setInOutput(!1)}));this.setInOutput(!0),zr(this.calcPlatformUse,this.androidUseMipmap,t,[this.curNode],this.curArtboard,this.currentResInWebP).catch((function(t){e.showTextTip(t)})).finally((function(){e.setInOutput(!1)}))},initCurrentResType:function(){var t=this.curArtboard;if(t){var e=parseInt(Ut("resType",!1));(isNaN(e)||!isFinite(e)||e!==yt.SVG&&e!==yt.WEBP)&&(e=yt.PNG);var r=this.curArtboard.artboard.mlConfig.resType;r||(r=yt.PNG);var n=this.exportPng,i=this.exportSvg,a=this.exportWebP;switch(e){case yt.PNG:n||(a?e=yt.WEBP:i&&(e=yt.SVG));break;case yt.SVG:i||(n?e=yt.PNG:a&&(e=yt.WEBP));break;case yt.WEBP:a||(n?e=yt.PNG:i&&(e=yt.SVG));break}this.currentResType=e}}},created:function(){this.initCurrentResType()},watch:{inMultDownMode:function(){this.initCurrentResType()},curArtboard:function(){this.initCurrentResType()}},data:function(){return{currentResType:yt.PNG}},computed:{ExportBoxBackgroundType:function(){return L},resTypeSelectOptions:function(){var t=this.currentResType,e={value:yt.PNG,name:"PNG"};e.selected=t===yt.PNG,e.disabled=!this.exportPng;var r={value:yt.WEBP,name:"WEBP"};r.selected=t===yt.WEBP,r.disabled=!this.exportWebP;var n={value:yt.SVG,name:"SVG"};return n.selected=t===yt.SVG,n.disabled=!this.exportSvg,[e,r,n]},exportWebP:function(){return _t(this.curArtboard.artboard)},exportPng:function(){return xt(this.curArtboard.artboard)},exportSvg:function(){return kt(this.curArtboard.artboard)},currentResInSvg:function(){return this.currentResType===yt.SVG},currentResInWebP:function(){return this.currentResType===yt.WEBP},exportPreviewSrc:function(){var t=this.curNode.mlConfig.pngPreview||this.curNode.mlConfig.svgPreview;return this.inCloudMode?t:t+"?"+this.curArtboard.artboard.mlOutputTime}},components:{PropertyDownloadOptions:Ds,Select:Ms}},Fs=Rs,Bs=(r("df67"),Object(sr["a"])(Fs,us,ds,!1,null,"730af41b",null)),zs=Bs.exports,Ws=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"header"},[r("div",{staticClass:"platform"},[r("a",{staticClass:"btn-set-platform",class:{on:t.setting},attrs:{href:"javascript:;"},on:{click:function(e){t.setting=!t.setting}}},[t._v(t._s(t.size)+"\n      ")]),r("span",{staticClass:"size"},[r("span",{staticClass:"round-num",class:{on:t.numberAutoRound},on:{click:t.clickRoundNum}},[t._v("数值取整")])])]),t.setting?r("div",{staticClass:"set"},[r("SetPlatform",{attrs:{showCustom:!0},on:{clickCalcPlatform:t.clickCalcPlatform,hideSetting:t.hideSetting}})],1):t._e()])},$s=[],Us=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"set-platform"},[r("ul",[r("li",{class:{on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.WEB}},[r("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.WEB})}}},[t._v("Web")])]),r("li",{class:{on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.ANDROID}},[r("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.ANDROID})}}},[t._v("Android")])]),r("li",{class:{on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.IOS}},[r("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickCalcPlatform({type:t.CALC_PLATFORM_TYPE.IOS})}}},[t._v("iOS")])]),r("li",{staticClass:"custom"},[r("dl",{class:{on:t.calcPlatformType2===t.CALC_PLATFORM_TYPE.CUSTOM}},[r("dt",{staticClass:"name",attrs:{title:"无视文档设计尺寸,强制指定当前画板的宽度"}},[t._v("\n          自定义宽度\n        ")]),r("dd",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.calcPlatformCustomDocWidth2,expression:"calcPlatformCustomDocWidth2"}],ref:"inpWidth",staticClass:"inp",attrs:{type:"text",spellcheck:"false"},domProps:{value:t.calcPlatformCustomDocWidth2},on:{input:function(e){e.target.composing||(t.calcPlatformCustomDocWidth2=e.target.value)}}})]),r("dd",[r("Select",{attrs:{options:t.unitSelectOptions},on:{changed:t.onUnitSelectChanged}})],1),r("dd",[r("a",{staticClass:"button light btn-save",attrs:{href:"javascript:;"},on:{click:t.clickCalcPlatformCustom}},[t._v("保存")])])]),r("div",{staticClass:"tip"},[t._v("注:填0则自动取对应画板设计尺寸")])]),r("li",{staticClass:"template"},[r("dl",[r("dt",[r("span",{staticClass:"name"},[t._v("自定义单位模板"),r("Checkbox2",{attrs:{text:"",selected:t.calcUnitTemplateEnable},on:{click:function(e){return t.clickTemplateEnable()}}})],1),r("a",{staticClass:"help",attrs:{href:"https://www.zhaixiaowai.com/Article/article-1058.shtml",target:"_blank"}},[t._v("帮助")])]),r("dd",{staticClass:"input",class:{off:!t.calcUnitTemplateEnable}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.calcUnitTemplateValue2,expression:"calcUnitTemplateValue2"}],domProps:{value:t.calcUnitTemplateValue2},on:{input:function(e){e.target.composing||(t.calcUnitTemplateValue2=e.target.value)}}}),r("a",{staticClass:"button light btn-save",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickTemplateEnable(!0)}}},[t._v("保存")])]),t._m(0)])])])])},js=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("dd",{staticClass:"tip"},[r("div",[t._v("注:")]),r("ul",[r("li",[r("span",{staticClass:"t"},[t._v("%num%")]),t._v("当前数值")]),r("li",[r("span",{staticClass:"t"},[t._v("%W%")]),t._v("画板宽度")]),r("li",[r("span",{staticClass:"t"},[t._v("%H%")]),t._v("画板高度")]),r("li",[r("span",{staticClass:"t"},[t._v("%VW%")]),t._v("当前数值和画板宽度的百分比(1-100)")]),r("li",[r("span",{staticClass:"t"},[t._v("%VH%")]),t._v("当前数值和画板高度的百分比(1-100)")])])])}],Vs={methods:{clickTemplateEnable:function(t){var e=t?this.calcUnitTemplateEnable:!this.calcUnitTemplateEnable,r=this.curArtboard.artboard,n={guid:r.docGuid,enable:e,template:t?this.calcUnitTemplateValue2:this.calcUnitTemplateValue};this.$store.commit("setUnitTemplate",n),this.calcUnitTemplateValue2=this.calcUnitTemplateValue,t?this.$emit("hideSetting"):e||this.$emit("hideSetting")},onUnitSelectChanged:function(t){this.calcPlatformCustomUnit2=t.value},clickCalcPlatformCustom:function(){var t={type:Ct.CUSTOM,customUnit:this.calcPlatformCustomUnit2,customDocWidth:parseInt(this.calcPlatformCustomDocWidth2)};if(isNaN(t.customDocWidth)||!isFinite(t.customDocWidth)||t.customDocWidth<0)return this.showTextTip("指定宽度不合法,请正确输入"),void this.$refs.inpWidth.focus();this.clickCalcPlatform(t)},clickCalcPlatform:function(t){this.$emit("clickCalcPlatform",t)}},data:function(){return{calcPlatformType2:0,calcPlatformCustomUnit2:0,calcPlatformCustomDocWidth2:0,calcUnitTemplateValue2:"",CALC_PLATFORM_TYPE:Ct,CALC_PLATFORM_UNIT:St,unitSelectOptions:[{name:"px",value:St.PX},{name:"dp",value:St.DP},{name:"pt",value:St.PT}]}},components:{Select:Ms,Checkbox2:Da},computed:{calcUnitTemplateEnable:function(){return this.$store.state.unitTemplate.enable}},created:function(){var t=this;this.calcPlatformType2=this.calcPlatformType,this.calcPlatformCustomUnit2=this.calcPlatformCustomUnit,this.unitSelectOptions.forEach((function(e){t.$set(e,"selected",e.value===t.calcPlatformCustomUnit2)})),this.calcPlatformCustomDocWidth2=this.calcPlatformCustomDocWidth,this.calcUnitTemplateValue2=this.calcUnitTemplateValue}},Gs=Vs,Hs=(r("f53b"),Object(sr["a"])(Gs,Us,js,!1,null,"1d44df57",null)),Ys=Hs.exports,Xs={methods:{clickRoundNum:function(){this.$store.commit("setNumberAutoRound",!this.numberAutoRound)},clickCalcPlatform:function(t){if(u(t)&&!t.guid){var e=this.curArtboard.artboard;t.guid=e.docGuid}this.$store.commit("setPlatform",t),this.setting=!1},hideSetting:function(){this.setting=!1}},computed:{size:function(){if(!this.inArtboardMode)return"";var t=this.curArtboard.artboard.boundsInArtboard;return"".concat(this.getCalcPlatformValue(t.width,{noUnitTemplate:!0}),"*").concat(this.getCalcPlatformValue(t.height,{noUnitTemplate:!0}))},calcPlatformTypeText2:function(){switch(this.calcPlatformType){case Ct.CUSTOM:return"".concat(this.calcPlatformCustomDocWidthShow).concat(this.getCalcPlatformCustomUnitText(!1));default:return""}},calcPlatformTypeText:function(){switch(this.calcPlatformType){case Ct.ANDROID:return"Android";case Ct.IOS:return"iOS";case Ct.CUSTOM:return"自定义";default:return"Web"}}},data:function(){return{setting:!1,CALC_PLATFORM_TYPE:Ct}},components:{SetPlatform:Ys}},Ks=Xs,Zs=(r("d2d0"),Object(sr["a"])(Ks,Ws,$s,!1,null,"d56d9c9c",null)),qs=Zs.exports,Js={methods:{getLinearGradientAngle:function(t,e){var r=0,n=t.width,i=t.height;if(0===n||0===i)return r;var a=e[0],o=e[1],s=e[2],c=e[3],l=gt({y:a,x:o},{y:s,x:c});return l+"deg"},parseColor:function(t){if(t){var e=this.sketchGroupFillColor,r=this.curNode;if(t.value){if(!r.types.Text&&(!this.isSketchArtboard||!r.types.Group))return{type:O.FillColor,color:Qt(e,t.value)}}else if(c(t.colorStops)&&c(t.endPoints)){var n=t.gradientTransform;if(n){var i=[];t.colorStops.forEach((function(t){var r=Math.round(1e4*t.stop)/100+"%",n=Qt(e,t.color.value);i.push({stop:r,color:n})}));var a=t.endR-t.startR||1;return{type:O.RadialGradientFill,colorStops:i,angle:Zt(qt(n.rotate,0))+"deg",startX:Zt(100*qt(t.startX,.5),2)+"%",startY:Zt(100*qt(t.startY,.5),2)+"%",scaleX:Zt(100*Math.abs(qt(n.scaleX,.5)*a),2)+"%",scaleY:Zt(100*Math.abs(qt(n.scaleY,.5)*a),2)+"%"}}var o=[];return t.colorStops.forEach((function(t){var r=Math.round(1e4*t.stop)/100+"%",n=Qt(e,t.color.value);o.push({stop:r,color:n})})),{type:O.LinearGradientFill,colorStops:o,endPoints:t.endPoints,angle:this.getLinearGradientAngle(r.boundsInArtboard,t.endPoints)}}}}},computed:{cssVisible:function(){return this.calcPlatformUse===Ct.WEB},hasValue:function(){return null!=this.curNode},borderStyle:function(){var t=this.curNode.strokeDashArray;if(!t||0===t.length)return"solid";var e,r=t[0];return e=1===t.length?r:t[1],r===e?"dashed":"dotted"},isSketchArtboard:function(){var t=this.curArtboard;if(!t)return!1;var e=t.artboard;return!(!e||!e.mlConfig)&&e.mlConfig.fileType===g.SKETCH},sketchGroupFillColor:function(){if(this.isSketchArtboard){var t=this.curNode;if(t){var e=t.types;if(e&&1!==e.Group)return Jt(t)}}},nodeStyle:function(){var t=this;if(!this.hasValue)return{borders:[],shadows:[],innerShadows:[],fills:[]};var e=this.opacity,r=this.top,n=this.left,i=this.width,a=this.height,o=this.cornerRadiiValue,s={opacity:e,top:r,left:n,width:i,height:a,cornerRadiiValue:o,borders:[],shadows:[],innerShadows:[],fills:[]},c=this.curNode;if(c.types.GraphicNode){var l,u,d,h,f=c.blur;if(f&&f.visible&&!f.isBackgroundEffect&&f.blurAmount>0?s.objectEffect=f.blurAmount:s.objectEffect=0,c.strokeEnabled&&c.stroke)l=c.strokeArr?c.strokeArr:[{stroke:c.stroke,strokeEnabled:c.strokeEnabled,strokeWidth:c.strokeWidth,strokePosition:c.strokePosition}],l.forEach((function(e){if(e){var r=t.parseColor(e.stroke);r&&(r.style=function(t){if(!t||0===t.length)return"solid";var e,r=t[0];return e=1===t.length?r:t[1],r===e?"dashed":"dotted"}(e.strokeDashArray),r.width=t.getCalcPlatformValue(e.strokeWidth,{needArtScale:!0}),r.position=e.strokePosition,0===s.borders.length&&(s.border=r),s.borders.push(r))}}));if(c.shadow&&c.shadow.visible)u=c.shadowArr?c.shadowArr:[c.shadow],u.forEach((function(e){if(e){var r={x:t.getCalcPlatformValue(e.x,{needArtScale:!0}),y:t.getCalcPlatformValue(e.y,{needArtScale:!0}),blur:t.getCalcPlatformValue(e.blur,{needArtScale:!0}),color:e.color.value};"number"===typeof e.spread&&0!==e.spread&&(r.spread=t.getCalcPlatformValue(e.spread,{needArtScale:!0})),0===s.shadows.length&&(s.shadow=r),s.shadows.push(r)}}));if(c.innerShadow&&c.innerShadow.visible)d=c.innerShadowArr?c.innerShadowArr:[c.innerShadow],d.forEach((function(e){if(e){var r={x:t.getCalcPlatformValue(e.x,{needArtScale:!0}),y:t.getCalcPlatformValue(e.y,{needArtScale:!0}),blur:t.getCalcPlatformValue(e.blur,{needArtScale:!0}),color:e.color.value};"number"===typeof e.spread&&0!==e.spread&&(r.spread=t.getCalcPlatformValue(e.spread,{needArtScale:!0})),0===s.innerShadows.length&&(s.innerShadow=r),s.innerShadows.push(r)}}));if(c.blendMode&&c.blendMode!==Yt.PASSTHROUGH&&c.blendMode!==Yt.NORMAL&&(s.blendMode=c.blendMode),c.fillEnabled&&c.fill)h=c.fillArr?c.fillArr:[{fillEnabled:!0,fill:c.fill}],h.forEach((function(e){if(e){var r=t.parseColor(e.fill);0==s.fills.length&&(s.fill=r),s.fills.push(r)}}))}return s},cornerRadiiValue:function(){var t=this.curNode.cornerRadii;return t?c(t)?null:t.bottomLeft!==t.bottomRight||t.bottomLeft!==t.topLeft||t.bottomLeft!==t.topRight?"".concat(this.getCalcPlatformValue(t.topLeft,{needArtScale:!0})," ").concat(this.getCalcPlatformValue(t.topRight,{needArtScale:!0})," ").concat(this.getCalcPlatformValue(t.bottomRight,{needArtScale:!0})," ").concat(this.getCalcPlatformValue(t.bottomLeft,{needArtScale:!0})):0!==t.topLeft?this.getCalcPlatformValue(t.topLeft,{needArtScale:!0}):void 0:null},width:function(){var t=this.curNode,e=t.markedForExport;return this.getCalcPlatformValue(t.boundsInArtboard.width,{markedForExport:e})},height:function(){var t=this.curNode,e=t.markedForExport;return this.getCalcPlatformValue(t.boundsInArtboard.height,{markedForExport:e})},top:function(){return this.curNode.types.Artboard?0:this.getCalcPlatformValue(this.curNode.boundsInArtboard.y)},left:function(){return this.curNode.types.Artboard?0:this.getCalcPlatformValue(this.curNode.boundsInArtboard.x)},opacity:function(){return Math.round(100*this.curNode.opacity)+"%"}},components:{PropertiesGraphicNode:Io,PropertyInfo:Vo,PropertyFill:Zo,PropertyText:ns,PropertyExport:zs,Header:qs,PropertyCss:ls}},Qs=Js,tc=(r("70b8"),Object(sr["a"])(Qs,ao,oo,!1,null,null,null)),ec=tc.exports,rc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.inMultDownMode&&t.curArtboard?r("section",{staticClass:"mult-download"},[r("Header",{attrs:{exportNodeCount:t.exportNodeCount,options:t.platformSelectOptions},on:{onPlatformSelectChanged:t.onPlatformSelectChanged}}),0===t.exportNodeCount?[r("div",{staticClass:"empty"},[t._v("当前画板不存在切图")])]:[r("div",{staticClass:"list"},t._l(t.curArtboard.exportNodes,(function(t,e){return r("ExportNodeItem",{key:e+"-"+t.guid,attrs:{node:t}})})),1),t.currentResInSvg?t._e():r("div",{staticClass:"platform-set"},[r("PropertyDownloadOptions",{ref:"downOptions",attrs:{downloadPlatform:t.downloadPlatform,node:null,bottomPosition:!0}})],1)],r("div",{staticClass:"btns"},[r("Select",{attrs:{options:t.resTypeSelectOptions,expandUp:!0},on:{changed:t.onResTypeSelectChanged}}),r("a",{staticClass:"button light download",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickDownSelectAll()}}},[t._v("下载切图")])],1),r("footer",[r("a",{staticClass:"button",attrs:{href:"javascript:;"},on:{click:function(e){return t.setInMultDownMode(!1)}}},[t._v("关闭")])])],2):t._e()},nc=[],ic=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"header"},[r("a",{staticClass:"btn-set-platform",class:{on:t.setting},attrs:{href:"javascript:;"},on:{click:function(e){t.setting=!t.setting}}},[t._v("\n      "+t._s(t.calcPlatformTypeText)+"\n    ")]),t.setting?r("div",{staticClass:"platforms"},[r("SetPlatform",{attrs:{options:t.options},on:{clickCalcPlatform:t.clickCalcPlatform}})],1):t._e(),r("div",[0!==t.exportNodeCount?r("Radio",{attrs:{text:t.selectAllText,selected:t.allSelected},on:{click:t.clickAllSelectBtn}}):t._e()],1)])},ac=[],oc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"set-platform"},[r("ul",t._l(t.options,(function(e){return r("li",{key:e.name,class:{on:t.calcPlatformType2===e.value}},[r("a",{staticClass:"name",attrs:{href:"javascript:;"},on:{click:function(r){return t.clickCalcPlatform(e)}}},[t._v(t._s(e.name))])])})),0)])},sc=[],cc={methods:{clickCalcPlatform:function(t){this.$emit("clickCalcPlatform",t)}},data:function(){return{calcPlatformType2:0,CALC_PLATFORM_TYPE:Ct}},created:function(){this.calcPlatformType2=(this.options.find((function(t){return t.selected}))||{value:0}).value},props:{options:Array}},lc=cc,uc=(r("d4bb"),Object(sr["a"])(lc,oc,sc,!1,null,"36eb4759",null)),dc=uc.exports,hc={methods:{clickCalcPlatform:function(t){this.$emit("onPlatformSelectChanged",t),this.setting=!1},clickAllSelectBtn:function(t){t=!this.allSelected&&(this.exportNodeCount,!0);var e=this.curArtboard.exportNodes;e.forEach((function(e){e.markedForExport&&(e.mlUserSelectDown=t)}))}},computed:{selectAllText:function(){return"全选(".concat(this.selectNodeCount,"/").concat(this.exportNodeCount,")")},calcPlatformTypeText:function(){if(!c(this.options))return"UnKnown";var t=this.options.find((function(t){return t.selected}));return t?t.name:"UnKnown"},allSelected:function(){return 0!==this.exportNodeCount&&this.exportNodeCount===this.selectNodeCount},selectNodeCount:function(){var t=this.curArtboard.exportNodes,e=0;return t.forEach((function(t){t.markedForExport&&t.mlUserSelectDown&&(e+=1)})),e}},data:function(){return{setting:!1}},props:{exportNodeCount:Number,options:Array},components:{Radio:pi,SetPlatform:dc}},fc=hc,pc=(r("cfeb"),Object(sr["a"])(fc,ic,ac,!1,null,"f8009ace",null)),mc=pc.exports,vc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item"},[r("div",{staticClass:"preview",class:{on:t.node.mlUserSelectDown,white:t.exportBoxBackground===t.ExportBoxBackgroundType.White,black:t.exportBoxBackground===t.ExportBoxBackgroundType.Black},on:{click:function(e){t.node.mlUserSelectDown=!t.node.mlUserSelectDown},contextmenu:function(e){e.preventDefault(),t.exportBgTabVisible=!0}}},[r("img",{attrs:{src:t.exportPreviewPng}}),r("Radio",{attrs:{text:"",selected:t.node.mlUserSelectDown}})],1),r("div",{staticClass:"info"},[r("NodeName",{attrs:{node:t.node}}),r("div",{staticClass:"size"},[t._v(t._s(t.size))])],1),t.exportBgTabVisible?r("ul",{staticClass:"export-bg"},[r("li",{class:{on:t.ExportBoxBackgroundType.Black===t.exportBoxBackground,black:1},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Black)}}},[t._v("\n      深色预览背景\n    ")]),r("li",{class:{on:t.ExportBoxBackgroundType.Transparent===t.exportBoxBackground,transparent:1},on:{click:function(e){return t.clickExportBoxBackgroundType(t.ExportBoxBackgroundType.Transparent)}}},[t._v("\n      浅色预览背景\n    ")])]):t._e()])},bc=[],gc={methods:{clickExportBoxBackgroundType:function(t){this.$store.commit("exportBoxBackgroundType",t)},hideSelect:function(){var t=this;requestAnimationFrame((function(){t.exportBgTabVisible=!1}))}},computed:{ExportBoxBackgroundType:function(){return L},exportPreviewPng:function(){var t=this.node.mlConfig.pngPreview||this.node.mlConfig.svgPreview;return this.inCloudMode?t:t+"?"+this.curArtboard.artboard.mlOutputTime},size:function(){var t,e=this.node,r=this.curArtboard;if(r&&(t=r.artboard.mlConfig),t){var n=t.sizeMap;if(n)for(var i=e.exportPath.toLowerCase(),a=0;a<Ir.length;a++){var o=Ir[a],s=o.scale,c=o.ext,l=n[i+c];if(l){var u=Math.ceil(l.width/s),d=Math.ceil(l.height/s);return"".concat(u,"x").concat(d)}}}return"".concat(Math.ceil(this.originWidth),"x").concat(Math.ceil(this.originHeight))},originWidth:function(){return this.node.boundsInArtboard.width},originHeight:function(){return this.node.boundsInArtboard.height}},watch:{exportBgTabVisible:function(t){t?(window.addEventListener("click",this.hideSelect,!0),window.addEventListener("contextmenu",this.hideSelect,!0)):(window.removeEventListener("click",this.hideSelect,!0),window.removeEventListener("contextmenu",this.hideSelect,!0))}},beforeDestroy:function(){window.removeEventListener("click",this.hideSelect,!0),window.removeEventListener("contextmenu",this.hideSelect,!0)},data:function(){return{exportBgTabVisible:!1}},components:{Radio:pi,NodeName:Wo},props:{node:Object}},wc=gc,yc=(r("abb1"),Object(sr["a"])(wc,vc,bc,!1,null,"66b6bc04",null)),xc=yc.exports;function _c(t,e){if(u(t)){var r=t.exportNodes;c(r)&&(e=!!e,r.forEach((function(t){t.mlUserSelectDown=e})))}}var kc={methods:{onPlatformSelectChanged:function(t){u(t)&&(this.downloadPlatform=t.value)},onResTypeSelectChanged:function(t){u(t)&&this.clickCurrentResType(t.value)},clickCurrentResType:function(t){switch(t){case yt.PNG:if(!this.exportPng)return void this.showTextTip("设计狮没有为该画板导出[PNG]格式的切图");break;case yt.WEBP:if(!this.exportWebP)return void this.showTextTip("设计狮没有为该画板导出[WEBP]格式的切图");break;case yt.SVG:if(!this.exportSvg)return void this.showTextTip("设计狮没有为该画板导出[SVG]格式的切图");break}this.currentResType=t,jt("resType",t)},clickDownSelectAll:function(){var t=this;if(0!==this.exportNodeCount){if(this.currentResInSvg)return this.setInOutput(!0),void Lr(this.selectNodes,this.curArtboard).catch((function(e){t.showTextTip(e)})).finally((function(){t.setInOutput(!1)}));this.setInOutput(!0),zr(this.downloadPlatform,this.androidUseMipmap,this.$refs.downOptions.checkSetting,this.selectNodes,this.curArtboard,this.currentResInWebP).catch((function(e){t.showTextTip(e)})).finally((function(){t.setInOutput(!1)}))}else this.showTextTip("当前画板不存在切图")},initCurrentResType:function(){var t=this.curArtboard;if(t){var e=parseInt(Ut("resType",!1));(isNaN(e)||!isFinite(e)||e!==yt.SVG&&e!==yt.WEBP)&&(e=yt.PNG);var r=this.curArtboard.artboard.mlConfig.resType;r||(r=yt.PNG);var n=this.exportPng,i=this.exportSvg,a=this.exportWebP;switch(e){case yt.PNG:n||(a?e=yt.WEBP:i&&(e=yt.SVG));break;case yt.SVG:i||(n?e=yt.PNG:a&&(e=yt.WEBP));break;case yt.WEBP:a||(n?e=yt.PNG:i&&(e=yt.SVG));break}this.currentResType=e}}},computed:{platformSelectOptions:function(){return[{name:"Web",value:Ct.WEB,selected:this.downloadPlatform===Ct.WEB},{name:"Android",value:Ct.ANDROID,selected:this.downloadPlatform===Ct.ANDROID},{name:"iOS",value:Ct.IOS,selected:this.downloadPlatform===Ct.IOS}]},resTypeSelectOptions:function(){var t=this.currentResType,e={value:yt.PNG,name:"PNG"};e.selected=t===yt.PNG,e.disabled=!this.exportPng;var r={value:yt.WEBP,name:"WEBP"};r.selected=t===yt.WEBP,r.disabled=!this.exportWebP;var n={value:yt.SVG,name:"SVG"};return n.selected=t===yt.SVG,n.disabled=!this.exportSvg,[e,r,n]},exportWebP:function(){return _t(this.curArtboard.artboard)},exportPng:function(){return xt(this.curArtboard.artboard)},exportSvg:function(){return kt(this.curArtboard.artboard)},currentResInSvg:function(){return this.currentResType===yt.SVG},currentResInWebP:function(){return this.currentResType===yt.WEBP},selectNodes:function(){var t=this.curArtboard.exportNodes,e=[];return t.forEach((function(t){t.markedForExport&&t.mlUserSelectDown&&e.push(t)})),e},exportNodeCount:function(){var t=this.curArtboard.exportNodes;return t.length}},components:{Header:mc,ExportNodeItem:xc,PropertyDownloadOptions:Ds,Select:Ms},watch:{inMultDownMode:function(t){this.downloadPlatform=this.calcPlatformUse,_c(this.curArtboard,t),this.initCurrentResType()},curArtboard:function(t,e){_c(e,!1),this.inMultDownMode&&_c(t,!0),this.initCurrentResType()}},data:function(){return{currentResType:yt.PNG,CALC_PLATFORM_TYPE:Ct,downloadPlatform:Ct.WEB}},created:function(){this.downloadPlatform=this.calcPlatformUse,this.inMultDownMode&&_c(this.curArtboard,!0),this.initCurrentResType()}},Cc=kc,Sc=(r("f19e"),Object(sr["a"])(Cc,rc,nc,!1,null,"047dd277",null)),Ac=Sc.exports,Ec={components:{ZoomContainer:xa,Properties:ec,LeftSide:io,MultDownload:Ac},methods:{clickReload:function(){window.location.reload()},checkArtboardData:function(t){var e=this;if(t){var r=!0;u(t)&&!1===t.isLoaded&&(r=!1),o&&console.log("data.load.start"),Te(t).then((function(t){if(!r&&t.isLoaded){o&&console.log("data.loaded");var n=t.artboard;if(u(n)){var i=n.mlConfig;if(u(i)&&"number"===typeof i.platform){var a=dt(n.docGuid,i.platform);e.$store.commit("setPlatform",a);var s=ut(n.docGuid);e.$store.commit("setUnitTemplate",s)}var c=ct.initNodeGuid;if(c){ct.initNodeGuid=null;var l=t.childs.find((function(t){return t.guid===c}));l&&e.curNode!==l&&e.setCurNode(l)}}}}))}}},watch:{curArtboard:function(t){this.checkArtboardData(t)}},computed:{isLoaded:function(){return this.curArtboard.isLoaded},isFetching:function(){return this.curArtboard.isFetching},isError:function(){return this.curArtboard.isError}},created:function(){this.checkArtboardData(this.curArtboard)}},Nc=Ec,Pc=(r("b2e5"),Object(sr["a"])(Nc,Aa,Ea,!1,null,"6af7ee26",null)),Tc=Pc.exports,Mc=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visible?r("section",{staticClass:"pop-box webp-tip"},[r("div",{staticClass:"box"},[r("h4",[t._v("浏览器性能提示")]),r("p",[t._v("Safari浏览器可能会出现响应卡顿及WebP资源无法加载,建议使用Chrome、Firefox浏览器访问.")]),r("div",{staticClass:"footer"},[r("div",[r("a",{staticClass:"checkbox",class:{on:t.remember},attrs:{href:"javascript:;"},on:{click:function(e){t.remember=!t.remember}}},[r("i",[t._v("浏览器关闭前不再提示")])])]),r("div",[r("a",{staticClass:"button light",attrs:{href:"javascript:;"},on:{click:function(e){return t.clickConfirm()}}},[t._v("我知道了")])])])])]):t._e()},Ic=[],Oc="safari_webp_notip",Lc={methods:{clickConfirm:function(){this.remember&&Ht(Oc,"1"),this.visible=!1},checkWebPSupport:function(){var t=this;clearTimeout(this.handle),this.handle=setTimeout((function(){t._checkWebPSupport()}),100)},_checkWebPSupport:function(){var t=this;if(this.inCloudMode&&this.allArtboardLoadChecked){var e="1"===Gt(Oc,!1);e||Ye((function(e){Ke?t.visible=!0:e===Xe.Support&&Ht(Oc,"1")}))}}},computed:{allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked}},watch:{allArtboardLoadChecked:function(){this.checkWebPSupport()},inCloudMode:function(){this.checkWebPSupport()}},data:function(){return{visible:!1,remember:!1,handle:0}},beforeDestroy:function(){clearTimeout(this.handle)},created:function(){this.checkWebPSupport()}},Dc=Lc,Rc=(r("c072"),Object(sr["a"])(Dc,Mc,Ic,!1,null,"02dca220",null)),Fc=Rc.exports,Bc={computed:{emptyText:function(){return this.inCloudMode?0===this.cloudCurrentFolderId?"私有云下还没有文件夹,请在标记狮中添加":"当前文件夹是空的":"未检测到数据,请尝试重新从XD中导出"},artboardLoadProgressText:function(){return Math.floor(1e4*this.artboardLoadProgress.current/this.artboardLoadProgress.count)/100+"%"},artboardLoadProgress:function(){return this.$store.state.artboardLoadProgress},allArtboardLoadChecked:function(){return this.$store.state.allArtboardLoadChecked},isEmptyData:function(){return 0===this.documentArtboards.length}},watch:{curArtboard:function(){var t=this;!o&&this.checkUserState().then((function(e){t.$store.commit("setMyState",e)})).catch((function(){}))}},components:{EmptyData:ii,ArtboardList:Sa,ArtboardInfo:Tc,Header:Hn,Tip:qr,ArtboardListItemMenu:Gr,InOutputTip:vn,Authority:Jn,FolderNav:un,CloudNeedLoginTip:Ar,SafariWebpTip:Fc}},zc=Bc,Wc=(r("4352"),Object(sr["a"])(zc,wr,yr,!1,null,"bcce309e",null)),$c=Wc.exports;We["a"].config.productionTip=!1,ct.initTitle=document.title;var Uc=-1!==navigator.userAgent.indexOf("MSIE");if(Uc)document.body.innerHTML="很抱歉,不支持在IE浏览器中浏览标注信息,请使用Chrome,Firefox,Edge等浏览器浏览";else{Be.allArtboardLoadChecked((function(t){tr.commit("artboardLoadProgress",t)})).then((function(){tr.commit("setDocument",Be),qe(),ct.inCloudMode?function(){tr.commit("allArtboardLoadChecked",!0);var t=tr.state.cloud.defaultArtboardGuid,e=null,r=null;if(t){if(e=Be.documentArtboards.find((function(e){return e.artboard.guid===t})),e){var n=window.location.href,i=/\/viewer\/\d+\/[\w-]+\/([\w-]+)\//.exec(n),a=i?i[1]:null;r=e.childs.find((function(t){return t.guid===a})),r||(ct.initNodeGuid=a)}tr.state.curArtboard!==e&&tr.commit("curArtboard",e),tr.state.curNode!==r&&tr.commit("curNode",r)}}():function(){var t=function(){var t=window.location.hash,e=null,r=null;if(t){var n=/\/artboard\/([\w-]+)/.exec(t);if(n){var i=n[1];e=Be.documentArtboards.find((function(t){return t.artboard.guid===i}))}if(e&&(n=/\/node\/([\w-]+)/.exec(t),n)){var a=n[1],o=e.childs;r=o.find((function(t){return t.guid===a}))}}tr.state.curArtboard!==e&&tr.commit("curArtboard",e),tr.state.curNode!==r&&tr.commit("curNode",r)};window.addEventListener("hashchange",t),t(),setTimeout((function(){tr.commit("allArtboardLoadChecked",!0)}),100)}()})),We["a"].mixin(gr);var jc=new We["a"]({store:tr,render:function(t){return t($c)}});Ye((function(t){tr.commit("isSupportWebp",t),jc.$mount("#app")}))}},5768:function(t,e,r){"use strict";var n=r("f4c3"),i=r.n(n);i.a},5944:function(t,e,r){"use strict";var n=r("f601"),i=r.n(n);i.a},"66a4":function(t,e,r){},"66d2":function(t,e,r){},"6be0":function(t,e,r){},7058:function(t,e,r){"use strict";var n=r("b99b"),i=r.n(n);i.a},"70b8":function(t,e,r){"use strict";var n=r("e47e"),i=r.n(n);i.a},7118:function(t,e,r){"use strict";var n=r("b8b0"),i=r.n(n);i.a},7211:function(t,e,r){"use strict";var n=r("1d53"),i=r.n(n);i.a},"72ad":function(t,e,r){},"750b":function(t,e,r){"use strict";var n=r("7dde"),i=r.n(n);i.a},"7dde":function(t,e,r){},"7fa0":function(t,e,r){},"7fcb":function(t,e,r){},"8b7f":function(t,e,r){},"91b8":function(t,e,r){"use strict";var n=r("3095"),i=r.n(n);i.a},9470:function(t,e,r){"use strict";var n=r("a2f5"),i=r.n(n);i.a},9661:function(t,e,r){},"9e76":function(t,e,r){},a2f5:function(t,e,r){},a58b:function(t,e,r){"use strict";var n=r("66d2"),i=r.n(n);i.a},a70a:function(t,e,r){},abb1:function(t,e,r){"use strict";var n=r("0850"),i=r.n(n);i.a},acf8:function(t,e,r){},aee4:function(t,e,r){"use strict";var n=r("453e"),i=r.n(n);i.a},af1e:function(t,e,r){},b16b:function(t,e,r){"use strict";(function(t,e,n){r("3846"),r("4917"),r("b6e4"),r("6b54"),r("6c7b"),r("ac6a"),r("7f7f"),r("9c29"),r("af56"),r("34ef"),r("a481");var i,a=r("53ca");
/*!

JSZip v3.3.0 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/
(function(t){if("object"===("undefined"===typeof exports?"undefined":Object(a["a"])(exports))&&"undefined"!==typeof n)n.exports=t();else if("function"===typeof define&&r("3c35"))define([],t);else{var i;i="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:this,i.JSZip=t()}})((function(){return function t(e,r,n){function a(s,c){if(!r[s]){if(!e[s]){var l="function"==typeof i&&i;if(!c&&l)return i(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[s]={exports:{}};e[s][0].call(d.exports,(function(t){var r=e[s][1][t];return a(r||t)}),d,d.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof i&&i,s=0;s<n.length;s++)a(n[s]);return a}({1:[function(t,e,r){var n=t("./utils"),i=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){var e,r,i,o,s,c,l,u=[],d=0,h=t.length,f=h,p="string"!==n.getTypeOf(t);while(d<t.length)f=h-d,p?(e=t[d++],r=d<h?t[d++]:0,i=d<h?t[d++]:0):(e=t.charCodeAt(d++),r=d<h?t.charCodeAt(d++):0,i=d<h?t.charCodeAt(d++):0),o=e>>2,s=(3&e)<<4|r>>4,c=f>1?(15&r)<<2|i>>6:64,l=f>2?63&i:64,u.push(a.charAt(o)+a.charAt(s)+a.charAt(c)+a.charAt(l));return u.join("")},r.decode=function(t){var e,r,n,o,s,c,l,u=0,d=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");var f,p=3*t.length/4;if(t.charAt(t.length-1)===a.charAt(64)&&p--,t.charAt(t.length-2)===a.charAt(64)&&p--,p%1!==0)throw new Error("Invalid base64 input, bad content length.");f=i.uint8array?new Uint8Array(0|p):new Array(0|p);while(u<t.length)o=a.indexOf(t.charAt(u++)),s=a.indexOf(t.charAt(u++)),c=a.indexOf(t.charAt(u++)),l=a.indexOf(t.charAt(u++)),e=o<<2|s>>4,r=(15&s)<<4|c>>2,n=(3&c)<<6|l,f[d++]=e,64!==c&&(f[d++]=r),64!==l&&(f[d++]=n);return f}},{"./support":30,"./utils":32}],2:[function(t,e,r){var n=t("./external"),i=t("./stream/DataWorker"),a=t("./stream/DataLengthProbe"),o=t("./stream/Crc32Probe");function s(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i}s.prototype={getContentWorker:function(){var t=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo["data_length"]!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,r){return t.pipe(new o).pipe(new a("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new a("compressedSize")).withStreamInfo("compression",e)},e.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,r){var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,r){var n=t("./utils");function i(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}var a=i();function o(t,e,r,n){var i=a,o=n+r;t^=-1;for(var s=n;s<o;s++)t=t>>>8^i[255&(t^e[s])];return-1^t}function s(t,e,r,n){var i=a,o=n+r;t^=-1;for(var s=n;s<o;s++)t=t>>>8^i[255&(t^e.charCodeAt(s))];return-1^t}e.exports=function(t,e){if("undefined"===typeof t||!t.length)return 0;var r="string"!==n.getTypeOf(t);return r?o(0|e,t,t.length,0):s(0|e,t,t.length,0)}},{"./utils":32}],5:[function(t,e,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,e,r){var n=null;n="undefined"!==typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:37}],7:[function(t,e,r){var n="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array,i=t("pako"),a=t("./utils"),o=t("./stream/GenericWorker"),s=n?"uint8array":"array";function c(t,e){o.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}r.magic="\b\0",a.inherits(c,o),c.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(a.transformTo(s,t.data),!1)},c.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},r.compressWorker=function(t){return new c("Deflate",t)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,r){var n=t("../utils"),i=t("../stream/GenericWorker"),a=t("../utf8"),o=t("../crc32"),s=t("../signature"),c=function(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},l=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16},u=function(t,e){return 63&(t||0)},d=function(t,e,r,i,d,h){var f,p,m=t["file"],v=t["compression"],b=h!==a.utf8encode,g=n.transformTo("string",h(m.name)),w=n.transformTo("string",a.utf8encode(m.name)),y=m.comment,x=n.transformTo("string",h(y)),_=n.transformTo("string",a.utf8encode(y)),k=w.length!==m.name.length,C=_.length!==y.length,S="",A="",E="",N=m.dir,P=m.date,T={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(T.crc32=t["crc32"],T.compressedSize=t["compressedSize"],T.uncompressedSize=t["uncompressedSize"]);var M=0;e&&(M|=8),b||!k&&!C||(M|=2048);var I=0,O=0;N&&(I|=16),"UNIX"===d?(O=798,I|=l(m.unixPermissions,N)):(O=20,I|=u(m.dosPermissions,N)),f=P.getUTCHours(),f<<=6,f|=P.getUTCMinutes(),f<<=5,f|=P.getUTCSeconds()/2,p=P.getUTCFullYear()-1980,p<<=4,p|=P.getUTCMonth()+1,p<<=5,p|=P.getUTCDate(),k&&(A=c(1,1)+c(o(g),4)+w,S+="up"+c(A.length,2)+A),C&&(E=c(1,1)+c(o(x),4)+_,S+="uc"+c(E.length,2)+E);var L="";L+="\n\0",L+=c(M,2),L+=v.magic,L+=c(f,2),L+=c(p,2),L+=c(T.crc32,4),L+=c(T.compressedSize,4),L+=c(T.uncompressedSize,4),L+=c(g.length,2),L+=c(S.length,2);var D=s.LOCAL_FILE_HEADER+L+g+S,R=s.CENTRAL_FILE_HEADER+c(O,2)+L+c(x.length,2)+"\0\0\0\0"+c(I,4)+c(i,4)+g+S+x;return{fileRecord:D,dirRecord:R}},h=function(t,e,r,i,a){var o="",l=n.transformTo("string",a(i));return o=s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(t,2)+c(t,2)+c(e,4)+c(r,4)+c(l.length,2)+l,o},f=function(t){var e="";return e=s.DATA_DESCRIPTOR+c(t["crc32"],4)+c(t["compressedSize"],4)+c(t["uncompressedSize"],4),e};function p(t,e,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(p,i),p.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,i.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}))},p.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t["file"].name;var e=this.streamFiles&&!t["file"].dir;if(e){var r=d(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t["file"].dir,r=d(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:f(t),meta:{percent:100}});else{this.push({data:r.fileRecord,meta:{percent:0}});while(this.contentBuffer.length)this.push(this.contentBuffer.shift())}this.currentFile=null},p.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,n=h(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},p.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(t){var e=this._sources;if(!i.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},p.prototype.lock=function(){i.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,r){var n=t("../compressions"),i=t("./ZipFileWorker"),a=function(t,e){var r=t||e,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i};r.generateWorker=function(t,e,r){var n=new i(e.streamFiles,r,e.platform,e.encodeFileName),o=0;try{t.forEach((function(t,r){o++;var i=a(r.options.compression,e.compression),s=r.options.compressionOptions||e.compressionOptions||{},c=r.dir,l=r.date;r._compressWorker(i,s).withStreamInfo("file",{name:t,dir:c,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(n)})),n.entriesCount=o}catch(s){n.error(s)}return n}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,r){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!==typeof this[e]&&(t[e]=this[e]);return t}}n.prototype=t("./object"),n.prototype.loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.2.0",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,r){var n=t("./utils"),i=t("./external"),a=t("./utf8"),o=(n=t("./utils"),t("./zipEntries")),s=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function l(t){return new i.Promise((function(e,r){var n=t.decompressed.getContentWorker().pipe(new s);n.on("error",(function(t){r(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var r=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new o(e);return r.load(t),r})).then((function(t){var r=[i.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var a=0;a<n.length;a++)r.push(l(n[a]));return i.Promise.all(r)})).then((function(t){for(var n=t.shift(),i=n.files,a=0;a<i.length;a++){var o=i[a];r.file(o.fileNameStr,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,r){var n=t("../utils"),i=t("../stream/GenericWorker");function a(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(a,i),a.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},a.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,r){var n=t("readable-stream").Readable,i=t("../utils");function a(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),r&&r(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}i.inherits(a,n),a.prototype._read=function(){this._helper.resume()},e.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,r,n){r.exports={isNode:"undefined"!==typeof t,newBufferFrom:function(e,r){if(t.from&&t.from!==Uint8Array.from)return t.from(e,r);if("number"===typeof e)throw new Error('The "data" argument must not be a number');return new t(e,r)},allocBuffer:function(e){if(t.alloc)return t.alloc(e);var r=new t(e);return r.fill(0),r},isBuffer:function(e){return t.isBuffer(e)},isStream:function(t){return t&&"function"===typeof t.on&&"function"===typeof t.pause&&"function"===typeof t.resume}}},{}],15:[function(t,e,r){var n=t("./utf8"),i=t("./utils"),a=t("./stream/GenericWorker"),o=t("./stream/StreamHelper"),s=t("./defaults"),c=t("./compressedObject"),l=t("./zipObject"),u=t("./generate"),d=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),f=function(t,e,r){var n,o=i.getTypeOf(e),u=i.extend(r||{},s);u.date=u.date||new Date,null!==u.compression&&(u.compression=u.compression.toUpperCase()),"string"===typeof u.unixPermissions&&(u.unixPermissions=parseInt(u.unixPermissions,8)),u.unixPermissions&&16384&u.unixPermissions&&(u.dir=!0),u.dosPermissions&&16&u.dosPermissions&&(u.dir=!0),u.dir&&(t=m(t)),u.createFolders&&(n=p(t))&&v.call(this,n,!0);var f="string"===o&&!1===u.binary&&!1===u.base64;r&&"undefined"!==typeof r.binary||(u.binary=!f);var b=e instanceof c&&0===e.uncompressedSize;(b||u.dir||!e||0===e.length)&&(u.base64=!1,u.binary=!0,e="",u.compression="STORE",o="string");var g=null;g=e instanceof c||e instanceof a?e:d.isNode&&d.isStream(e)?new h(t,e):i.prepareContent(t,e,u.binary,u.optimizedBinaryString,u.base64);var w=new l(t,g,u);this.files[t]=w},p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},v=function(t,e){return e="undefined"!==typeof e?e:s.createFolders,t=m(t),this.files[t]||f.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function b(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var g={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],r=e.slice(this.root.length,e.length),r&&e.slice(0,this.root.length)===this.root&&t(r,n))},filter:function(t){var e=[];return this.forEach((function(r,n){t(r,n)&&e.push(n)})),e},file:function(t,e,r){if(1===arguments.length){if(b(t)){var n=t;return this.filter((function(t,e){return!e.dir&&n.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null}return t=this.root+t,f.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(b(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=v.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if(r=i.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode}),r.type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var s=r.comment||this.comment||"";e=u.generateWorker(this,r,s)}catch(c){e=new a("error"),e.error(c)}return new o(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return t=t||{},t.type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=g},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,r){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,r){var n=t("./DataReader"),i=t("../utils");function a(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}i.inherits(a,n),a.prototype.byteAt=function(t){return this.data[this.zero+t]},a.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===e&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a-this.zero;return-1},a.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.readData(4);return e===a[0]&&r===a[1]&&n===a[2]&&i===a[3]},a.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,e,r){var n=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,r){var n=t("./Uint8ArrayReader"),i=t("../utils");function a(t){n.call(this,t)}i.inherits(a,n),a.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,r){var n=t("./DataReader"),i=t("../utils");function a(t){n.call(this,t)}i.inherits(a,n),a.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},a.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},a.prototype.readAndCheckSignature=function(t){var e=this.readData(4);return t===e},a.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,e,r){var n=t("./ArrayReader"),i=t("../utils");function a(t){n.call(this,t)}i.inherits(a,n),a.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,r){var n=t("../utils"),i=t("../support"),a=t("./ArrayReader"),o=t("./StringReader"),s=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new s(t):i.uint8array?new c(n.transformTo("uint8array",t)):new a(n.transformTo("array",t)):new o(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,r){var n=t("./GenericWorker"),i=t("../utils");function a(t){n.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(a,n),a.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,r){var n=t("./GenericWorker"),i=t("../crc32"),a=t("../utils");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a.inherits(o,n),o.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,r){var n=t("../utils"),i=t("./GenericWorker");function a(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(a,i),a.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,r){var n=t("../utils"),i=t("./GenericWorker"),a=16384;function o(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=a,e=null,r=Math.min(this.max,this.index+t);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,r);break;case"uint8array":e=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":e=this.data.slice(this.index,r);break}return this.index=r,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,r){function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],29:[function(e,r,n){var i=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),s=e("../base64"),c=e("../support"),l=e("../external"),u=null;if(c.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(m){}function d(t,e,r){switch(t){case"blob":return i.newBlob(i.transformTo("arraybuffer",e),r);case"base64":return s.encode(e);default:return i.transformTo(t,e)}}function h(e,r){var n,i=0,a=null,o=0;for(n=0;n<r.length;n++)o+=r[n].length;switch(e){case"string":return r.join("");case"array":return Array.prototype.concat.apply([],r);case"uint8array":for(a=new Uint8Array(o),n=0;n<r.length;n++)a.set(r[n],i),i+=r[n].length;return a;case"nodebuffer":return t.concat(r);default:throw new Error("concat : unsupported type '"+e+"'")}}function f(t,e){return new l.Promise((function(r,n){var i=[],a=t._internalType,o=t._outputType,s=t._mimeType;t.on("data",(function(t,r){i.push(t),e&&e(r)})).on("error",(function(t){i=[],n(t)})).on("end",(function(){try{var t=d(o,h(a,i),s);r(t)}catch(m){n(m)}i=[]})).resume()}))}function p(t,e,r){var n=e;switch(e){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string";break}try{this._internalType=n,this._outputType=e,this._mimeType=r,i.checkSupport(n),this._worker=t.pipe(new a(n)),t.lock()}catch(m){this._worker=new o("error"),this._worker.error(m)}}p.prototype={accumulate:function(t){return f(this,t)},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){i.delay(e,arguments,r)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t)}},r.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,r,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array,n.nodebuffer="undefined"!==typeof t,n.uint8array="undefined"!==typeof Uint8Array,"undefined"===typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(s){try{var a=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,o=new a;o.append(i),n.blob=0===o.getBlob("application/zip").size}catch(s){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(s){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,r){for(var n=t("./utils"),i=t("./support"),a=t("./nodejsUtils"),o=t("./stream/GenericWorker"),s=new Array(256),c=0;c<256;c++)s[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;s[254]=s[254]=1;var l=function(t){var e,r,n,a,o,s=t.length,c=0;for(a=0;a<s;a++)r=t.charCodeAt(a),55296===(64512&r)&&a+1<s&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),c+=r<128?1:r<2048?2:r<65536?3:4;for(e=i.uint8array?new Uint8Array(c):new Array(c),o=0,a=0;o<c;a++)r=t.charCodeAt(a),55296===(64512&r)&&a+1<s&&(n=t.charCodeAt(a+1),56320===(64512&n)&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|63&r):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},u=function(t,e){var r;e=e||t.length,e>t.length&&(e=t.length),r=e-1;while(r>=0&&128===(192&t[r]))r--;return r<0||0===r?e:r+s[t[r]]>e?r:e},d=function(t){var e,r,i,a,o=t.length,c=new Array(2*o);for(r=0,e=0;e<o;)if(i=t[e++],i<128)c[r++]=i;else if(a=s[i],a>4)c[r++]=65533,e+=a-1;else{i&=2===a?31:3===a?15:7;while(a>1&&e<o)i=i<<6|63&t[e++],a--;a>1?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return c.length!==r&&(c.subarray?c=c.subarray(0,r):c.length=r),n.applyFromCharCode(c)};function h(){o.call(this,"utf-8 decode"),this.leftOver=null}function f(){o.call(this,"utf-8 encode")}r.utf8encode=function(t){return i.nodebuffer?a.newBufferFrom(t,"utf-8"):l(t)},r.utf8decode=function(t){return i.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):(t=n.transformTo(i.uint8array?"uint8array":"array",t),d(t))},n.inherits(h,o),h.prototype.processChunk=function(t){var e=n.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var a=e;e=new Uint8Array(a.length+this.leftOver.length),e.set(this.leftOver,0),e.set(a,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var o=u(e),s=e;o!==e.length&&(i.uint8array?(s=e.subarray(0,o),this.leftOver=e.subarray(o,e.length)):(s=e.slice(0,o),this.leftOver=e.slice(o,e.length))),this.push({data:r.utf8decode(s),meta:t.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=h,n.inherits(f,o),f.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta})},r.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,r){var n=t("./support"),i=t("./base64"),a=t("./nodejsUtils"),o=t("set-immediate-shim"),s=t("./external");function c(t){var e=null;return e=n.uint8array?new Uint8Array(t.length):new Array(t.length),u(t,e)}function l(t){return t}function u(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob([t],{type:e})}catch(a){try{var n=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,i=new n;return i.append(t),i.getBlob(e)}catch(a){throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(t,e,r){var n=[],i=0,a=t.length;if(a<=r)return String.fromCharCode.apply(null,t);while(i<a)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,a)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,a)))),i+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,a.allocBuffer(1)).length}catch(t){return!1}}()}};function h(t){var e=65536,n=r.getTypeOf(t),i=!0;if("uint8array"===n?i=d.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=d.applyCanBeUsed.nodebuffer),i)while(e>1)try{return d.stringifyByChunk(t,n,e)}catch(a){e=Math.floor(e/2)}return d.stringifyByChar(t)}function f(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.applyFromCharCode=h;var p={};p["string"]={string:l,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return p["string"]["uint8array"](t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))},nodebuffer:function(t){return u(t,a.allocBuffer(t.length))}},p["array"]={string:h,array:l,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return a.newBufferFrom(t)}},p["arraybuffer"]={string:function(t){return h(new Uint8Array(t))},array:function(t){return f(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:l,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return a.newBufferFrom(new Uint8Array(t))}},p["uint8array"]={string:h,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:l,nodebuffer:function(t){return a.newBufferFrom(t)}},p["nodebuffer"]={string:h,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return p["nodebuffer"]["uint8array"](t).buffer},uint8array:function(t){return f(t,new Uint8Array(t.length))},nodebuffer:l},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var n=r.getTypeOf(e),i=p[n][t](e);return i},r.getTypeOf=function(t){return"string"===typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&a.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){var e=n[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)e=t.charCodeAt(r),n+="\\x"+(e<16?"0":"")+e.toString(16).toUpperCase();return n},r.delay=function(t,e,r){o((function(){t.apply(r||null,e||[])}))},r.inherits=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&"undefined"===typeof r[e]&&(r[e]=arguments[t][e]);return r},r.prepareContent=function(t,e,a,o,l){var u=s.Promise.resolve(e).then((function(t){var e=n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)));return e&&"undefined"!==typeof FileReader?new s.Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){r(t.target.error)},n.readAsArrayBuffer(t)})):t}));return u.then((function(e){var n=r.getTypeOf(e);return n?("arraybuffer"===n?e=r.transformTo("uint8array",e):"string"===n&&(l?e=i.decode(e):a&&!0!==o&&(e=c(e))),e):s.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,r){var n=t("./reader/readerFor"),i=t("./utils"),a=t("./signature"),o=t("./zipEntry"),s=(t("./utf8"),t("./support"));function c(t){this.files=[],this.loadOptions=t}c.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4),i=n===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",r=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};var t,e,r,n=this.zip64EndOfCentralSize-44,i=0;while(i<n)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;this.reader.setIndex(this.centralDirOffset);while(this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER))t=new o({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(t<0){var e=!this.isSignature(0,a.LOCAL_FILE_HEADER);throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(t);var r=t;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),t<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var o=r-n;if(o>0)this.isSignature(r,a.CENTRAL_FILE_HEADER)||(this.reader.zero=o);else if(o<0)throw new Error("Corrupted zip: missing "+Math.abs(o)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,r){var n=t("./reader/readerFor"),i=t("./utils"),a=t("./compressedObject"),o=t("./crc32"),s=t("./utf8"),c=t("./compressions"),l=t("./support"),u=0,d=3,h=function(t){for(var e in c)if(c.hasOwnProperty(e)&&c[e].magic===t)return c[e];return null};function f(t,e){this.options=t,this.loadOptions=e}f.prototype={isEncrypted:function(){return 1===(1&this.bitFlag)},useUTF8:function(){return 2048===(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(e=h(this.compressionMethod),null===e)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),t===u&&(this.dosPermissions=63&this.externalFileAttributes),t===d&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index+this.extraFieldsLength;this.extraFields||(this.extraFields={});while(t.index<i)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n}},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var a=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(a)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||o(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,r){var n=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),a=t("./utf8"),o=t("./compressedObject"),s=t("./stream/GenericWorker"),c=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};c.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");r=t.toLowerCase();var i="string"===r||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(e=e.pipe(new a.Utf8EncodeWorker)),!o&&i&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(c){e=new s("error"),e.error(c)}return new n(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof o&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<l.length;d++)c.prototype[l[d]]=u;e.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,r,n){(function(t){var e,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var a=0,o=new i(u),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),e=function(){s.data=a=++a%2}}else if(t.setImmediate||"undefined"===typeof t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var c=new t.MessageChannel;c.port1.onmessage=u,e=function(){c.port2.postMessage(0)}}var l=[];function u(){var t,e;n=!0;var r=l.length;while(r){e=l,l=[],t=-1;while(++t<r)e[t]();r=l.length}n=!1}function d(t){1!==l.push(t)||n||e()}r.exports=d}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],37:[function(t,e,r){var n=t("immediate");function i(){}var o={},s=["REJECTED"],c=["FULFILLED"],l=["PENDING"];function u(t){if("function"!==typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==i&&p(this,t)}function d(t,e,r){this.promise=t,"function"===typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"===typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(t,e,r){n((function(){var n;try{n=e(r)}catch(i){return o.reject(t,i)}n===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,n)}))}function f(t){var e=t&&t.then;if(t&&("object"===Object(a["a"])(t)||"function"===typeof t)&&"function"===typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var r=!1;function n(e){r||(r=!0,o.reject(t,e))}function i(e){r||(r=!0,o.resolve(t,e))}function a(){e(i,n)}var s=m(a);"error"===s.status&&n(s.value)}function m(t,e){var r={};try{r.value=t(e),r.status="success"}catch(n){r.status="error",r.value=n}return r}function v(t){return t instanceof this?t:o.resolve(new this(i),t)}function b(t){var e=new this(i);return o.reject(e,t)}function g(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);var a=new Array(r),s=0,c=-1,l=new this(i);while(++c<r)u(t[c],c);return l;function u(t,i){function c(t){a[i]=t,++s!==r||n||(n=!0,o.resolve(l,a))}e.resolve(t).then(c,(function(t){n||(n=!0,o.reject(l,t))}))}}function w(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);var a=-1,s=new this(i);while(++a<r)c(t[a]);return s;function c(t){e.resolve(t).then((function(t){n||(n=!0,o.resolve(s,t))}),(function(t){n||(n=!0,o.reject(s,t))}))}}e.exports=u,u.prototype["finally"]=function(t){if("function"!==typeof t)return this;var e=this.constructor;return this.then(r,n);function r(r){function n(){return r}return e.resolve(t()).then(n)}function n(r){function n(){throw r}return e.resolve(t()).then(n)}},u.prototype["catch"]=function(t){return this.then(null,t)},u.prototype.then=function(t,e){if("function"!==typeof t&&this.state===c||"function"!==typeof e&&this.state===s)return this;var r=new this.constructor(i);if(this.state!==l){var n=this.state===c?t:e;h(r,n,this.outcome)}else this.queue.push(new d(r,t,e));return r},d.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},d.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},d.prototype.callRejected=function(t){o.reject(this.promise,t)},d.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var r=m(f,e);if("error"===r.status)return o.reject(t,r.value);var n=r.value;if(n)p(t,n);else{t.state=c,t.outcome=e;var i=-1,a=t.queue.length;while(++i<a)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;var r=-1,n=t.queue.length;while(++r<n)t.queue[r].callRejected(e);return t},u.resolve=v,u.reject=b,u.all=g,u.race=w},{immediate:36}],38:[function(t,e,r){var n=t("./lib/utils/common").assign,i=t("./lib/deflate"),a=t("./lib/inflate"),o=t("./lib/zlib/constants"),s={};n(s,i,a,o),e.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,r){var n=t("./zlib/deflate"),i=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/messages"),s=t("./zlib/zstream"),c=Object.prototype.toString,l=0,u=4,d=0,h=1,f=2,p=-1,m=0,v=8;function b(t){if(!(this instanceof b))return new b(t);this.options=i.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==d)throw new Error(o[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var l;if(l="string"===typeof e.dictionary?a.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=n.deflateSetDictionary(this.strm,l),r!==d)throw new Error(o[r]);this._dict_set=!0}}function g(t,e){var r=new b(e);if(r.push(t,!0),r.err)throw r.msg||o[r.err];return r.result}function w(t,e){return e=e||{},e.raw=!0,g(t,e)}function y(t,e){return e=e||{},e.gzip=!0,g(t,e)}b.prototype.push=function(t,e){var r,o,s=this.strm,p=this.options.chunkSize;if(this.ended)return!1;o=e===~~e?e:!0===e?u:l,"string"===typeof t?s.input=a.string2buf(t):"[object ArrayBuffer]"===c.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(p),s.next_out=0,s.avail_out=p),r=n.deflate(s,o),r!==h&&r!==d)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||o!==u&&o!==f)||("string"===this.options.to?this.onData(a.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&r!==h);return o===u?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===d):o!==f||(this.onEnd(d),s.avail_out=0,!0)},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===d&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=b,r.deflate=g,r.deflateRaw=w,r.gzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,r){var n=t("./zlib/inflate"),i=t("./utils/common"),a=t("./utils/strings"),o=t("./zlib/constants"),s=t("./zlib/messages"),c=t("./zlib/zstream"),l=t("./zlib/gzheader"),u=Object.prototype.toString;function d(t){if(!(this instanceof d))return new d(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==o.Z_OK)throw new Error(s[r]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function h(t,e){var r=new d(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}function f(t,e){return e=e||{},e.raw=!0,h(t,e)}d.prototype.push=function(t,e){var r,s,c,l,d,h,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,v=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?o.Z_FINISH:o.Z_NO_FLUSH,"string"===typeof t?f.input=a.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),r=n.inflate(f,o.Z_NO_FLUSH),r===o.Z_NEED_DICT&&m&&(h="string"===typeof m?a.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,r=n.inflateSetDictionary(this.strm,h)),r===o.Z_BUF_ERROR&&!0===v&&(r=o.Z_OK,v=!1),r!==o.Z_STREAM_END&&r!==o.Z_OK)return this.onEnd(r),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&r!==o.Z_STREAM_END&&(0!==f.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=a.utf8border(f.output,f.next_out),l=f.next_out-c,d=a.buf2string(f.output,c),f.next_out=l,f.avail_out=p-l,l&&i.arraySet(f.output,f.output,c,l,0),this.onData(d)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(v=!0)}while((f.avail_in>0||0===f.avail_out)&&r!==o.Z_STREAM_END);return r===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=d,r.inflate=h,r.inflateRaw=f,r.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,r){var n="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;r.assign=function(t){var e=Array.prototype.slice.call(arguments,1);while(e.length){var r=e.shift();if(r){if("object"!==Object(a["a"])(r))throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,o;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(o=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],o.set(a,i),i+=a.length;return o}},o={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],42:[function(t,e,r){var n=t("./common"),i=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(l){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(l){a=!1}for(var o=new n.Buf8(256),s=0;s<256;s++)o[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function c(t,e){if(e<65537&&(t.subarray&&a||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",o=0;o<e;o++)r+=String.fromCharCode(t[o]);return r}o[254]=o[254]=1,r.string2buf=function(t){var e,r,i,a,o,s=t.length,c=0;for(a=0;a<s;a++)r=t.charCodeAt(a),55296===(64512&r)&&a+1<s&&(i=t.charCodeAt(a+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),a++)),c+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(c),o=0,a=0;o<c;a++)r=t.charCodeAt(a),55296===(64512&r)&&a+1<s&&(i=t.charCodeAt(a+1),56320===(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),a++)),r<128?e[o++]=r:r<2048?(e[o++]=192|r>>>6,e[o++]=128|63&r):r<65536?(e[o++]=224|r>>>12,e[o++]=128|r>>>6&63,e[o++]=128|63&r):(e[o++]=240|r>>>18,e[o++]=128|r>>>12&63,e[o++]=128|r>>>6&63,e[o++]=128|63&r);return e},r.buf2binstring=function(t){return c(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,a,s=e||t.length,l=new Array(2*s);for(n=0,r=0;r<s;)if(i=t[r++],i<128)l[n++]=i;else if(a=o[i],a>4)l[n++]=65533,r+=a-1;else{i&=2===a?31:3===a?15:7;while(a>1&&r<s)i=i<<6|63&t[r++],a--;a>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return c(l,n)},r.utf8border=function(t,e){var r;e=e||t.length,e>t.length&&(e=t.length),r=e-1;while(r>=0&&128===(192&t[r]))r--;return r<0||0===r?e:r+o[t[r]]>e?r:e}},{"./common":41}],43:[function(t,e,r){function n(t,e,r,n){var i=65535&t|0,a=t>>>16&65535|0,o=0;while(0!==r){o=r>2e3?2e3:r,r-=o;do{i=i+e[n++]|0,a=a+i|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}e.exports=n},{}],44:[function(t,e,r){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,r){function n(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}var i=n();function a(t,e,r,n){var a=i,o=n+r;t^=-1;for(var s=n;s<o;s++)t=t>>>8^a[255&(t^e[s])];return-1^t}e.exports=a},{}],46:[function(t,e,r){var n,i=t("../utils/common"),a=t("./trees"),o=t("./adler32"),s=t("./crc32"),c=t("./messages"),l=0,u=1,d=3,h=4,f=5,p=0,m=1,v=-2,b=-3,g=-5,w=-1,y=1,x=2,_=3,k=4,C=0,S=2,A=8,E=9,N=15,P=8,T=29,M=256,I=M+1+T,O=30,L=19,D=2*I+1,R=15,F=3,B=258,z=B+F+1,W=32,$=42,U=69,j=73,V=91,G=103,H=113,Y=666,X=1,K=2,Z=3,q=4,J=3;function Q(t,e){return t.msg=c[e],e}function tt(t){return(t<<1)-(t>4?9:0)}function et(t){var e=t.length;while(--e>=0)t[e]=0}function rt(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function nt(t,e){a._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,rt(t.strm)}function it(t,e){t.pending_buf[t.pending++]=e}function at(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function ot(t,e,r,n){var a=t.avail_in;return a>n&&(a=n),0===a?0:(t.avail_in-=a,i.arraySet(e,t.input,t.next_in,a,r),1===t.state.wrap?t.adler=o(t.adler,e,a,r):2===t.state.wrap&&(t.adler=s(t.adler,e,a,r)),t.next_in+=a,t.total_in+=a,a)}function st(t,e){var r,n,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,c=t.strstart>t.w_size-z?t.strstart-(t.w_size-z):0,l=t.window,u=t.w_mask,d=t.prev,h=t.strstart+B,f=l[a+o-1],p=l[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(r=e,l[r+o]===p&&l[r+o-1]===f&&l[r]===l[a]&&l[++r]===l[a+1]){a+=2,r++;do{}while(l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&l[++a]===l[++r]&&a<h);if(n=B-(h-a),a=h-B,n>o){if(t.match_start=e,o=n,n>=s)break;f=l[a+o-1],p=l[a+o]}}}while((e=d[e&u])>c&&0!==--i);return o<=t.lookahead?o:t.lookahead}function ct(t){var e,r,n,a,o,s=t.w_size;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-z)){i.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,r=t.hash_size,e=r;do{n=t.head[--e],t.head[e]=n>=s?n-s:0}while(--r);r=s,e=r;do{n=t.prev[--e],t.prev[e]=n>=s?n-s:0}while(--r);a+=s}if(0===t.strm.avail_in)break;if(r=ot(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=r,t.lookahead+t.insert>=F){o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;while(t.insert)if(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+F-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,t.lookahead+t.insert<F)break}}while(t.lookahead<z&&0!==t.strm.avail_in)}function lt(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(ct(t),0===t.lookahead&&e===l)return X;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,nt(t,!1),0===t.strm.avail_out))return X;if(t.strstart-t.block_start>=t.w_size-z&&(nt(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===h?(nt(t,!0),0===t.strm.avail_out?Z:q):(t.strstart>t.block_start&&(nt(t,!1),t.strm.avail_out),X)}function ut(t,e){for(var r,n;;){if(t.lookahead<z){if(ct(t),t.lookahead<z&&e===l)return X;if(0===t.lookahead)break}if(r=0,t.lookahead>=F&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-z&&(t.match_length=st(t,r)),t.match_length>=F)if(n=a._tr_tally(t,t.strstart-t.match_start,t.match_length-F),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=F){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(nt(t,!1),0===t.strm.avail_out))return X}return t.insert=t.strstart<F-1?t.strstart:F-1,e===h?(nt(t,!0),0===t.strm.avail_out?Z:q):t.last_lit&&(nt(t,!1),0===t.strm.avail_out)?X:K}function dt(t,e){for(var r,n,i;;){if(t.lookahead<z){if(ct(t),t.lookahead<z&&e===l)return X;if(0===t.lookahead)break}if(r=0,t.lookahead>=F&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=F-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-z&&(t.match_length=st(t,r),t.match_length<=5&&(t.strategy===y||t.match_length===F&&t.strstart-t.match_start>4096)&&(t.match_length=F-1)),t.prev_length>=F&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-F,n=a._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-F),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=F-1,t.strstart++,n&&(nt(t,!1),0===t.strm.avail_out))return X}else if(t.match_available){if(n=a._tr_tally(t,0,t.window[t.strstart-1]),n&&nt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return X}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=a._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<F-1?t.strstart:F-1,e===h?(nt(t,!0),0===t.strm.avail_out?Z:q):t.last_lit&&(nt(t,!1),0===t.strm.avail_out)?X:K}function ht(t,e){for(var r,n,i,o,s=t.window;;){if(t.lookahead<=B){if(ct(t),t.lookahead<=B&&e===l)return X;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=F&&t.strstart>0&&(i=t.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){o=t.strstart+B;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);t.match_length=B-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=F?(r=a._tr_tally(t,1,t.match_length-F),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(nt(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===h?(nt(t,!0),0===t.strm.avail_out?Z:q):t.last_lit&&(nt(t,!1),0===t.strm.avail_out)?X:K}function ft(t,e){for(var r;;){if(0===t.lookahead&&(ct(t),0===t.lookahead)){if(e===l)return X;break}if(t.match_length=0,r=a._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(nt(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===h?(nt(t,!0),0===t.strm.avail_out?Z:q):t.last_lit&&(nt(t,!1),0===t.strm.avail_out)?X:K}function pt(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function mt(t){t.window_size=2*t.w_size,et(t.head),t.max_lazy_match=n[t.level].max_lazy,t.good_match=n[t.level].good_length,t.nice_match=n[t.level].nice_length,t.max_chain_length=n[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=F-1,t.match_available=0,t.ins_h=0}function vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*D),this.dyn_dtree=new i.Buf16(2*(2*O+1)),this.bl_tree=new i.Buf16(2*(2*L+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(R+1),this.heap=new i.Buf16(2*I+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*I+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function bt(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=S,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?$:H,t.adler=2===e.wrap?0:1,e.last_flush=l,a._tr_init(e),p):Q(t,v)}function gt(t){var e=bt(t);return e===p&&mt(t.state),e}function wt(t,e){return t&&t.state?2!==t.state.wrap?v:(t.state.gzhead=e,p):v}function yt(t,e,r,n,a,o){if(!t)return v;var s=1;if(e===w&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>E||r!==A||n<8||n>15||e<0||e>9||o<0||o>k)return Q(t,v);8===n&&(n=9);var c=new vt;return t.state=c,c.strm=t,c.wrap=s,c.gzhead=null,c.w_bits=n,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=a+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+F-1)/F),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<a+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=o,c.method=r,gt(t)}function xt(t,e){return yt(t,e,A,N,P,C)}function _t(t,e){var r,i,o,c;if(!t||!t.state||e>f||e<0)return t?Q(t,v):v;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===Y&&e!==h)return Q(t,0===t.avail_out?g:v);if(i.strm=t,r=i.last_flush,i.last_flush=e,i.status===$)if(2===i.wrap)t.adler=0,it(i,31),it(i,139),it(i,8),i.gzhead?(it(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),it(i,255&i.gzhead.time),it(i,i.gzhead.time>>8&255),it(i,i.gzhead.time>>16&255),it(i,i.gzhead.time>>24&255),it(i,9===i.level?2:i.strategy>=x||i.level<2?4:0),it(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(it(i,255&i.gzhead.extra.length),it(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=U):(it(i,0),it(i,0),it(i,0),it(i,0),it(i,0),it(i,9===i.level?2:i.strategy>=x||i.level<2?4:0),it(i,J),i.status=H);else{var b=A+(i.w_bits-8<<4)<<8,w=-1;w=i.strategy>=x||i.level<2?0:i.level<6?1:6===i.level?2:3,b|=w<<6,0!==i.strstart&&(b|=W),b+=31-b%31,i.status=H,at(i,b),0!==i.strstart&&(at(i,t.adler>>>16),at(i,65535&t.adler)),t.adler=1}if(i.status===U)if(i.gzhead.extra){o=i.pending;while(i.gzindex<(65535&i.gzhead.extra.length)){if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),rt(t),o=i.pending,i.pending===i.pending_buf_size))break;it(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++}i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=j)}else i.status=j;if(i.status===j)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),rt(t),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,it(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.gzindex=0,i.status=V)}else i.status=V;if(i.status===V)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),rt(t),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,it(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(t.adler=s(t.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.status=G)}else i.status=G;if(i.status===G&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&rt(t),i.pending+2<=i.pending_buf_size&&(it(i,255&t.adler),it(i,t.adler>>8&255),t.adler=0,i.status=H)):i.status=H),0!==i.pending){if(rt(t),0===t.avail_out)return i.last_flush=-1,p}else if(0===t.avail_in&&tt(e)<=tt(r)&&e!==h)return Q(t,g);if(i.status===Y&&0!==t.avail_in)return Q(t,g);if(0!==t.avail_in||0!==i.lookahead||e!==l&&i.status!==Y){var y=i.strategy===x?ft(i,e):i.strategy===_?ht(i,e):n[i.level].func(i,e);if(y!==Z&&y!==q||(i.status=Y),y===X||y===Z)return 0===t.avail_out&&(i.last_flush=-1),p;if(y===K&&(e===u?a._tr_align(i):e!==f&&(a._tr_stored_block(i,0,0,!1),e===d&&(et(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),rt(t),0===t.avail_out))return i.last_flush=-1,p}return e!==h?p:i.wrap<=0?m:(2===i.wrap?(it(i,255&t.adler),it(i,t.adler>>8&255),it(i,t.adler>>16&255),it(i,t.adler>>24&255),it(i,255&t.total_in),it(i,t.total_in>>8&255),it(i,t.total_in>>16&255),it(i,t.total_in>>24&255)):(at(i,t.adler>>>16),at(i,65535&t.adler)),rt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:m)}function kt(t){var e;return t&&t.state?(e=t.state.status,e!==$&&e!==U&&e!==j&&e!==V&&e!==G&&e!==H&&e!==Y?Q(t,v):(t.state=null,e===H?Q(t,b):p)):v}function Ct(t,e){var r,n,a,s,c,l,u,d,h=e.length;if(!t||!t.state)return v;if(r=t.state,s=r.wrap,2===s||1===s&&r.status!==$||r.lookahead)return v;1===s&&(t.adler=o(t.adler,e,h,0)),r.wrap=0,h>=r.w_size&&(0===s&&(et(r.head),r.strstart=0,r.block_start=0,r.insert=0),d=new i.Buf8(r.w_size),i.arraySet(d,e,h-r.w_size,r.w_size,0),e=d,h=r.w_size),c=t.avail_in,l=t.next_in,u=t.input,t.avail_in=h,t.next_in=0,t.input=e,ct(r);while(r.lookahead>=F){n=r.strstart,a=r.lookahead-(F-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+F-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--a);r.strstart=n,r.lookahead=F-1,ct(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=F-1,r.match_available=0,t.next_in=l,t.input=u,t.avail_in=c,r.wrap=s,p}n=[new pt(0,0,0,0,lt),new pt(4,4,8,4,ut),new pt(4,5,16,8,ut),new pt(4,6,32,32,ut),new pt(4,4,16,16,dt),new pt(8,16,32,32,dt),new pt(8,16,128,128,dt),new pt(8,32,128,256,dt),new pt(32,128,258,1024,dt),new pt(32,258,258,4096,dt)],r.deflateInit=xt,r.deflateInit2=yt,r.deflateReset=gt,r.deflateResetKeep=bt,r.deflateSetHeader=wt,r.deflate=_t,r.deflateEnd=kt,r.deflateSetDictionary=Ct,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,r){function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n},{}],48:[function(t,e,r){var n=30,i=12;e.exports=function(t,e){var r,a,o,s,c,l,u,d,h,f,p,m,v,b,g,w,y,x,_,k,C,S,A,E,N;r=t.state,a=t.next_in,E=t.input,o=a+(t.avail_in-5),s=t.next_out,N=t.output,c=s-(e-t.avail_out),l=s+(t.avail_out-257),u=r.dmax,d=r.wsize,h=r.whave,f=r.wnext,p=r.window,m=r.hold,v=r.bits,b=r.lencode,g=r.distcode,w=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;t:do{v<15&&(m+=E[a++]<<v,v+=8,m+=E[a++]<<v,v+=8),x=b[m&w];e:for(;;){if(_=x>>>24,m>>>=_,v-=_,_=x>>>16&255,0===_)N[s++]=65535&x;else{if(!(16&_)){if(0===(64&_)){x=b[(65535&x)+(m&(1<<_)-1)];continue e}if(32&_){r.mode=i;break t}t.msg="invalid literal/length code",r.mode=n;break t}k=65535&x,_&=15,_&&(v<_&&(m+=E[a++]<<v,v+=8),k+=m&(1<<_)-1,m>>>=_,v-=_),v<15&&(m+=E[a++]<<v,v+=8,m+=E[a++]<<v,v+=8),x=g[m&y];r:for(;;){if(_=x>>>24,m>>>=_,v-=_,_=x>>>16&255,!(16&_)){if(0===(64&_)){x=g[(65535&x)+(m&(1<<_)-1)];continue r}t.msg="invalid distance code",r.mode=n;break t}if(C=65535&x,_&=15,v<_&&(m+=E[a++]<<v,v+=8,v<_&&(m+=E[a++]<<v,v+=8)),C+=m&(1<<_)-1,C>u){t.msg="invalid distance too far back",r.mode=n;break t}if(m>>>=_,v-=_,_=s-c,C>_){if(_=C-_,_>h&&r.sane){t.msg="invalid distance too far back",r.mode=n;break t}if(S=0,A=p,0===f){if(S+=d-_,_<k){k-=_;do{N[s++]=p[S++]}while(--_);S=s-C,A=N}}else if(f<_){if(S+=d+f-_,_-=f,_<k){k-=_;do{N[s++]=p[S++]}while(--_);if(S=0,f<k){_=f,k-=_;do{N[s++]=p[S++]}while(--_);S=s-C,A=N}}}else if(S+=f-_,_<k){k-=_;do{N[s++]=p[S++]}while(--_);S=s-C,A=N}while(k>2)N[s++]=A[S++],N[s++]=A[S++],N[s++]=A[S++],k-=3;k&&(N[s++]=A[S++],k>1&&(N[s++]=A[S++]))}else{S=s-C;do{N[s++]=N[S++],N[s++]=N[S++],N[s++]=N[S++],k-=3}while(k>2);k&&(N[s++]=N[S++],k>1&&(N[s++]=N[S++]))}break}}break}}while(a<o&&s<l);k=v>>3,a-=k,v-=k<<3,m&=(1<<v)-1,t.next_in=a,t.next_out=s,t.avail_in=a<o?o-a+5:5-(a-o),t.avail_out=s<l?l-s+257:257-(s-l),r.hold=m,r.bits=v}},{}],49:[function(t,e,r){var n=t("../utils/common"),i=t("./adler32"),a=t("./crc32"),o=t("./inffast"),s=t("./inftrees"),c=0,l=1,u=2,d=4,h=5,f=6,p=0,m=1,v=2,b=-2,g=-3,w=-4,y=-5,x=8,_=1,k=2,C=3,S=4,A=5,E=6,N=7,P=8,T=9,M=10,I=11,O=12,L=13,D=14,R=15,F=16,B=17,z=18,W=19,$=20,U=21,j=22,V=23,G=24,H=25,Y=26,X=27,K=28,Z=29,q=30,J=31,Q=32,tt=852,et=592,rt=15,nt=rt;function it(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function at(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function ot(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=_,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(tt),e.distcode=e.distdyn=new n.Buf32(et),e.sane=1,e.back=-1,p):b}function st(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,ot(t)):b}function ct(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?b:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,st(t))):b}function lt(t,e){var r,n;return t?(n=new at,t.state=n,n.window=null,r=ct(t,e),r!==p&&(t.state=null),r):b}function ut(t){return lt(t,nt)}var dt,ht,ft=!0;function pt(t){if(ft){var e;dt=new n.Buf32(512),ht=new n.Buf32(32),e=0;while(e<144)t.lens[e++]=8;while(e<256)t.lens[e++]=9;while(e<280)t.lens[e++]=7;while(e<288)t.lens[e++]=8;s(l,t.lens,0,288,dt,0,t.work,{bits:9}),e=0;while(e<32)t.lens[e++]=5;s(u,t.lens,0,32,ht,0,t.work,{bits:5}),ft=!1}t.lencode=dt,t.lenbits=9,t.distcode=ht,t.distbits=5}function mt(t,e,r,i){var a,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),i>=o.wsize?(n.arraySet(o.window,e,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(a=o.wsize-o.wnext,a>i&&(a=i),n.arraySet(o.window,e,r-i,a,o.wnext),i-=a,i?(n.arraySet(o.window,e,r-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=a,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=a))),0}function vt(t,e){var r,tt,et,rt,nt,at,ot,st,ct,lt,ut,dt,ht,ft,vt,bt,gt,wt,yt,xt,_t,kt,Ct,St,At=0,Et=new n.Buf8(4),Nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return b;r=t.state,r.mode===O&&(r.mode=L),nt=t.next_out,et=t.output,ot=t.avail_out,rt=t.next_in,tt=t.input,at=t.avail_in,st=r.hold,ct=r.bits,lt=at,ut=ot,kt=p;t:for(;;)switch(r.mode){case _:if(0===r.wrap){r.mode=L;break}while(ct<16){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if(2&r.wrap&&35615===st){r.check=0,Et[0]=255&st,Et[1]=st>>>8&255,r.check=a(r.check,Et,2,0),st=0,ct=0,r.mode=k;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&st)<<8)+(st>>8))%31){t.msg="incorrect header check",r.mode=q;break}if((15&st)!==x){t.msg="unknown compression method",r.mode=q;break}if(st>>>=4,ct-=4,_t=8+(15&st),0===r.wbits)r.wbits=_t;else if(_t>r.wbits){t.msg="invalid window size",r.mode=q;break}r.dmax=1<<_t,t.adler=r.check=1,r.mode=512&st?M:O,st=0,ct=0;break;case k:while(ct<16){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if(r.flags=st,(255&r.flags)!==x){t.msg="unknown compression method",r.mode=q;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=q;break}r.head&&(r.head.text=st>>8&1),512&r.flags&&(Et[0]=255&st,Et[1]=st>>>8&255,r.check=a(r.check,Et,2,0)),st=0,ct=0,r.mode=C;case C:while(ct<32){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}r.head&&(r.head.time=st),512&r.flags&&(Et[0]=255&st,Et[1]=st>>>8&255,Et[2]=st>>>16&255,Et[3]=st>>>24&255,r.check=a(r.check,Et,4,0)),st=0,ct=0,r.mode=S;case S:while(ct<16){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}r.head&&(r.head.xflags=255&st,r.head.os=st>>8),512&r.flags&&(Et[0]=255&st,Et[1]=st>>>8&255,r.check=a(r.check,Et,2,0)),st=0,ct=0,r.mode=A;case A:if(1024&r.flags){while(ct<16){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}r.length=st,r.head&&(r.head.extra_len=st),512&r.flags&&(Et[0]=255&st,Et[1]=st>>>8&255,r.check=a(r.check,Et,2,0)),st=0,ct=0}else r.head&&(r.head.extra=null);r.mode=E;case E:if(1024&r.flags&&(dt=r.length,dt>at&&(dt=at),dt&&(r.head&&(_t=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,tt,rt,dt,_t)),512&r.flags&&(r.check=a(r.check,tt,dt,rt)),at-=dt,rt+=dt,r.length-=dt),r.length))break t;r.length=0,r.mode=N;case N:if(2048&r.flags){if(0===at)break t;dt=0;do{_t=tt[rt+dt++],r.head&&_t&&r.length<65536&&(r.head.name+=String.fromCharCode(_t))}while(_t&&dt<at);if(512&r.flags&&(r.check=a(r.check,tt,dt,rt)),at-=dt,rt+=dt,_t)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=P;case P:if(4096&r.flags){if(0===at)break t;dt=0;do{_t=tt[rt+dt++],r.head&&_t&&r.length<65536&&(r.head.comment+=String.fromCharCode(_t))}while(_t&&dt<at);if(512&r.flags&&(r.check=a(r.check,tt,dt,rt)),at-=dt,rt+=dt,_t)break t}else r.head&&(r.head.comment=null);r.mode=T;case T:if(512&r.flags){while(ct<16){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if(st!==(65535&r.check)){t.msg="header crc mismatch",r.mode=q;break}st=0,ct=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=O;break;case M:while(ct<32){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}t.adler=r.check=it(st),st=0,ct=0,r.mode=I;case I:if(0===r.havedict)return t.next_out=nt,t.avail_out=ot,t.next_in=rt,t.avail_in=at,r.hold=st,r.bits=ct,v;t.adler=r.check=1,r.mode=O;case O:if(e===h||e===f)break t;case L:if(r.last){st>>>=7&ct,ct-=7&ct,r.mode=X;break}while(ct<3){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}switch(r.last=1&st,st>>>=1,ct-=1,3&st){case 0:r.mode=D;break;case 1:if(pt(r),r.mode=$,e===f){st>>>=2,ct-=2;break t}break;case 2:r.mode=B;break;case 3:t.msg="invalid block type",r.mode=q}st>>>=2,ct-=2;break;case D:st>>>=7&ct,ct-=7&ct;while(ct<32){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if((65535&st)!==(st>>>16^65535)){t.msg="invalid stored block lengths",r.mode=q;break}if(r.length=65535&st,st=0,ct=0,r.mode=R,e===f)break t;case R:r.mode=F;case F:if(dt=r.length,dt){if(dt>at&&(dt=at),dt>ot&&(dt=ot),0===dt)break t;n.arraySet(et,tt,rt,dt,nt),at-=dt,rt+=dt,ot-=dt,nt+=dt,r.length-=dt;break}r.mode=O;break;case B:while(ct<14){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if(r.nlen=257+(31&st),st>>>=5,ct-=5,r.ndist=1+(31&st),st>>>=5,ct-=5,r.ncode=4+(15&st),st>>>=4,ct-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=q;break}r.have=0,r.mode=z;case z:while(r.have<r.ncode){while(ct<3){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}r.lens[Nt[r.have++]]=7&st,st>>>=3,ct-=3}while(r.have<19)r.lens[Nt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ct={bits:r.lenbits},kt=s(c,r.lens,0,19,r.lencode,0,r.work,Ct),r.lenbits=Ct.bits,kt){t.msg="invalid code lengths set",r.mode=q;break}r.have=0,r.mode=W;case W:while(r.have<r.nlen+r.ndist){for(;;){if(At=r.lencode[st&(1<<r.lenbits)-1],vt=At>>>24,bt=At>>>16&255,gt=65535&At,vt<=ct)break;if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if(gt<16)st>>>=vt,ct-=vt,r.lens[r.have++]=gt;else{if(16===gt){St=vt+2;while(ct<St){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if(st>>>=vt,ct-=vt,0===r.have){t.msg="invalid bit length repeat",r.mode=q;break}_t=r.lens[r.have-1],dt=3+(3&st),st>>>=2,ct-=2}else if(17===gt){St=vt+3;while(ct<St){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}st>>>=vt,ct-=vt,_t=0,dt=3+(7&st),st>>>=3,ct-=3}else{St=vt+7;while(ct<St){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}st>>>=vt,ct-=vt,_t=0,dt=11+(127&st),st>>>=7,ct-=7}if(r.have+dt>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=q;break}while(dt--)r.lens[r.have++]=_t}}if(r.mode===q)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=q;break}if(r.lenbits=9,Ct={bits:r.lenbits},kt=s(l,r.lens,0,r.nlen,r.lencode,0,r.work,Ct),r.lenbits=Ct.bits,kt){t.msg="invalid literal/lengths set",r.mode=q;break}if(r.distbits=6,r.distcode=r.distdyn,Ct={bits:r.distbits},kt=s(u,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ct),r.distbits=Ct.bits,kt){t.msg="invalid distances set",r.mode=q;break}if(r.mode=$,e===f)break t;case $:r.mode=U;case U:if(at>=6&&ot>=258){t.next_out=nt,t.avail_out=ot,t.next_in=rt,t.avail_in=at,r.hold=st,r.bits=ct,o(t,ut),nt=t.next_out,et=t.output,ot=t.avail_out,rt=t.next_in,tt=t.input,at=t.avail_in,st=r.hold,ct=r.bits,r.mode===O&&(r.back=-1);break}for(r.back=0;;){if(At=r.lencode[st&(1<<r.lenbits)-1],vt=At>>>24,bt=At>>>16&255,gt=65535&At,vt<=ct)break;if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if(bt&&0===(240&bt)){for(wt=vt,yt=bt,xt=gt;;){if(At=r.lencode[xt+((st&(1<<wt+yt)-1)>>wt)],vt=At>>>24,bt=At>>>16&255,gt=65535&At,wt+vt<=ct)break;if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}st>>>=wt,ct-=wt,r.back+=wt}if(st>>>=vt,ct-=vt,r.back+=vt,r.length=gt,0===bt){r.mode=Y;break}if(32&bt){r.back=-1,r.mode=O;break}if(64&bt){t.msg="invalid literal/length code",r.mode=q;break}r.extra=15&bt,r.mode=j;case j:if(r.extra){St=r.extra;while(ct<St){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}r.length+=st&(1<<r.extra)-1,st>>>=r.extra,ct-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=V;case V:for(;;){if(At=r.distcode[st&(1<<r.distbits)-1],vt=At>>>24,bt=At>>>16&255,gt=65535&At,vt<=ct)break;if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if(0===(240&bt)){for(wt=vt,yt=bt,xt=gt;;){if(At=r.distcode[xt+((st&(1<<wt+yt)-1)>>wt)],vt=At>>>24,bt=At>>>16&255,gt=65535&At,wt+vt<=ct)break;if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}st>>>=wt,ct-=wt,r.back+=wt}if(st>>>=vt,ct-=vt,r.back+=vt,64&bt){t.msg="invalid distance code",r.mode=q;break}r.offset=gt,r.extra=15&bt,r.mode=G;case G:if(r.extra){St=r.extra;while(ct<St){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}r.offset+=st&(1<<r.extra)-1,st>>>=r.extra,ct-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=q;break}r.mode=H;case H:if(0===ot)break t;if(dt=ut-ot,r.offset>dt){if(dt=r.offset-dt,dt>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=q;break}dt>r.wnext?(dt-=r.wnext,ht=r.wsize-dt):ht=r.wnext-dt,dt>r.length&&(dt=r.length),ft=r.window}else ft=et,ht=nt-r.offset,dt=r.length;dt>ot&&(dt=ot),ot-=dt,r.length-=dt;do{et[nt++]=ft[ht++]}while(--dt);0===r.length&&(r.mode=U);break;case Y:if(0===ot)break t;et[nt++]=r.length,ot--,r.mode=U;break;case X:if(r.wrap){while(ct<32){if(0===at)break t;at--,st|=tt[rt++]<<ct,ct+=8}if(ut-=ot,t.total_out+=ut,r.total+=ut,ut&&(t.adler=r.check=r.flags?a(r.check,et,ut,nt-ut):i(r.check,et,ut,nt-ut)),ut=ot,(r.flags?st:it(st))!==r.check){t.msg="incorrect data check",r.mode=q;break}st=0,ct=0}r.mode=K;case K:if(r.wrap&&r.flags){while(ct<32){if(0===at)break t;at--,st+=tt[rt++]<<ct,ct+=8}if(st!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=q;break}st=0,ct=0}r.mode=Z;case Z:kt=m;break t;case q:kt=g;break t;case J:return w;case Q:default:return b}return t.next_out=nt,t.avail_out=ot,t.next_in=rt,t.avail_in=at,r.hold=st,r.bits=ct,(r.wsize||ut!==t.avail_out&&r.mode<q&&(r.mode<X||e!==d))&&mt(t,t.output,t.next_out,ut-t.avail_out)?(r.mode=J,w):(lt-=t.avail_in,ut-=t.avail_out,t.total_in+=lt,t.total_out+=ut,r.total+=ut,r.wrap&&ut&&(t.adler=r.check=r.flags?a(r.check,et,ut,t.next_out-ut):i(r.check,et,ut,t.next_out-ut)),t.data_type=r.bits+(r.last?64:0)+(r.mode===O?128:0)+(r.mode===$||r.mode===R?256:0),(0===lt&&0===ut||e===d)&&kt===p&&(kt=y),kt)}function bt(t){if(!t||!t.state)return b;var e=t.state;return e.window&&(e.window=null),t.state=null,p}function gt(t,e){var r;return t&&t.state?(r=t.state,0===(2&r.wrap)?b:(r.head=e,e.done=!1,p)):b}function wt(t,e){var r,n,a,o=e.length;return t&&t.state?(r=t.state,0!==r.wrap&&r.mode!==I?b:r.mode===I&&(n=1,n=i(n,e,o,0),n!==r.check)?g:(a=mt(t,e,o,o),a?(r.mode=J,w):(r.havedict=1,p))):b}r.inflateReset=st,r.inflateReset2=ct,r.inflateResetKeep=ot,r.inflateInit=ut,r.inflateInit2=lt,r.inflate=vt,r.inflateEnd=bt,r.inflateGetHeader=gt,r.inflateSetDictionary=wt,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,r){var n=t("../utils/common"),i=15,a=852,o=592,s=0,c=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,p,m,v,b,g){var w,y,x,_,k,C,S,A,E,N=g.bits,P=0,T=0,M=0,I=0,O=0,L=0,D=0,R=0,F=0,B=0,z=null,W=0,$=new n.Buf16(i+1),U=new n.Buf16(i+1),j=null,V=0;for(P=0;P<=i;P++)$[P]=0;for(T=0;T<p;T++)$[e[r+T]]++;for(O=N,I=i;I>=1;I--)if(0!==$[I])break;if(O>I&&(O=I),0===I)return m[v++]=20971520,m[v++]=20971520,g.bits=1,0;for(M=1;M<I;M++)if(0!==$[M])break;for(O<M&&(O=M),R=1,P=1;P<=i;P++)if(R<<=1,R-=$[P],R<0)return-1;if(R>0&&(t===s||1!==I))return-1;for(U[1]=0,P=1;P<i;P++)U[P+1]=U[P]+$[P];for(T=0;T<p;T++)0!==e[r+T]&&(b[U[e[r+T]]++]=T);if(t===s?(z=j=b,C=19):t===c?(z=u,W-=257,j=d,V-=257,C=256):(z=h,j=f,C=-1),B=0,T=0,P=M,k=v,L=O,D=0,x=-1,F=1<<O,_=F-1,t===c&&F>a||t===l&&F>o)return 1;for(;;){S=P-D,b[T]<C?(A=0,E=b[T]):b[T]>C?(A=j[V+b[T]],E=z[W+b[T]]):(A=96,E=0),w=1<<P-D,y=1<<L,M=y;do{y-=w,m[k+(B>>D)+y]=S<<24|A<<16|E|0}while(0!==y);w=1<<P-1;while(B&w)w>>=1;if(0!==w?(B&=w-1,B+=w):B=0,T++,0===--$[P]){if(P===I)break;P=e[r+b[T]]}if(P>O&&(B&_)!==x){0===D&&(D=O),k+=M,L=P-D,R=1<<L;while(L+D<I){if(R-=$[L+D],R<=0)break;L++,R<<=1}if(F+=1<<L,t===c&&F>a||t===l&&F>o)return 1;x=B&_,m[x]=O<<24|L<<16|k-v|0}}return 0!==B&&(m[k+B]=P-D<<24|64<<16|0),g.bits=O,0}},{"../utils/common":41}],51:[function(t,e,r){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,r){var n=t("../utils/common"),i=4,a=0,o=1,s=2;function c(t){var e=t.length;while(--e>=0)t[e]=0}var l=0,u=1,d=2,h=3,f=258,p=29,m=256,v=m+1+p,b=30,g=19,w=2*v+1,y=15,x=16,_=7,k=256,C=16,S=17,A=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=512,I=new Array(2*(v+2));c(I);var O=new Array(2*b);c(O);var L=new Array(M);c(L);var D=new Array(f-h+1);c(D);var R=new Array(p);c(R);var F,B,z,W=new Array(b);function $(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function U(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function j(t){return t<256?L[t]:L[256+(t>>>7)]}function V(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function G(t,e,r){t.bi_valid>x-r?(t.bi_buf|=e<<t.bi_valid&65535,V(t,t.bi_buf),t.bi_buf=e>>x-t.bi_valid,t.bi_valid+=r-x):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function H(t,e,r){G(t,r[2*e],r[2*e+1])}function Y(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function X(t){16===t.bi_valid?(V(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function K(t,e){var r,n,i,a,o,s,c=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,d=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,m=0;for(a=0;a<=y;a++)t.bl_count[a]=0;for(c[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<w;r++)n=t.heap[r],a=c[2*c[2*n+1]+1]+1,a>p&&(a=p,m++),c[2*n+1]=a,n>l||(t.bl_count[a]++,o=0,n>=f&&(o=h[n-f]),s=c[2*n],t.opt_len+=s*(a+o),d&&(t.static_len+=s*(u[2*n+1]+o)));if(0!==m){do{a=p-1;while(0===t.bl_count[a])a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,m-=2}while(m>0);for(a=p;0!==a;a--){n=t.bl_count[a];while(0!==n)i=t.heap[--r],i>l||(c[2*i+1]!==a&&(t.opt_len+=(a-c[2*i+1])*c[2*i],c[2*i+1]=a),n--)}}}function Z(t,e,r){var n,i,a=new Array(y+1),o=0;for(n=1;n<=y;n++)a[n]=o=o+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=Y(a[s]++,s))}}function q(){var t,e,r,n,i,a=new Array(y+1);for(r=0,n=0;n<p-1;n++)for(R[n]=r,t=0;t<1<<E[n];t++)D[r++]=n;for(D[r-1]=n,i=0,n=0;n<16;n++)for(W[n]=i,t=0;t<1<<N[n];t++)L[i++]=n;for(i>>=7;n<b;n++)for(W[n]=i<<7,t=0;t<1<<N[n]-7;t++)L[256+i++]=n;for(e=0;e<=y;e++)a[e]=0;t=0;while(t<=143)I[2*t+1]=8,t++,a[8]++;while(t<=255)I[2*t+1]=9,t++,a[9]++;while(t<=279)I[2*t+1]=7,t++,a[7]++;while(t<=287)I[2*t+1]=8,t++,a[8]++;for(Z(I,v+1,a),t=0;t<b;t++)O[2*t+1]=5,O[2*t]=Y(t,5);F=new $(I,E,m+1,v,y),B=new $(O,N,0,b,y),z=new $(new Array(0),P,0,g,_)}function J(t){var e;for(e=0;e<v;e++)t.dyn_ltree[2*e]=0;for(e=0;e<b;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*k]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Q(t){t.bi_valid>8?V(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function tt(t,e,r,i){Q(t),i&&(V(t,r),V(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function et(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function rt(t,e,r){var n=t.heap[r],i=r<<1;while(i<=t.heap_len){if(i<t.heap_len&&et(e,t.heap[i+1],t.heap[i],t.depth)&&i++,et(e,n,t.heap[i],t.depth))break;t.heap[r]=t.heap[i],r=i,i<<=1}t.heap[r]=n}function nt(t,e,r){var n,i,a,o,s=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===n?H(t,i,e):(a=D[i],H(t,a+m+1,e),o=E[a],0!==o&&(i-=R[a],G(t,i,o)),n--,a=j(n),H(t,a,r),o=N[a],0!==o&&(n-=W[a],G(t,n,o)))}while(s<t.last_lit);H(t,k,e)}function it(t,e){var r,n,i,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=w,r=0;r<c;r++)0!==a[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):a[2*r+1]=0;while(t.heap_len<2)i=t.heap[++t.heap_len]=l<2?++l:0,a[2*i]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)rt(t,a,r);i=c;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],rt(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,rt(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],K(t,e),Z(a,l,t.bl_count)}function at(t,e,r){var n,i,a=-1,o=e[1],s=0,c=7,l=4;for(0===o&&(c=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=e[2*(n+1)+1],++s<c&&i===o||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[2*C]++):s<=10?t.bl_tree[2*S]++:t.bl_tree[2*A]++,s=0,a=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4))}function ot(t,e,r){var n,i,a=-1,o=e[1],s=0,c=7,l=4;for(0===o&&(c=138,l=3),n=0;n<=r;n++)if(i=o,o=e[2*(n+1)+1],!(++s<c&&i===o)){if(s<l)do{H(t,i,t.bl_tree)}while(0!==--s);else 0!==i?(i!==a&&(H(t,i,t.bl_tree),s--),H(t,C,t.bl_tree),G(t,s-3,2)):s<=10?(H(t,S,t.bl_tree),G(t,s-3,3)):(H(t,A,t.bl_tree),G(t,s-11,7));s=0,a=i,0===o?(c=138,l=3):i===o?(c=6,l=3):(c=7,l=4)}}function st(t){var e;for(at(t,t.dyn_ltree,t.l_desc.max_code),at(t,t.dyn_dtree,t.d_desc.max_code),it(t,t.bl_desc),e=g-1;e>=3;e--)if(0!==t.bl_tree[2*T[e]+1])break;return t.opt_len+=3*(e+1)+5+5+4,e}function ct(t,e,r,n){var i;for(G(t,e-257,5),G(t,r-1,5),G(t,n-4,4),i=0;i<n;i++)G(t,t.bl_tree[2*T[i]+1],3);ot(t,t.dyn_ltree,e-1),ot(t,t.dyn_dtree,r-1)}function lt(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return a;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<m;e++)if(0!==t.dyn_ltree[2*e])return o;return a}c(W);var ut=!1;function dt(t){ut||(q(),ut=!0),t.l_desc=new U(t.dyn_ltree,F),t.d_desc=new U(t.dyn_dtree,B),t.bl_desc=new U(t.bl_tree,z),t.bi_buf=0,t.bi_valid=0,J(t)}function ht(t,e,r,n){G(t,(l<<1)+(n?1:0),3),tt(t,e,r,!0)}function ft(t){G(t,u<<1,3),H(t,k,I),X(t)}function pt(t,e,r,n){var a,o,c=0;t.level>0?(t.strm.data_type===s&&(t.strm.data_type=lt(t)),it(t,t.l_desc),it(t,t.d_desc),c=st(t),a=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=a&&(a=o)):a=o=r+5,r+4<=a&&-1!==e?ht(t,e,r,n):t.strategy===i||o===a?(G(t,(u<<1)+(n?1:0),3),nt(t,I,O)):(G(t,(d<<1)+(n?1:0),3),ct(t,t.l_desc.max_code+1,t.d_desc.max_code+1,c+1),nt(t,t.dyn_ltree,t.dyn_dtree)),J(t),n&&Q(t)}function mt(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(D[r]+m+1)]++,t.dyn_dtree[2*j(e)]++),t.last_lit===t.lit_bufsize-1}r._tr_init=dt,r._tr_stored_block=ht,r._tr_flush_block=pt,r._tr_tally=mt,r._tr_align=ft},{"../utils/common":41}],53:[function(t,e,r){function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},{}],54:[function(t,e,r){e.exports="function"===typeof setImmediate?setImmediate:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)}))}).call(this,r("b639").Buffer,r("c8ba"),r("dd40")(t))},b2e5:function(t,e,r){"use strict";var n=r("0c3c"),i=r.n(n);i.a},b8b0:function(t,e,r){},b98e:function(t,e,r){},b99b:function(t,e,r){},c018:function(t,e,r){},c072:function(t,e,r){"use strict";var n=r("c1c7"),i=r.n(n);i.a},c1c7:function(t,e,r){},c1fd:function(t,e,r){"use strict";var n=r("b98e"),i=r.n(n);i.a},cc94:function(t,e,r){},cf3d:function(t,e,r){"use strict";var n=r("2422"),i=r.n(n);i.a},cfeb:function(t,e,r){"use strict";var n=r("9661"),i=r.n(n);i.a},d0ac:function(t,e,r){"use strict";var n=r("22fa"),i=r.n(n);i.a},d169:function(t,e,r){"use strict";var n=r("7fa0"),i=r.n(n);i.a},d1fd:function(t,e,r){"use strict";var n=r("2ee3"),i=r.n(n);i.a},d2d0:function(t,e,r){"use strict";var n=r("72ad"),i=r.n(n);i.a},d405:function(t,e,r){},d4bb:function(t,e,r){"use strict";var n=r("66a4"),i=r.n(n);i.a},d907:function(t,e,r){"use strict";var n=r("1132"),i=r.n(n);i.a},d994:function(t,e,r){},da06:function(t,e,r){},df67:function(t,e,r){"use strict";var n=r("a70a"),i=r.n(n);i.a},e47a:function(t,e,r){"use strict";var n=r("3025"),i=r.n(n);i.a},e47e:function(t,e,r){},e7be:function(t,e,r){"use strict";var n=r("2469"),i=r.n(n);i.a},ea6e:function(t,e,r){"use strict";var n=r("46aa"),i=r.n(n);i.a},ea90:function(t,e,r){"use strict";var n=r("127d"),i=r.n(n);i.a},ed12:function(t,e,r){"use strict";var n=r("d405"),i=r.n(n);i.a},ef8d:function(t,e,r){},f19e:function(t,e,r){"use strict";var n=r("2918"),i=r.n(n);i.a},f1f5:function(t,e,r){},f325:function(t,e,r){},f432:function(t,e,r){"use strict";var n=r("f1f5"),i=r.n(n);i.a},f4c3:function(t,e,r){},f53b:function(t,e,r){"use strict";var n=r("af1e"),i=r.n(n);i.a},f601:function(t,e,r){},f920:function(t,e,r){},ff98:function(t,e,r){"use strict";var n=r("cc94"),i=r.n(n);i.a}});